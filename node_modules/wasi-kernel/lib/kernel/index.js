(()=>{var t={1311:(t,e,i)=>{"use strict";const r=i(9496),n=i(3986),s=i(6470),o=i(2946),a={hrtime:i(998).default(n.default),exit:t=>{throw new o.WASIExitError(t)},kill:t=>{throw new o.WASIKillError(t)},randomFillSync:r.randomFillSync,isTTY:()=>!0,path:s,fs:null};e.Z=a},9647:(t,e,i)=>{"use strict";const r=i(6417),n=i(5747),{isatty:s}=i(3867),o=i(5622);let a=i(998).default(process.hrtime);process.hrtime&&process.hrtime.bigint&&(a=process.hrtime.bigint);const c={hrtime:a,exit:t=>{process.exit(t)},kill:t=>{process.kill(process.pid,t)},randomFillSync:r.randomFillSync,isTTY:s,fs:n,path:o};e.Z=c},2055:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(9642);e.WASI_ESUCCESS=0,e.WASI_E2BIG=1,e.WASI_EACCES=2,e.WASI_EADDRINUSE=3,e.WASI_EADDRNOTAVAIL=4,e.WASI_EAFNOSUPPORT=5,e.WASI_EAGAIN=6,e.WASI_EALREADY=7,e.WASI_EBADF=8,e.WASI_EBADMSG=9,e.WASI_EBUSY=10,e.WASI_ECANCELED=11,e.WASI_ECHILD=12,e.WASI_ECONNABORTED=13,e.WASI_ECONNREFUSED=14,e.WASI_ECONNRESET=15,e.WASI_EDEADLK=16,e.WASI_EDESTADDRREQ=17,e.WASI_EDOM=18,e.WASI_EDQUOT=19,e.WASI_EEXIST=20,e.WASI_EFAULT=21,e.WASI_EFBIG=22,e.WASI_EHOSTUNREACH=23,e.WASI_EIDRM=24,e.WASI_EILSEQ=25,e.WASI_EINPROGRESS=26,e.WASI_EINTR=27,e.WASI_EINVAL=28,e.WASI_EIO=29,e.WASI_EISCONN=30,e.WASI_EISDIR=31,e.WASI_ELOOP=32,e.WASI_EMFILE=33,e.WASI_EMLINK=34,e.WASI_EMSGSIZE=35,e.WASI_EMULTIHOP=36,e.WASI_ENAMETOOLONG=37,e.WASI_ENETDOWN=38,e.WASI_ENETRESET=39,e.WASI_ENETUNREACH=40,e.WASI_ENFILE=41,e.WASI_ENOBUFS=42,e.WASI_ENODEV=43,e.WASI_ENOENT=44,e.WASI_ENOEXEC=45,e.WASI_ENOLCK=46,e.WASI_ENOLINK=47,e.WASI_ENOMEM=48,e.WASI_ENOMSG=49,e.WASI_ENOPROTOOPT=50,e.WASI_ENOSPC=51,e.WASI_ENOSYS=52,e.WASI_ENOTCONN=53,e.WASI_ENOTDIR=54,e.WASI_ENOTEMPTY=55,e.WASI_ENOTRECOVERABLE=56,e.WASI_ENOTSOCK=57,e.WASI_ENOTSUP=58,e.WASI_ENOTTY=59,e.WASI_ENXIO=60,e.WASI_EOVERFLOW=61,e.WASI_EOWNERDEAD=62,e.WASI_EPERM=63,e.WASI_EPIPE=64,e.WASI_EPROTO=65,e.WASI_EPROTONOSUPPORT=66,e.WASI_EPROTOTYPE=67,e.WASI_ERANGE=68,e.WASI_EROFS=69,e.WASI_ESPIPE=70,e.WASI_ESRCH=71,e.WASI_ESTALE=72,e.WASI_ETIMEDOUT=73,e.WASI_ETXTBSY=74,e.WASI_EXDEV=75,e.WASI_ENOTCAPABLE=76,e.WASI_SIGABRT=0,e.WASI_SIGALRM=1,e.WASI_SIGBUS=2,e.WASI_SIGCHLD=3,e.WASI_SIGCONT=4,e.WASI_SIGFPE=5,e.WASI_SIGHUP=6,e.WASI_SIGILL=7,e.WASI_SIGINT=8,e.WASI_SIGKILL=9,e.WASI_SIGPIPE=10,e.WASI_SIGQUIT=11,e.WASI_SIGSEGV=12,e.WASI_SIGSTOP=13,e.WASI_SIGTERM=14,e.WASI_SIGTRAP=15,e.WASI_SIGTSTP=16,e.WASI_SIGTTIN=17,e.WASI_SIGTTOU=18,e.WASI_SIGURG=19,e.WASI_SIGUSR1=20,e.WASI_SIGUSR2=21,e.WASI_SIGVTALRM=22,e.WASI_SIGXCPU=23,e.WASI_SIGXFSZ=24,e.WASI_FILETYPE_UNKNOWN=0,e.WASI_FILETYPE_BLOCK_DEVICE=1,e.WASI_FILETYPE_CHARACTER_DEVICE=2,e.WASI_FILETYPE_DIRECTORY=3,e.WASI_FILETYPE_REGULAR_FILE=4,e.WASI_FILETYPE_SOCKET_DGRAM=5,e.WASI_FILETYPE_SOCKET_STREAM=6,e.WASI_FILETYPE_SYMBOLIC_LINK=7,e.WASI_FDFLAG_APPEND=1,e.WASI_FDFLAG_DSYNC=2,e.WASI_FDFLAG_NONBLOCK=4,e.WASI_FDFLAG_RSYNC=8,e.WASI_FDFLAG_SYNC=16,e.WASI_RIGHT_FD_DATASYNC=r.BigIntPolyfill(1),e.WASI_RIGHT_FD_READ=r.BigIntPolyfill(2),e.WASI_RIGHT_FD_SEEK=r.BigIntPolyfill(4),e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS=r.BigIntPolyfill(8),e.WASI_RIGHT_FD_SYNC=r.BigIntPolyfill(16),e.WASI_RIGHT_FD_TELL=r.BigIntPolyfill(32),e.WASI_RIGHT_FD_WRITE=r.BigIntPolyfill(64),e.WASI_RIGHT_FD_ADVISE=r.BigIntPolyfill(128),e.WASI_RIGHT_FD_ALLOCATE=r.BigIntPolyfill(256),e.WASI_RIGHT_PATH_CREATE_DIRECTORY=r.BigIntPolyfill(512),e.WASI_RIGHT_PATH_CREATE_FILE=r.BigIntPolyfill(1024),e.WASI_RIGHT_PATH_LINK_SOURCE=r.BigIntPolyfill(2048),e.WASI_RIGHT_PATH_LINK_TARGET=r.BigIntPolyfill(4096),e.WASI_RIGHT_PATH_OPEN=r.BigIntPolyfill(8192),e.WASI_RIGHT_FD_READDIR=r.BigIntPolyfill(16384),e.WASI_RIGHT_PATH_READLINK=r.BigIntPolyfill(32768),e.WASI_RIGHT_PATH_RENAME_SOURCE=r.BigIntPolyfill(65536),e.WASI_RIGHT_PATH_RENAME_TARGET=r.BigIntPolyfill(131072),e.WASI_RIGHT_PATH_FILESTAT_GET=r.BigIntPolyfill(262144),e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE=r.BigIntPolyfill(524288),e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES=r.BigIntPolyfill(1048576),e.WASI_RIGHT_FD_FILESTAT_GET=r.BigIntPolyfill(2097152),e.WASI_RIGHT_FD_FILESTAT_SET_SIZE=r.BigIntPolyfill(4194304),e.WASI_RIGHT_FD_FILESTAT_SET_TIMES=r.BigIntPolyfill(8388608),e.WASI_RIGHT_PATH_SYMLINK=r.BigIntPolyfill(16777216),e.WASI_RIGHT_PATH_REMOVE_DIRECTORY=r.BigIntPolyfill(33554432),e.WASI_RIGHT_PATH_UNLINK_FILE=r.BigIntPolyfill(67108864),e.WASI_RIGHT_POLL_FD_READWRITE=r.BigIntPolyfill(134217728),e.WASI_RIGHT_SOCK_SHUTDOWN=r.BigIntPolyfill(268435456),e.RIGHTS_ALL=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_BLOCK_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_BLOCK_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_REGULAR_FILE_BASE=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_REGULAR_FILE_INHERITING=r.BigIntPolyfill(0),e.RIGHTS_DIRECTORY_BASE=e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_DIRECTORY_INHERITING=e.RIGHTS_DIRECTORY_BASE|e.RIGHTS_REGULAR_FILE_BASE,e.RIGHTS_SOCKET_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_SOCKET_INHERITING=e.RIGHTS_ALL,e.RIGHTS_TTY_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_TTY_INHERITING=r.BigIntPolyfill(0),e.WASI_CLOCK_REALTIME=0,e.WASI_CLOCK_MONOTONIC=1,e.WASI_CLOCK_PROCESS_CPUTIME_ID=2,e.WASI_CLOCK_THREAD_CPUTIME_ID=3,e.WASI_EVENTTYPE_CLOCK=0,e.WASI_EVENTTYPE_FD_READ=1,e.WASI_EVENTTYPE_FD_WRITE=2,e.WASI_FILESTAT_SET_ATIM=1,e.WASI_FILESTAT_SET_ATIM_NOW=2,e.WASI_FILESTAT_SET_MTIM=4,e.WASI_FILESTAT_SET_MTIM_NOW=8,e.WASI_O_CREAT=1,e.WASI_O_DIRECTORY=2,e.WASI_O_EXCL=4,e.WASI_O_TRUNC=8,e.WASI_PREOPENTYPE_DIR=0,e.WASI_DIRCOOKIE_START=0,e.WASI_STDIN_FILENO=0,e.WASI_STDOUT_FILENO=1,e.WASI_STDERR_FILENO=2,e.WASI_WHENCE_SET=0,e.WASI_WHENCE_CUR=1,e.WASI_WHENCE_END=2,e.ERROR_MAP={E2BIG:e.WASI_E2BIG,EACCES:e.WASI_EACCES,EADDRINUSE:e.WASI_EADDRINUSE,EADDRNOTAVAIL:e.WASI_EADDRNOTAVAIL,EAFNOSUPPORT:e.WASI_EAFNOSUPPORT,EALREADY:e.WASI_EALREADY,EAGAIN:e.WASI_EAGAIN,EBADF:e.WASI_EBADF,EBADMSG:e.WASI_EBADMSG,EBUSY:e.WASI_EBUSY,ECANCELED:e.WASI_ECANCELED,ECHILD:e.WASI_ECHILD,ECONNABORTED:e.WASI_ECONNABORTED,ECONNREFUSED:e.WASI_ECONNREFUSED,ECONNRESET:e.WASI_ECONNRESET,EDEADLOCK:e.WASI_EDEADLK,EDESTADDRREQ:e.WASI_EDESTADDRREQ,EDOM:e.WASI_EDOM,EDQUOT:e.WASI_EDQUOT,EEXIST:e.WASI_EEXIST,EFAULT:e.WASI_EFAULT,EFBIG:e.WASI_EFBIG,EHOSTDOWN:e.WASI_EHOSTUNREACH,EHOSTUNREACH:e.WASI_EHOSTUNREACH,EIDRM:e.WASI_EIDRM,EILSEQ:e.WASI_EILSEQ,EINPROGRESS:e.WASI_EINPROGRESS,EINTR:e.WASI_EINTR,EINVAL:e.WASI_EINVAL,EIO:e.WASI_EIO,EISCONN:e.WASI_EISCONN,EISDIR:e.WASI_EISDIR,ELOOP:e.WASI_ELOOP,EMFILE:e.WASI_EMFILE,EMLINK:e.WASI_EMLINK,EMSGSIZE:e.WASI_EMSGSIZE,EMULTIHOP:e.WASI_EMULTIHOP,ENAMETOOLONG:e.WASI_ENAMETOOLONG,ENETDOWN:e.WASI_ENETDOWN,ENETRESET:e.WASI_ENETRESET,ENETUNREACH:e.WASI_ENETUNREACH,ENFILE:e.WASI_ENFILE,ENOBUFS:e.WASI_ENOBUFS,ENODEV:e.WASI_ENODEV,ENOENT:e.WASI_ENOENT,ENOEXEC:e.WASI_ENOEXEC,ENOLCK:e.WASI_ENOLCK,ENOLINK:e.WASI_ENOLINK,ENOMEM:e.WASI_ENOMEM,ENOMSG:e.WASI_ENOMSG,ENOPROTOOPT:e.WASI_ENOPROTOOPT,ENOSPC:e.WASI_ENOSPC,ENOSYS:e.WASI_ENOSYS,ENOTCONN:e.WASI_ENOTCONN,ENOTDIR:e.WASI_ENOTDIR,ENOTEMPTY:e.WASI_ENOTEMPTY,ENOTRECOVERABLE:e.WASI_ENOTRECOVERABLE,ENOTSOCK:e.WASI_ENOTSOCK,ENOTTY:e.WASI_ENOTTY,ENXIO:e.WASI_ENXIO,EOVERFLOW:e.WASI_EOVERFLOW,EOWNERDEAD:e.WASI_EOWNERDEAD,EPERM:e.WASI_EPERM,EPIPE:e.WASI_EPIPE,EPROTO:e.WASI_EPROTO,EPROTONOSUPPORT:e.WASI_EPROTONOSUPPORT,EPROTOTYPE:e.WASI_EPROTOTYPE,ERANGE:e.WASI_ERANGE,EROFS:e.WASI_EROFS,ESPIPE:e.WASI_ESPIPE,ESRCH:e.WASI_ESRCH,ESTALE:e.WASI_ESTALE,ETIMEDOUT:e.WASI_ETIMEDOUT,ETXTBSY:e.WASI_ETXTBSY,EXDEV:e.WASI_EXDEV},e.SIGNAL_MAP={[e.WASI_SIGHUP]:"SIGHUP",[e.WASI_SIGINT]:"SIGINT",[e.WASI_SIGQUIT]:"SIGQUIT",[e.WASI_SIGILL]:"SIGILL",[e.WASI_SIGTRAP]:"SIGTRAP",[e.WASI_SIGABRT]:"SIGABRT",[e.WASI_SIGBUS]:"SIGBUS",[e.WASI_SIGFPE]:"SIGFPE",[e.WASI_SIGKILL]:"SIGKILL",[e.WASI_SIGUSR1]:"SIGUSR1",[e.WASI_SIGSEGV]:"SIGSEGV",[e.WASI_SIGUSR2]:"SIGUSR2",[e.WASI_SIGPIPE]:"SIGPIPE",[e.WASI_SIGALRM]:"SIGALRM",[e.WASI_SIGTERM]:"SIGTERM",[e.WASI_SIGCHLD]:"SIGCHLD",[e.WASI_SIGCONT]:"SIGCONT",[e.WASI_SIGSTOP]:"SIGSTOP",[e.WASI_SIGTSTP]:"SIGTSTP",[e.WASI_SIGTTIN]:"SIGTTIN",[e.WASI_SIGTTOU]:"SIGTTOU",[e.WASI_SIGURG]:"SIGURG",[e.WASI_SIGXCPU]:"SIGXCPU",[e.WASI_SIGXFSZ]:"SIGXFSZ",[e.WASI_SIGVTALRM]:"SIGVTALRM"}},2946:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(9642),n=i(5961),s=i(1744);let o;const a=i(2055),c=a.WASI_RIGHT_FD_DATASYNC|a.WASI_RIGHT_FD_READ|a.WASI_RIGHT_FD_SYNC|a.WASI_RIGHT_FD_ADVISE|a.WASI_RIGHT_FD_FILESTAT_GET|a.WASI_RIGHT_POLL_FD_READWRITE,h=a.WASI_RIGHT_FD_DATASYNC|a.WASI_RIGHT_FD_WRITE|a.WASI_RIGHT_FD_SYNC|a.WASI_RIGHT_FD_ADVISE|a.WASI_RIGHT_FD_FILESTAT_GET|a.WASI_RIGHT_POLL_FD_READWRITE,l=h,u=t=>{const e=Math.trunc(t),i=r.BigIntPolyfill(Math.round(1e6*(t-e)));return r.BigIntPolyfill(e)*r.BigIntPolyfill(1e6)+i},f=t=>{"number"==typeof t&&(t=Math.trunc(t));const e=r.BigIntPolyfill(t);return Number(e/r.BigIntPolyfill(1e6))},_=t=>(...e)=>{try{return t(...e)}catch(t){if(t&&t.code&&"string"==typeof t.code)return a.ERROR_MAP[t.code]||a.WASI_EINVAL;if(t instanceof p)return t.errno;throw t}},d=(t,e)=>{const i=t.FD_MAP.get(e);if(!i)throw new p(a.WASI_EBADF);if(void 0===i.filetype){const r=t.bindings.fs.fstatSync(i.real),{filetype:n,rightsBase:s,rightsInheriting:o}=S(t,e,r);i.filetype=n,i.rights||(i.rights={base:s,inheriting:o})}return i},S=(t,e,i)=>{switch(!0){case i.isBlockDevice():return{filetype:a.WASI_FILETYPE_BLOCK_DEVICE,rightsBase:a.RIGHTS_BLOCK_DEVICE_BASE,rightsInheriting:a.RIGHTS_BLOCK_DEVICE_INHERITING};case i.isCharacterDevice():{const i=a.WASI_FILETYPE_CHARACTER_DEVICE;return void 0!==e&&t.bindings.isTTY(e)?{filetype:i,rightsBase:a.RIGHTS_TTY_BASE,rightsInheriting:a.RIGHTS_TTY_INHERITING}:{filetype:i,rightsBase:a.RIGHTS_CHARACTER_DEVICE_BASE,rightsInheriting:a.RIGHTS_CHARACTER_DEVICE_INHERITING}}case i.isDirectory():return{filetype:a.WASI_FILETYPE_DIRECTORY,rightsBase:a.RIGHTS_DIRECTORY_BASE,rightsInheriting:a.RIGHTS_DIRECTORY_INHERITING};case i.isFIFO():return{filetype:a.WASI_FILETYPE_SOCKET_STREAM,rightsBase:a.RIGHTS_SOCKET_BASE,rightsInheriting:a.RIGHTS_SOCKET_INHERITING};case i.isFile():return{filetype:a.WASI_FILETYPE_REGULAR_FILE,rightsBase:a.RIGHTS_REGULAR_FILE_BASE,rightsInheriting:a.RIGHTS_REGULAR_FILE_INHERITING};case i.isSocket():return{filetype:a.WASI_FILETYPE_SOCKET_STREAM,rightsBase:a.RIGHTS_SOCKET_BASE,rightsInheriting:a.RIGHTS_SOCKET_INHERITING};case i.isSymbolicLink():return{filetype:a.WASI_FILETYPE_SYMBOLIC_LINK,rightsBase:r.BigIntPolyfill(0),rightsInheriting:r.BigIntPolyfill(0)};default:return{filetype:a.WASI_FILETYPE_UNKNOWN,rightsBase:r.BigIntPolyfill(0),rightsInheriting:r.BigIntPolyfill(0)}}};class p extends Error{constructor(t){super(),this.errno=t,Object.setPrototypeOf(this,p.prototype)}}e.WASIError=p;class I extends Error{constructor(t){super(`WASI Exit error: ${t}`),this.code=t,Object.setPrototypeOf(this,I.prototype)}}e.WASIExitError=I;class E extends Error{constructor(t){super(`WASI Kill signal: ${t}`),this.signal=t,Object.setPrototypeOf(this,E.prototype)}}e.WASIKillError=E;class A{constructor(t){let e={};t&&t.preopens?e=t.preopens:t&&t.preopenDirectories&&(e=t.preopenDirectories);let i={};t&&t.env&&(i=t.env);let n=[];t&&t.args&&(n=t.args);let I=o;t&&t.bindings&&(I=t.bindings),this.memory=void 0,this.view=void 0,this.bindings=I,this.FD_MAP=new Map([[a.WASI_STDIN_FILENO,{real:0,filetype:a.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:c,inheriting:r.BigIntPolyfill(0)},path:void 0}],[a.WASI_STDOUT_FILENO,{real:1,filetype:a.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:h,inheriting:r.BigIntPolyfill(0)},path:void 0}],[a.WASI_STDERR_FILENO,{real:2,filetype:a.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:l,inheriting:r.BigIntPolyfill(0)},path:void 0}]]);let E=this.bindings.fs,A=this.bindings.path;for(const[t,i]of Object.entries(e)){const e=E.openSync(i,E.constants.O_RDONLY),r=[...this.FD_MAP.keys()].reverse()[0]+1;this.FD_MAP.set(r,{real:e,filetype:a.WASI_FILETYPE_DIRECTORY,rights:{base:a.RIGHTS_DIRECTORY_BASE,inheriting:a.RIGHTS_DIRECTORY_INHERITING},fakePath:t,path:i})}const y=(t,e)=>(this.refreshMemory(),Array.from({length:e},((e,i)=>{const r=t+8*i,n=this.view.getUint32(r,!0),s=this.view.getUint32(r+4,!0);return new Uint8Array(this.memory.buffer,n,s)}))),g=(t,e)=>{const i=d(this,t);if(e!==r.BigIntPolyfill(0)&&(i.rights.base&e)===r.BigIntPolyfill(0))throw new p(a.WASI_EPERM);return i},T=I.hrtime(),m=t=>{switch(t){case a.WASI_CLOCK_MONOTONIC:return I.hrtime();case a.WASI_CLOCK_REALTIME:return u(Date.now());case a.WASI_CLOCK_PROCESS_CPUTIME_ID:case a.WASI_CLOCK_THREAD_CPUTIME_ID:return I.hrtime()-T;default:return null}};this.wasiImport={args_get:(t,e)=>{this.refreshMemory();let i=t,r=e;return n.forEach((t=>{this.view.setUint32(i,r,!0),i+=4,r+=s.default.from(this.memory.buffer).write(`${t}\0`,r)})),a.WASI_ESUCCESS},args_sizes_get:(t,e)=>{this.refreshMemory(),this.view.setUint32(t,n.length,!0);const i=n.reduce(((t,e)=>t+s.default.byteLength(e)+1),0);return this.view.setUint32(e,i,!0),a.WASI_ESUCCESS},environ_get:(t,e)=>{this.refreshMemory();let r=t,n=e;return Object.entries(i).forEach((([t,e])=>{this.view.setUint32(r,n,!0),r+=4,n+=s.default.from(this.memory.buffer).write(`${t}=${e}\0`,n)})),a.WASI_ESUCCESS},environ_sizes_get:(t,e)=>{this.refreshMemory();const r=Object.entries(i).map((([t,e])=>`${t}=${e}\0`)),n=r.reduce(((t,e)=>t+s.default.byteLength(e)),0);return this.view.setUint32(t,r.length,!0),this.view.setUint32(e,n,!0),a.WASI_ESUCCESS},clock_res_get:(t,e)=>{let i;switch(t){case a.WASI_CLOCK_MONOTONIC:case a.WASI_CLOCK_PROCESS_CPUTIME_ID:case a.WASI_CLOCK_THREAD_CPUTIME_ID:i=r.BigIntPolyfill(1);break;case a.WASI_CLOCK_REALTIME:i=r.BigIntPolyfill(1e3)}return this.view.setBigUint64(e,i),a.WASI_ESUCCESS},clock_time_get:(t,e,i)=>{this.refreshMemory();const n=m(t);return null===n?a.WASI_EINVAL:(this.view.setBigUint64(i,r.BigIntPolyfill(n),!0),a.WASI_ESUCCESS)},fd_advise:_(((t,e,i,r)=>(g(t,a.WASI_RIGHT_FD_ADVISE),a.WASI_ENOSYS))),fd_allocate:_(((t,e,i)=>(g(t,a.WASI_RIGHT_FD_ALLOCATE),a.WASI_ENOSYS))),fd_close:_((t=>{const e=g(t,r.BigIntPolyfill(0));return E.closeSync(e.real),this.FD_MAP.delete(t),a.WASI_ESUCCESS})),fd_datasync:_((t=>{const e=g(t,a.WASI_RIGHT_FD_DATASYNC);return E.fdatasyncSync(e.real),a.WASI_ESUCCESS})),fd_fdstat_get:_(((t,e)=>{const i=g(t,r.BigIntPolyfill(0));return this.refreshMemory(),this.view.setUint8(e,i.filetype),this.view.setUint16(e+2,0,!0),this.view.setUint16(e+4,0,!0),this.view.setBigUint64(e+8,r.BigIntPolyfill(i.rights.base),!0),this.view.setBigUint64(e+8+8,r.BigIntPolyfill(i.rights.inheriting),!0),a.WASI_ESUCCESS})),fd_fdstat_set_flags:_(((t,e)=>(g(t,a.WASI_RIGHT_FD_FDSTAT_SET_FLAGS),a.WASI_ENOSYS))),fd_fdstat_set_rights:_(((t,e,i)=>{const n=g(t,r.BigIntPolyfill(0));return(n.rights.base|e)>n.rights.base||(n.rights.inheriting|i)>n.rights.inheriting?a.WASI_EPERM:(n.rights.base=e,n.rights.inheriting=i,a.WASI_ESUCCESS)})),fd_filestat_get:_(((t,e)=>{const i=g(t,a.WASI_RIGHT_FD_FILESTAT_GET),n=E.fstatSync(i.real);return this.refreshMemory(),this.view.setBigUint64(e,r.BigIntPolyfill(n.dev),!0),e+=8,this.view.setBigUint64(e,r.BigIntPolyfill(n.ino),!0),e+=8,this.view.setUint8(e,i.filetype),e+=8,this.view.setBigUint64(e,r.BigIntPolyfill(n.nlink),!0),e+=8,this.view.setBigUint64(e,r.BigIntPolyfill(n.size),!0),e+=8,this.view.setBigUint64(e,u(n.atimeMs),!0),e+=8,this.view.setBigUint64(e,u(n.mtimeMs),!0),e+=8,this.view.setBigUint64(e,u(n.ctimeMs),!0),a.WASI_ESUCCESS})),fd_filestat_set_size:_(((t,e)=>{const i=g(t,a.WASI_RIGHT_FD_FILESTAT_SET_SIZE);return E.ftruncateSync(i.real,Number(e)),a.WASI_ESUCCESS})),fd_filestat_set_times:_(((t,e,i,r)=>{const n=g(t,a.WASI_RIGHT_FD_FILESTAT_SET_TIMES),s=E.fstatSync(n.real);let o=s.atime,c=s.mtime;const h=f(m(a.WASI_CLOCK_REALTIME)),l=a.WASI_FILESTAT_SET_ATIM|a.WASI_FILESTAT_SET_ATIM_NOW;if((r&l)===l)return a.WASI_EINVAL;const u=a.WASI_FILESTAT_SET_MTIM|a.WASI_FILESTAT_SET_MTIM_NOW;return(r&u)===u?a.WASI_EINVAL:((r&a.WASI_FILESTAT_SET_ATIM)===a.WASI_FILESTAT_SET_ATIM?o=f(e):(r&a.WASI_FILESTAT_SET_ATIM_NOW)===a.WASI_FILESTAT_SET_ATIM_NOW&&(o=h),(r&a.WASI_FILESTAT_SET_MTIM)===a.WASI_FILESTAT_SET_MTIM?c=f(i):(r&a.WASI_FILESTAT_SET_MTIM_NOW)===a.WASI_FILESTAT_SET_MTIM_NOW&&(c=h),E.futimesSync(n.real,new Date(o),new Date(c)),a.WASI_ESUCCESS)})),fd_prestat_get:_(((t,e)=>{const i=g(t,r.BigIntPolyfill(0));return i.path?(this.refreshMemory(),this.view.setUint8(e,a.WASI_PREOPENTYPE_DIR),this.view.setUint32(e+4,s.default.byteLength(i.fakePath),!0),a.WASI_ESUCCESS):a.WASI_EINVAL})),fd_prestat_dir_name:_(((t,e,i)=>{const n=g(t,r.BigIntPolyfill(0));return n.path?(this.refreshMemory(),s.default.from(this.memory.buffer).write(n.fakePath,e,i,"utf8"),a.WASI_ESUCCESS):a.WASI_EINVAL})),fd_pwrite:_(((t,e,i,r,n)=>{const s=g(t,a.WASI_RIGHT_FD_WRITE|a.WASI_RIGHT_FD_SEEK);let o=0;return y(e,i).forEach((t=>{let e=0;for(;e<t.byteLength;)e+=E.writeSync(s.real,t,e,t.byteLength-e,Number(r)+o+e);o+=e})),this.view.setUint32(n,o,!0),a.WASI_ESUCCESS})),fd_write:_(((t,e,i,n)=>{const s=g(t,a.WASI_RIGHT_FD_WRITE);let o=0;return y(e,i).forEach((t=>{let e=0;for(;e<t.byteLength;){const i=E.writeSync(s.real,t,e,t.byteLength-e,s.offset?Number(s.offset):null);s.offset&&(s.offset+=r.BigIntPolyfill(i)),e+=i}o+=e})),this.view.setUint32(n,o,!0),a.WASI_ESUCCESS})),fd_pread:_(((t,e,i,r,n)=>{const s=g(t,a.WASI_RIGHT_FD_READ|a.WASI_RIGHT_FD_SEEK);let o=0;t:for(const t of y(e,i)){let e=0;for(;e<t.byteLength;){const i=t.byteLength-e,n=E.readSync(s.real,t,e,t.byteLength-e,Number(r)+o+e);if(e+=n,o+=n,0===n||n<i)break t}o+=e}return this.view.setUint32(n,o,!0),a.WASI_ESUCCESS})),fd_read:_(((t,e,i,n)=>{const s=g(t,a.WASI_RIGHT_FD_READ),o=0===s.real;let c=0;t:for(const t of y(e,i)){let e=0;for(;e<t.byteLength;){let i=t.byteLength-e,n=o||void 0===s.offset?null:Number(s.offset),a=E.readSync(s.real,t,e,i,n);if(o||(s.offset=(s.offset?s.offset:r.BigIntPolyfill(0))+r.BigIntPolyfill(a)),e+=a,c+=a,0===a||a<i)break t}}return this.view.setUint32(n,c,!0),a.WASI_ESUCCESS})),fd_readdir:_(((t,e,i,n,o)=>{const c=g(t,a.WASI_RIGHT_FD_READDIR);this.refreshMemory();const h=E.readdirSync(c.path,{withFileTypes:!0}),l=e;for(let t=Number(n);t<h.length;t+=1){const n=h[t];let o=s.default.byteLength(n.name);if(e-l>i)break;if(this.view.setBigUint64(e,r.BigIntPolyfill(t+1),!0),(e+=8)-l>i)break;const u=E.statSync(A.resolve(c.path,n.name));if(this.view.setBigUint64(e,r.BigIntPolyfill(u.ino),!0),(e+=8)-l>i)break;if(this.view.setUint32(e,o,!0),(e+=4)-l>i)break;let f;switch(!0){case u.isBlockDevice():f=a.WASI_FILETYPE_BLOCK_DEVICE;break;case u.isCharacterDevice():f=a.WASI_FILETYPE_CHARACTER_DEVICE;break;case u.isDirectory():f=a.WASI_FILETYPE_DIRECTORY;break;case u.isFIFO():f=a.WASI_FILETYPE_SOCKET_STREAM;break;case u.isFile():f=a.WASI_FILETYPE_REGULAR_FILE;break;case u.isSocket():f=a.WASI_FILETYPE_SOCKET_STREAM;break;case u.isSymbolicLink():f=a.WASI_FILETYPE_SYMBOLIC_LINK;break;default:f=a.WASI_FILETYPE_UNKNOWN}if(this.view.setUint8(e,f),e+=1,(e+=3)+o>=l+i)break;s.default.from(this.memory.buffer).write(n.name,e),e+=o}const u=e-l;return this.view.setUint32(o,Math.min(u,i),!0),a.WASI_ESUCCESS})),fd_renumber:_(((t,e)=>(g(t,r.BigIntPolyfill(0)),g(e,r.BigIntPolyfill(0)),E.closeSync(this.FD_MAP.get(t).real),this.FD_MAP.set(t,this.FD_MAP.get(e)),this.FD_MAP.delete(e),a.WASI_ESUCCESS))),fd_seek:_(((t,e,i,n)=>{const s=g(t,a.WASI_RIGHT_FD_SEEK);switch(this.refreshMemory(),i){case a.WASI_WHENCE_CUR:s.offset=(s.offset?s.offset:r.BigIntPolyfill(0))+r.BigIntPolyfill(e);break;case a.WASI_WHENCE_END:const{size:t}=E.fstatSync(s.real);s.offset=r.BigIntPolyfill(t)+r.BigIntPolyfill(e);break;case a.WASI_WHENCE_SET:s.offset=r.BigIntPolyfill(e)}return this.view.setBigUint64(n,s.offset,!0),a.WASI_ESUCCESS})),fd_tell:_(((t,e)=>{const i=g(t,a.WASI_RIGHT_FD_TELL);return this.refreshMemory(),i.offset||(i.offset=r.BigIntPolyfill(0)),this.view.setBigUint64(e,i.offset,!0),a.WASI_ESUCCESS})),fd_sync:_((t=>{const e=g(t,a.WASI_RIGHT_FD_SYNC);return E.fsyncSync(e.real),a.WASI_ESUCCESS})),path_create_directory:_(((t,e,i)=>{const r=g(t,a.WASI_RIGHT_PATH_CREATE_DIRECTORY);if(!r.path)return a.WASI_EINVAL;this.refreshMemory();const n=s.default.from(this.memory.buffer,e,i).toString();return E.mkdirSync(A.resolve(r.path,n)),a.WASI_ESUCCESS})),path_filestat_get:_(((t,e,i,n,o)=>{const c=g(t,a.WASI_RIGHT_PATH_FILESTAT_GET);if(!c.path)return a.WASI_EINVAL;this.refreshMemory();const h=s.default.from(this.memory.buffer,i,n).toString(),l=E.statSync(A.resolve(c.path,h));return this.view.setBigUint64(o,r.BigIntPolyfill(l.dev),!0),o+=8,this.view.setBigUint64(o,r.BigIntPolyfill(l.ino),!0),o+=8,this.view.setUint8(o,S(this,void 0,l).filetype),o+=8,this.view.setBigUint64(o,r.BigIntPolyfill(l.nlink),!0),o+=8,this.view.setBigUint64(o,r.BigIntPolyfill(l.size),!0),o+=8,this.view.setBigUint64(o,u(l.atimeMs),!0),o+=8,this.view.setBigUint64(o,u(l.mtimeMs),!0),o+=8,this.view.setBigUint64(o,u(l.ctimeMs),!0),a.WASI_ESUCCESS})),path_filestat_set_times:_(((t,e,i,r,n,o,c)=>{const h=g(t,a.WASI_RIGHT_PATH_FILESTAT_SET_TIMES);if(!h.path)return a.WASI_EINVAL;this.refreshMemory();const l=E.fstatSync(h.real);let u=l.atime,_=l.mtime;const d=f(m(a.WASI_CLOCK_REALTIME)),S=a.WASI_FILESTAT_SET_ATIM|a.WASI_FILESTAT_SET_ATIM_NOW;if((c&S)===S)return a.WASI_EINVAL;const p=a.WASI_FILESTAT_SET_MTIM|a.WASI_FILESTAT_SET_MTIM_NOW;if((c&p)===p)return a.WASI_EINVAL;(c&a.WASI_FILESTAT_SET_ATIM)===a.WASI_FILESTAT_SET_ATIM?u=f(n):(c&a.WASI_FILESTAT_SET_ATIM_NOW)===a.WASI_FILESTAT_SET_ATIM_NOW&&(u=d),(c&a.WASI_FILESTAT_SET_MTIM)===a.WASI_FILESTAT_SET_MTIM?_=f(o):(c&a.WASI_FILESTAT_SET_MTIM_NOW)===a.WASI_FILESTAT_SET_MTIM_NOW&&(_=d);const I=s.default.from(this.memory.buffer,i,r).toString();return E.utimesSync(A.resolve(h.path,I),new Date(u),new Date(_)),a.WASI_ESUCCESS})),path_link:_(((t,e,i,r,n,o,c)=>{const h=g(t,a.WASI_RIGHT_PATH_LINK_SOURCE),l=g(n,a.WASI_RIGHT_PATH_LINK_TARGET);if(!h.path||!l.path)return a.WASI_EINVAL;this.refreshMemory();const u=s.default.from(this.memory.buffer,i,r).toString(),f=s.default.from(this.memory.buffer,o,c).toString();return E.linkSync(A.resolve(h.path,u),A.resolve(l.path,f)),a.WASI_ESUCCESS})),path_open:_(((t,e,i,n,o,c,h,l,u)=>{const f=g(t,a.WASI_RIGHT_PATH_OPEN);c=r.BigIntPolyfill(c),h=r.BigIntPolyfill(h);const _=(c&(a.WASI_RIGHT_FD_READ|a.WASI_RIGHT_FD_READDIR))!==r.BigIntPolyfill(0),S=(c&(a.WASI_RIGHT_FD_DATASYNC|a.WASI_RIGHT_FD_WRITE|a.WASI_RIGHT_FD_ALLOCATE|a.WASI_RIGHT_FD_FILESTAT_SET_SIZE))!==r.BigIntPolyfill(0);let p;S&&_?p=E.constants.O_RDWR:_?p=E.constants.O_RDONLY:S&&(p=E.constants.O_WRONLY);let I=c|a.WASI_RIGHT_PATH_OPEN,y=c|h;0!=(o&a.WASI_O_CREAT)&&(p|=E.constants.O_CREAT,I|=a.WASI_RIGHT_PATH_CREATE_FILE),0!=(o&a.WASI_O_DIRECTORY)&&(p|=E.constants.O_DIRECTORY),0!=(o&a.WASI_O_EXCL)&&(p|=E.constants.O_EXCL),0!=(o&a.WASI_O_TRUNC)&&(p|=E.constants.O_TRUNC,I|=a.WASI_RIGHT_PATH_FILESTAT_SET_SIZE),0!=(l&a.WASI_FDFLAG_APPEND)&&(p|=E.constants.O_APPEND),0!=(l&a.WASI_FDFLAG_DSYNC)&&(E.constants.O_DSYNC?p|=E.constants.O_DSYNC:p|=E.constants.O_SYNC,y|=a.WASI_RIGHT_FD_DATASYNC),0!=(l&a.WASI_FDFLAG_NONBLOCK)&&(p|=E.constants.O_NONBLOCK),0!=(l&a.WASI_FDFLAG_RSYNC)&&(E.constants.O_RSYNC?p|=E.constants.O_RSYNC:p|=E.constants.O_SYNC,y|=a.WASI_RIGHT_FD_SYNC),0!=(l&a.WASI_FDFLAG_SYNC)&&(p|=E.constants.O_SYNC,y|=a.WASI_RIGHT_FD_SYNC),S&&0==(p&(E.constants.O_APPEND|E.constants.O_TRUNC))&&(y|=a.WASI_RIGHT_FD_SEEK),this.refreshMemory();const T=s.default.from(this.memory.buffer,i,n).toString(),m=A.resolve(f.path,T);if(A.relative(f.path,m).startsWith(".."))return a.WASI_ENOTCAPABLE;let v,R,w;try{if(v=E.realpathSync(m),A.relative(f.path,v).startsWith(".."))return a.WASI_ENOTCAPABLE}catch(t){if("ENOENT"!==t.code)throw t;v=m}try{R=E.statSync(v).isDirectory()}catch(t){}w=!S&&R?E.openSync(v,E.constants.O_RDONLY):E.openSync(v,p);const O=[...this.FD_MAP.keys()].reverse()[0]+1;return this.FD_MAP.set(O,{real:w,filetype:void 0,rights:{base:I,inheriting:y},path:v}),d(this,O),this.view.setUint32(u,O,!0),a.WASI_ESUCCESS})),path_readlink:_(((t,e,i,r,n,o)=>{const c=g(t,a.WASI_RIGHT_PATH_READLINK);if(!c.path)return a.WASI_EINVAL;this.refreshMemory();const h=s.default.from(this.memory.buffer,e,i).toString(),l=A.resolve(c.path,h),u=E.readlinkSync(l),f=s.default.from(this.memory.buffer).write(u,r,n);return this.view.setUint32(o,f,!0),a.WASI_ESUCCESS})),path_remove_directory:_(((t,e,i)=>{const r=g(t,a.WASI_RIGHT_PATH_REMOVE_DIRECTORY);if(!r.path)return a.WASI_EINVAL;this.refreshMemory();const n=s.default.from(this.memory.buffer,e,i).toString();return E.rmdirSync(A.resolve(r.path,n)),a.WASI_ESUCCESS})),path_rename:_(((t,e,i,r,n,o)=>{const c=g(t,a.WASI_RIGHT_PATH_RENAME_SOURCE),h=g(r,a.WASI_RIGHT_PATH_RENAME_TARGET);if(!c.path||!h.path)return a.WASI_EINVAL;this.refreshMemory();const l=s.default.from(this.memory.buffer,e,i).toString(),u=s.default.from(this.memory.buffer,n,o).toString();return E.renameSync(A.resolve(c.path,l),A.resolve(h.path,u)),a.WASI_ESUCCESS})),path_symlink:_(((t,e,i,r,n)=>{const o=g(i,a.WASI_RIGHT_PATH_SYMLINK);if(!o.path)return a.WASI_EINVAL;this.refreshMemory();const c=s.default.from(this.memory.buffer,t,e).toString(),h=s.default.from(this.memory.buffer,r,n).toString();return E.symlinkSync(c,A.resolve(o.path,h)),a.WASI_ESUCCESS})),path_unlink_file:_(((t,e,i)=>{const r=g(t,a.WASI_RIGHT_PATH_UNLINK_FILE);if(!r.path)return a.WASI_EINVAL;this.refreshMemory();const n=s.default.from(this.memory.buffer,e,i).toString();return E.unlinkSync(A.resolve(r.path,n)),a.WASI_ESUCCESS})),poll_oneoff:(t,e,i,n)=>{let s=0,o=0;this.refreshMemory();for(let n=0;n<i;n+=1){const i=this.view.getBigUint64(t,!0);t+=8;const n=this.view.getUint8(t);switch(t+=1,n){case a.WASI_EVENTTYPE_CLOCK:{t+=7,this.view.getBigUint64(t,!0),t+=8;const n=this.view.getUint32(t,!0);t+=4,t+=4;const c=this.view.getBigUint64(t,!0);t+=8,this.view.getBigUint64(t,!0),t+=8;const h=this.view.getUint16(t,!0);t+=2,t+=6;const l=1===h;let u=a.WASI_ESUCCESS;const f=r.BigIntPolyfill(m(n));if(null===f)u=a.WASI_EINVAL;else{const t=l?c:f+c;o=t>o?t:o}this.view.setBigUint64(e,i,!0),e+=8,this.view.setUint16(e,u,!0),e+=2,this.view.setUint8(e,a.WASI_EVENTTYPE_CLOCK),e+=1,e+=5,s+=1;break}case a.WASI_EVENTTYPE_FD_READ:case a.WASI_EVENTTYPE_FD_WRITE:t+=3,this.view.getUint32(t,!0),t+=4,this.view.setBigUint64(e,i,!0),e+=8,this.view.setUint16(e,a.WASI_ENOSYS,!0),e+=2,this.view.setUint8(e,n),e+=1,e+=5,s+=1;break;default:return a.WASI_EINVAL}}for(this.view.setUint32(n,s,!0);I.hrtime()<o;);return a.WASI_ESUCCESS},proc_exit:t=>(I.exit(t),a.WASI_ESUCCESS),proc_raise:t=>t in a.SIGNAL_MAP?(I.kill(a.SIGNAL_MAP[t]),a.WASI_ESUCCESS):a.WASI_EINVAL,random_get:(t,e)=>(this.refreshMemory(),I.randomFillSync(new Uint8Array(this.memory.buffer),t,e),a.WASI_ESUCCESS),sched_yield:()=>a.WASI_ESUCCESS,sock_recv:()=>a.WASI_ENOSYS,sock_send:()=>a.WASI_ENOSYS,sock_shutdown:()=>a.WASI_ENOSYS},t.traceSyscalls&&Object.keys(this.wasiImport).forEach((t=>{const e=this.wasiImport[t];this.wasiImport[t]=function(...i){console.log(`WASI: wasiImport called: ${t} (${i})`);try{let t=e(...i);return console.log(`WASI:  => ${t}`),t}catch(t){throw console.log(`Catched error: ${t}`),t}}}))}refreshMemory(){this.view&&0!==this.view.buffer.byteLength||(this.view=new n.DataViewPolyfill(this.memory.buffer))}setMemory(t){this.memory=t}start(t){const e=t.exports;if(null===e||"object"!=typeof e)throw new Error(`instance.exports must be an Object. Received ${e}.`);const{memory:i}=e;if(!(i instanceof WebAssembly.Memory))throw new Error(`instance.exports.memory must be a WebAssembly.Memory. Recceived ${i}.`);this.setMemory(i),e._start&&e._start()}getImportNamespace(t){let e=null;for(let i of WebAssembly.Module.imports(t))if("function"===i.kind&&i.module.startsWith("wasi_"))if(e){if(e!==i.module)throw new Error("Multiple namespaces detected.")}else e=i.module;return e}getImports(t){switch(this.getImportNamespace(t)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw new Error("Can't detect a WASI namespace for the WebAssembly Module")}}}e.default=A,A.defaultBindings=o,e.WASI=A},9642:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:{};e.BigIntPolyfill="undefined"!=typeof BigInt?BigInt:i.BigInt||Number},3986:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=Math.floor(.001*(Date.now()-performance.now()));e.default=function(t){let e=.001*performance.now(),r=Math.floor(e)+i,n=Math.floor(e%1*1e9);return t&&(r-=t[0],n-=t[1],n<0&&(r--,n+=1e9)),[r,n]}},1744:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=Buffer;e.default=i},5961:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=i(9642);let n=DataView;n.prototype.setBigUint64||(n.prototype.setBigUint64=function(t,e,i){let r,n;if(e<2**32)r=Number(e),n=0;else{for(var s=e.toString(2),o="",a=0;a<64-s.length;a++)o+="0";o+=s,n=parseInt(o.substring(0,32),2),r=parseInt(o.substring(32),2)}this.setUint32(t+(i?0:4),r,i),this.setUint32(t+(i?4:0),n,i)},n.prototype.getBigUint64=function(t,e){let i=this.getUint32(t+(e?0:4),e),n=this.getUint32(t+(e?4:0),e);for(var s=i.toString(2),o=n.toString(2),a="",c=0;c<32-s.length;c++)a+="0";return a+=s,r.BigIntPolyfill("0b"+o+a)}),e.DataViewPolyfill=n},998:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t=>e=>{const i=t(e);return 1e9*i[0]+i[1]}},4189:(t,e,i)=>{"use strict";const r=i(6551),n=i(6898),s=i(5622);i(8022);const o=(t,e)=>{if(!t)throw new Error(e)};e.Yn=class{constructor(){this.volume=new n.Volume,this.fs=r.createFsFromVolume(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}_toJSON(t,e={},i){let r=!0;for(const n in t.children){r=!1;const o=t.getChild(n);if(o){const t=o.getNode();if(t&&t.isFile()){let r=o.getPath();i&&(r=s.relative(i,r)),e[r]=t.getBuffer()}else t&&t.isDirectory()&&this._toJSON(o,e,i)}}let n=t.getPath();return i&&(n=s.relative(i,n)),n&&r&&(e[n]=null),e}toJSON(t,e={},i=!1){const r=[];if(t){t instanceof Array||(t=[t]);for(const e of t){const t=n.pathToFilename(e),i=this.volume.getResolvedLink(t);i&&r.push(i)}}else r.push(this.volume.root);if(!r.length)return e;for(const t of r)this._toJSON(t,e,i?t.getPath():"");return e}fromJSONFixed(t,e){for(let i in e){const r=e[i];if(r?null===Object.getPrototypeOf(r):null===r)t.mkdirpBase(i,511);else{const e=n.filenameToSteps(i);if(e.length>1){const i="/"+e.slice(0,e.length-1).join("/");t.mkdirpBase(i,511)}t.writeFileSync(i,r||"")}}}fromJSON(t){this.volume=new n.Volume,this.fromJSONFixed(this.volume,t),this.fs=r.createFsFromVolume(this.volume),this.volume.releasedFds=[0,1,2];const e=this.volume.openSync("/dev/stderr","w"),i=this.volume.openSync("/dev/stdout","w"),s=this.volume.openSync("/dev/stdin","r");o(2===e,`invalid handle for stderr: ${e}`),o(1===i,`invalid handle for stdout: ${i}`),o(0===s,`invalid handle for stdin: ${s}`)}async getStdOut(){return new Promise((t=>{t(this.fs.readFileSync("/dev/stdout","utf8"))}))}}},8022:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(1172).Node.prototype.emit=function(t,...e){const i=this.listeners(t);for(let t of i)try{t(...e)}catch(t){console.error(t)}return i.length>0}},3818:(t,e)=>{"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="undefined"!=typeof window&&void 0!==window.document,n="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,s="object"===("undefined"==typeof self?"undefined":i(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name;"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),"undefined"!=typeof Deno&&Deno.core;e.jU=r,e.n2=s,e.UG=n},2630:(t,e)=>{var i=Array.prototype.slice;e.l=function t(e,r){for(var n in r)e[n]=r[n];return arguments.length<3?e:t.apply(null,[e].concat(i.call(arguments,2)))}},4290:(t,e)=>{"use strict";e.Z4=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i?(t=n(t,e)).replace(/^([a-zA-Z]+:|\.\/)/,""):t};var i="win32"===process.platform;function r(t,e){var r=t[e];return e>0&&("/"===r||i&&"\\"===r)}function n(t,e){if("string"!=typeof t)throw new TypeError("expected a string");return t=t.replace(/[\\\/]+/g,"/"),!1!==e&&(t=function(t){var e=t.length-1;if(e<2)return t;for(;r(t,e);)e--;return t.substr(0,e+1)}(t)),t}},5659:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"],e.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","createReadStream","createWriteStream"],e.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","watchFile","unwatchFile","watch"]},832:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5561),n=i(9568),s=r.constants.S_IFMT,o=r.constants.S_IFDIR,a=r.constants.S_IFREG,c=r.constants.S_IFBLK,h=r.constants.S_IFCHR,l=r.constants.S_IFLNK,u=r.constants.S_IFIFO,f=r.constants.S_IFSOCK,_=function(){function t(){this.name="",this.mode=0}return t.build=function(e,i){var r=new t,s=e.getNode().mode;return r.name=n.strToEncoding(e.getName(),i),r.mode=s,r},t.prototype._checkModeProperty=function(t){return(this.mode&s)===t},t.prototype.isDirectory=function(){return this._checkModeProperty(o)},t.prototype.isFile=function(){return this._checkModeProperty(a)},t.prototype.isBlockDevice=function(){return this._checkModeProperty(c)},t.prototype.isCharacterDevice=function(){return this._checkModeProperty(h)},t.prototype.isSymbolicLink=function(){return this._checkModeProperty(l)},t.prototype.isFIFO=function(){return this._checkModeProperty(u)},t.prototype.isSocket=function(){return this._checkModeProperty(f)},t}();e.Dirent=_,e.default=_},1507:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(5561),n=i(3103),s=r.constants.S_IFMT,o=r.constants.S_IFDIR,a=r.constants.S_IFREG,c=r.constants.S_IFBLK,h=r.constants.S_IFCHR,l=r.constants.S_IFLNK,u=r.constants.S_IFIFO,f=r.constants.S_IFSOCK,_=function(){function t(){}return t.build=function(e,i){void 0===i&&(i=!1);var r=new t,s=e.uid,o=e.gid,a=e.atime,c=e.mtime,h=e.ctime,l=i?n.default:function(t){return t};r.uid=l(s),r.gid=l(o),r.rdev=l(0),r.blksize=l(4096),r.ino=l(e.ino),r.size=l(e.getSize()),r.blocks=l(1),r.atime=a,r.mtime=c,r.ctime=h,r.birthtime=h,r.atimeMs=l(a.getTime()),r.mtimeMs=l(c.getTime());var u=l(h.getTime());return r.ctimeMs=u,r.birthtimeMs=u,r.dev=l(0),r.mode=l(e.mode),r.nlink=l(e.nlink),r},t.prototype._checkModeProperty=function(t){return(Number(this.mode)&s)===t},t.prototype.isDirectory=function(){return this._checkModeProperty(o)},t.prototype.isFile=function(){return this._checkModeProperty(a)},t.prototype.isBlockDevice=function(){return this._checkModeProperty(c)},t.prototype.isCharacterDevice=function(){return this._checkModeProperty(h)},t.prototype.isSymbolicLink=function(){return this._checkModeProperty(l)},t.prototype.isFIFO=function(){return this._checkModeProperty(u)},t.prototype.isSocket=function(){return this._checkModeProperty(f)},t}();e.Stats=_,e.default=_},5561:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}},9568:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(6426),n=i(6978);e.ENCODING_UTF8="utf8",e.assertEncoding=function(t){if(t&&!r.Buffer.isEncoding(t))throw new n.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)},e.strToEncoding=function(t,i){return i&&i!==e.ENCODING_UTF8?"buffer"===i?new r.Buffer(t):new r.Buffer(t).toString(i):t}},3103:(t,e)=>{"function"==typeof BigInt?e.default=BigInt:e.default=function(){throw new Error("BigInt is not supported in this environment.")}},6551:function(t,e,i){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=i(1507),s=i(832),o=i(6898),a=i(5659),c=a.fsSyncMethods,h=a.fsAsyncMethods,l=i(5561),u=l.constants.F_OK,f=l.constants.R_OK,_=l.constants.W_OK,d=l.constants.X_OK;function S(t){for(var e={F_OK:u,R_OK:f,W_OK:_,X_OK:d,constants:l.constants,Stats:n.default,Dirent:s.default},i=0,r=c;i<r.length;i++)"function"==typeof t[p=r[i]]&&(e[p]=t[p].bind(t));for(var a=0,S=h;a<S.length;a++){var p;"function"==typeof t[p=S[a]]&&(e[p]=t[p].bind(t))}return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=o.toUnixTimestamp,e}e.Volume=o.Volume,e.vol=new o.Volume,e.createFsFromVolume=S,e.fs=S(e.vol),t.exports=r(r({},t.exports),e.fs),t.exports.semantic=!0},6426:function(t,e,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r};Object.defineProperty(e,"__esModule",{value:!0});var n=i(4293);function s(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return new(n.Buffer.bind.apply(n.Buffer,r([void 0,t],e)))}e.Buffer=n.Buffer;var o=n.Buffer.allocUnsafe||s;e.bufferAllocUnsafe=o;var a=n.Buffer.from||s;e.bufferFrom=a},6978:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},r(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(2357),o=i(1669),a="undefined"==typeof Symbol?"_kCode":Symbol("code"),c={};function h(t){return function(t){function e(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];var n=t.call(this,u(e,i))||this;return n.code=e,n[a]=e,n.name=t.prototype.name+" ["+n[a]+"]",n}return n(e,t),e}(t)}var l=function(t){function i(i){var r=this;if("object"!=typeof i||null===i)throw new e.TypeError("ERR_INVALID_ARG_TYPE","options","object");return(r=i.message?t.call(this,i.message)||this:t.call(this,o.inspect(i.actual).slice(0,128)+" "+i.operator+" "+o.inspect(i.expected).slice(0,128))||this).generatedMessage=!i.message,r.name="AssertionError [ERR_ASSERTION]",r.code="ERR_ASSERTION",r.actual=i.actual,r.expected=i.expected,r.operator=i.operator,e.Error.captureStackTrace(r,i.stackStartFunction),r}return n(i,t),i}(global.Error);function u(t,e){s.strictEqual(typeof t,"string");var i,r=c[t];if(s(r,"An invalid error message key was used: "+t+"."),"function"==typeof r)i=r;else{if(i=o.format,void 0===e||0===e.length)return r;e.unshift(r)}return String(i.apply(null,e))}function f(t,e){c[t]="function"==typeof e?e:String(e)}function _(t,e){if(s(t,"expected is required"),s("string"==typeof e,"thing is required"),Array.isArray(t)){var i=t.length;return s(i>0,"At least one expected value needs to be specified"),t=t.map((function(t){return String(t)})),i>2?"one of "+e+" "+t.slice(0,i-1).join(", ")+", or "+t[i-1]:2===i?"one of "+e+" "+t[0]+" or "+t[1]:"of "+e+" "+t[0]}return"of "+e+" "+String(t)}e.AssertionError=l,e.message=u,e.E=f,e.Error=h(global.Error),e.TypeError=h(global.TypeError),e.RangeError=h(global.RangeError),f("ERR_ARG_NOT_ITERABLE","%s must be iterable"),f("ERR_ASSERTION","%s"),f("ERR_BUFFER_OUT_OF_BOUNDS",(function(t,e){return e?"Attempt to write outside buffer bounds":'"'+t+'" is outside of buffer bounds'})),f("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),f("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),f("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),f("ERR_DNS_SET_SERVERS_FAILED",(function(t,e){return'c-ares failed to set servers: "'+t+'" ['+e+"]"})),f("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),f("ERR_ENCODING_NOT_SUPPORTED",(function(t){return'The "'+t+'" encoding is not supported'})),f("ERR_ENCODING_INVALID_ENCODED_DATA",(function(t){return"The encoded data was not valid for encoding "+t})),f("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),f("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),f("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),f("ERR_INDEX_OUT_OF_RANGE","Index out of range"),f("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,n;if(s(t,"name is required"),e.includes("not ")?(r="must not be",e=e.split("not ")[1]):r="must be",Array.isArray(t)){var o=t.map((function(t){return'"'+t+'"'})).join(", ");n="The "+o+" arguments "+r+" "+_(e,"type")}else if(t.includes(" argument"))n="The "+t+" "+r+" "+_(e,"type");else{var a=t.includes(".")?"property":"argument";n='The "'+t+'" '+a+" "+r+" "+_(e,"type")}return arguments.length>=3&&(n+=". Received type "+(null!==i?typeof i:"null")),n})),f("ERR_INVALID_ARRAY_LENGTH",(function(t,e,i){return s.strictEqual(typeof i,"number"),'The array "'+t+'" (length '+i+") must be of length "+e+"."})),f("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),f("ERR_INVALID_CALLBACK","Callback must be a function"),f("ERR_INVALID_CHAR","Invalid character in %s"),f("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),f("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),f("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),f("ERR_INVALID_FILE_URL_PATH","File URL path %s"),f("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),f("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),f("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+String(e)+'" is invalid for option "'+t+'"'})),f("ERR_INVALID_OPT_VALUE_ENCODING",(function(t){return'The value "'+String(t)+'" is invalid for option "encoding"'})),f("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),f("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),f("ERR_INVALID_THIS",'Value of "this" must be of type %s'),f("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),f("ERR_INVALID_URL","Invalid URL: %s"),f("ERR_INVALID_URL_SCHEME",(function(t){return"The URL must be "+_(t,"scheme")})),f("ERR_IPC_CHANNEL_CLOSED","Channel closed"),f("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),f("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),f("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),f("ERR_MISSING_ARGS",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s(t.length>0,"At least one arg needs to be specified");var i="The ",r=t.length;switch(t=t.map((function(t){return'"'+t+'"'})),r){case 1:i+=t[0]+" argument";break;case 2:i+=t[0]+" and "+t[1]+" arguments";break;default:i+=t.slice(0,r-1).join(", "),i+=", and "+t[r-1]+" arguments"}return i+" must be specified"})),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),f("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),f("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),f("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),f("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),f("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),f("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),f("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),f("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),f("ERR_SOCKET_CANNOT_SEND","Unable to send data"),f("ERR_SOCKET_CLOSED","Socket is closed"),f("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),f("ERR_STDERR_CLOSE","process.stderr cannot be closed"),f("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),f("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),f("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),f("ERR_TLS_DH_PARAM_SIZE",(function(t){return"DH parameter size "+t+" is less than 2048"})),f("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),f("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),f("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),f("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),f("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),f("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),f("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),f("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),f("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),f("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")},1172:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},r(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s=i(4880),o=i(6426),a=i(5561),c=i(8614),h=i(1507),l=a.constants.S_IFMT,u=a.constants.S_IFDIR,f=a.constants.S_IFREG,_=(a.constants.S_IFBLK,a.constants.S_IFCHR,a.constants.S_IFLNK),d=(a.constants.S_IFIFO,a.constants.S_IFSOCK,a.constants.O_APPEND);e.SEP="/";var S=function(t){function e(e,i){void 0===i&&(i=438);var r=t.call(this)||this;return r.uid=s.default.getuid(),r.gid=s.default.getgid(),r.atime=new Date,r.mtime=new Date,r.ctime=new Date,r.perm=438,r.mode=f,r.nlink=1,r.perm=i,r.mode|=i,r.ino=e,r}return n(e,t),e.prototype.getString=function(t){return void 0===t&&(t="utf8"),this.getBuffer().toString(t)},e.prototype.setString=function(t){this.buf=o.bufferFrom(t,"utf8"),this.touch()},e.prototype.getBuffer=function(){return this.buf||this.setBuffer(o.bufferAllocUnsafe(0)),o.bufferFrom(this.buf)},e.prototype.setBuffer=function(t){this.buf=o.bufferFrom(t),this.touch()},e.prototype.getSize=function(){return this.buf?this.buf.length:0},e.prototype.setModeProperty=function(t){this.mode=this.mode&~l|t},e.prototype.setIsFile=function(){this.setModeProperty(f)},e.prototype.setIsDirectory=function(){this.setModeProperty(u)},e.prototype.setIsSymlink=function(){this.setModeProperty(_)},e.prototype.isFile=function(){return(this.mode&l)===f},e.prototype.isDirectory=function(){return(this.mode&l)===u},e.prototype.isSymlink=function(){return(this.mode&l)===_},e.prototype.makeSymlink=function(t){this.symlink=t,this.setIsSymlink()},e.prototype.write=function(t,e,i,r){if(void 0===e&&(e=0),void 0===i&&(i=t.length),void 0===r&&(r=0),this.buf||(this.buf=o.bufferAllocUnsafe(0)),r+i>this.buf.length){var n=o.bufferAllocUnsafe(r+i);this.buf.copy(n,0,0,this.buf.length),this.buf=n}return t.copy(this.buf,r,e,e+i),this.touch(),i},e.prototype.read=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=t.byteLength),void 0===r&&(r=0),this.buf||(this.buf=o.bufferAllocUnsafe(0));var n=i;return n>t.byteLength&&(n=t.byteLength),n+r>this.buf.length&&(n=this.buf.length-r),this.buf.copy(t,e,r,r+n),n},e.prototype.truncate=function(t){if(void 0===t&&(t=0),t)if(this.buf||(this.buf=o.bufferAllocUnsafe(0)),t<=this.buf.length)this.buf=this.buf.slice(0,t);else{var e=o.bufferAllocUnsafe(0);this.buf.copy(e),e.fill(0,t)}else this.buf=o.bufferAllocUnsafe(0);this.touch()},e.prototype.chmod=function(t){this.perm=t,this.mode=-512&this.mode|t,this.touch()},e.prototype.chown=function(t,e){this.uid=t,this.gid=e,this.touch()},e.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},e.prototype.canRead=function(t,e){return void 0===t&&(t=s.default.getuid()),void 0===e&&(e=s.default.getgid()),!!(4&this.perm)||!!(e===this.gid&&32&this.perm)||!!(t===this.uid&&256&this.perm)},e.prototype.canWrite=function(t,e){return void 0===t&&(t=s.default.getuid()),void 0===e&&(e=s.default.getgid()),!!(2&this.perm)||!!(e===this.gid&&16&this.perm)||!!(t===this.uid&&128&this.perm)},e.prototype.del=function(){this.emit("delete",this)},e.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},e}(c.EventEmitter);e.Node=S;var p=function(t){function i(e,i,r){var n=t.call(this)||this;return n.children={},n.steps=[],n.ino=0,n.length=0,n.vol=e,n.parent=i,n.steps=i?i.steps.concat([r]):[r],n}return n(i,t),i.prototype.setNode=function(t){this.node=t,this.ino=t.ino},i.prototype.getNode=function(){return this.node},i.prototype.createChild=function(t,e){void 0===e&&(e=this.vol.createNode());var r=new i(this.vol,this,t);return r.setNode(e),e.isDirectory(),this.setChild(t,r),r},i.prototype.setChild=function(t,e){return void 0===e&&(e=new i(this.vol,this,t)),this.children[t]=e,e.parent=this,this.length++,this.emit("child:add",e,this),e},i.prototype.deleteChild=function(t){delete this.children[t.getName()],this.length--,this.emit("child:delete",t,this)},i.prototype.getChild=function(t){if(Object.hasOwnProperty.call(this.children,t))return this.children[t]},i.prototype.getPath=function(){return this.steps.join(e.SEP)},i.prototype.getName=function(){return this.steps[this.steps.length-1]},i.prototype.walk=function(t,e,i){if(void 0===e&&(e=t.length),void 0===i&&(i=0),i>=t.length)return this;if(i>=e)return this;var r=t[i],n=this.getChild(r);return n?n.walk(t,e,i+1):null},i.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},i}(c.EventEmitter);e.Link=p;var I=function(){function t(t,e,i,r){this.position=0,this.link=t,this.node=e,this.flags=i,this.fd=r}return t.prototype.getString=function(t){return void 0===t&&(t="utf8"),this.node.getString()},t.prototype.setString=function(t){this.node.setString(t)},t.prototype.getBuffer=function(){return this.node.getBuffer()},t.prototype.setBuffer=function(t){this.node.setBuffer(t)},t.prototype.getSize=function(){return this.node.getSize()},t.prototype.truncate=function(t){this.node.truncate(t)},t.prototype.seekTo=function(t){this.position=t},t.prototype.stats=function(){return h.default.build(this.node)},t.prototype.write=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=t.length),"number"!=typeof r&&(r=this.position),this.flags&d&&(r=this.getSize());var n=this.node.write(t,e,i,r);return this.position=r+n,n},t.prototype.read=function(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=t.byteLength),"number"!=typeof r&&(r=this.position);var n=this.node.read(t,e,i,r);return this.position=r+n,n},t.prototype.chmod=function(t){this.node.chmod(t)},t.prototype.chown=function(t,e){this.node.chown(t,e)},t}();e.File=I},4880:(t,e,i)=>{"use strict";function r(){var t=function(){if("undefined"!=typeof process)return process;try{return i(1765)}catch(t){return}}()||{};return t.getuid||(t.getuid=function(){return 0}),t.getgid||(t.getgid=function(){return 0}),t.cwd||(t.cwd=function(){return"/"}),t.nextTick||(t.nextTick=i(6015).default),t.emitWarning||(t.emitWarning=function(t,e){console.warn(e+(e?": ":"")+t)}),t.env||(t.env={}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.createProcess=r,e.default=r()},6133:function(t,e){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r};function r(t,e,r){return void 0===r&&(r=function(t){return t}),function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return new Promise((function(s,o){t[e].bind(t).apply(void 0,i(n,[function(t,e){return t?o(t):s(r(e))}]))}))}}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.vol=t,this.fd=e}return t.prototype.appendFile=function(t,e){return r(this.vol,"appendFile")(this.fd,t,e)},t.prototype.chmod=function(t){return r(this.vol,"fchmod")(this.fd,t)},t.prototype.chown=function(t,e){return r(this.vol,"fchown")(this.fd,t,e)},t.prototype.close=function(){return r(this.vol,"close")(this.fd)},t.prototype.datasync=function(){return r(this.vol,"fdatasync")(this.fd)},t.prototype.read=function(t,e,i,n){return r(this.vol,"read",(function(e){return{bytesRead:e,buffer:t}}))(this.fd,t,e,i,n)},t.prototype.readFile=function(t){return r(this.vol,"readFile")(this.fd,t)},t.prototype.stat=function(t){return r(this.vol,"fstat")(this.fd,t)},t.prototype.sync=function(){return r(this.vol,"fsync")(this.fd)},t.prototype.truncate=function(t){return r(this.vol,"ftruncate")(this.fd,t)},t.prototype.utimes=function(t,e){return r(this.vol,"futimes")(this.fd,t,e)},t.prototype.write=function(t,e,i,n){return r(this.vol,"write",(function(e){return{bytesWritten:e,buffer:t}}))(this.fd,t,e,i,n)},t.prototype.writeFile=function(t,e){return r(this.vol,"writeFile")(this.fd,t,e)},t}();e.FileHandle=n,e.default=function(t){return"undefined"==typeof Promise?null:{FileHandle:n,access:function(e,i){return r(t,"access")(e,i)},appendFile:function(e,i,s){return r(t,"appendFile")(e instanceof n?e.fd:e,i,s)},chmod:function(e,i){return r(t,"chmod")(e,i)},chown:function(e,i,n){return r(t,"chown")(e,i,n)},copyFile:function(e,i,n){return r(t,"copyFile")(e,i,n)},lchmod:function(e,i){return r(t,"lchmod")(e,i)},lchown:function(e,i,n){return r(t,"lchown")(e,i,n)},link:function(e,i){return r(t,"link")(e,i)},lstat:function(e,i){return r(t,"lstat")(e,i)},mkdir:function(e,i){return r(t,"mkdir")(e,i)},mkdtemp:function(e,i){return r(t,"mkdtemp")(e,i)},open:function(e,i,s){return r(t,"open",(function(e){return new n(t,e)}))(e,i,s)},readdir:function(e,i){return r(t,"readdir")(e,i)},readFile:function(e,i){return r(t,"readFile")(e instanceof n?e.fd:e,i)},readlink:function(e,i){return r(t,"readlink")(e,i)},realpath:function(e,i){return r(t,"realpath")(e,i)},rename:function(e,i){return r(t,"rename")(e,i)},rmdir:function(e){return r(t,"rmdir")(e)},stat:function(e,i){return r(t,"stat")(e,i)},symlink:function(e,i,n){return r(t,"symlink")(e,i,n)},truncate:function(e,i){return r(t,"truncate")(e,i)},unlink:function(e){return r(t,"unlink")(e)},utimes:function(e,i,n){return r(t,"utimes")(e,i,n)},writeFile:function(e,i,s){return r(t,"writeFile")(e instanceof n?e.fd:e,i,s)}}}},6015:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),i="function"==typeof setImmediate?setImmediate.bind(global):setTimeout.bind(global),e.default=i},8369:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){var r=setTimeout.apply(null,arguments);return r&&"object"==typeof r&&"function"==typeof r.unref&&r.unref(),r}},6898:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},r(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r};Object.defineProperty(e,"__esModule",{value:!0});var o,a,c=i(5622),h=i(1172),l=i(1507),u=i(832),f=i(6426),_=i(6015),d=i(4880),S=i(8369),p=i(2413),I=i(5561),E=i(8614),A=i(9568),y=i(6978),g=i(2630).l,T=i(1669),m=i(6133),v=c.resolve,R=I.constants.O_RDONLY,w=I.constants.O_WRONLY,O=I.constants.O_RDWR,W=I.constants.O_CREAT,b=I.constants.O_EXCL,N=I.constants.O_TRUNC,C=I.constants.O_APPEND,F=I.constants.O_SYNC,L=I.constants.O_DIRECTORY,P=I.constants.F_OK,D=I.constants.COPYFILE_EXCL,B=I.constants.COPYFILE_FICLONE_FORCE;if(c.posix){var G=c.posix;o=G.sep,a=G.relative}else o=c.sep,a=c.relative;var k,H="win32"===d.default.platform,M="path must be a string or Buffer",U="fd must be a file descriptor",x="callback must be a function",Y="ENOENT",K="EBADF",V="EINVAL",j="EEXIST",$="ENOTDIR",X="EMFILE",z="EACCES",q="EISDIR",J="ENOTEMPTY",Z="ENOSYS";function Q(t,e,i,r,n){void 0===e&&(e=""),void 0===i&&(i=""),void 0===r&&(r=""),void 0===n&&(n=Error);var s=new n(function(t,e,i,r){void 0===e&&(e=""),void 0===i&&(i=""),void 0===r&&(r="");var n="";switch(i&&(n=" '"+i+"'"),r&&(n+=" -> '"+r+"'"),t){case Y:return"ENOENT: no such file or directory, "+e+n;case K:return"EBADF: bad file descriptor, "+e+n;case V:return"EINVAL: invalid argument, "+e+n;case"EPERM":return"EPERM: operation not permitted, "+e+n;case"EPROTO":return"EPROTO: protocol error, "+e+n;case j:return"EEXIST: file already exists, "+e+n;case $:return"ENOTDIR: not a directory, "+e+n;case q:return"EISDIR: illegal operation on a directory, "+e+n;case z:return"EACCES: permission denied, "+e+n;case J:return"ENOTEMPTY: directory not empty, "+e+n;case X:return"EMFILE: too many open files, "+e+n;case Z:return"ENOSYS: function not implemented, "+e+n;default:return t+": error occurred, "+e+n}}(t,e,i,r));return s.code=t,s}function tt(t){if("number"==typeof t)return t;if("string"==typeof t){var e=k[t];if(void 0!==e)return e}throw new y.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function et(t,e){var i;if(!e)return t;var r=typeof e;switch(r){case"string":i=g({},t,{encoding:e});break;case"object":i=g({},t,e);break;default:throw TypeError(function(t){return"Expected options to be either an object or a string, but got "+t+" instead"}(r))}return"buffer"!==i.encoding&&A.assertEncoding(i.encoding),i}function it(t){return function(e){return et(t,e)}}function rt(t){if("function"!=typeof t)throw TypeError(x);return t}function nt(t){return function(e,i){return"function"==typeof e?[t(),e]:[t(e),rt(i)]}}!function(t){t[t.r=R]="r",t[t["r+"]=O]="r+",t[t.rs=R|F]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=O|F]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=w|W|N]="w",t[t.wx=w|W|N|b]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=O|W|N]="w+",t[t["wx+"]=O|W|N|b]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=w|C|W]="a",t[t.ax=w|C|W|b]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=O|C|W]="a+",t[t["ax+"]=O|C|W|b]="ax+",t[t["xa+"]=t["ax+"]]="xa+"}(k=e.FLAGS||(e.FLAGS={})),e.flagsToNumber=tt;var st={encoding:"utf8"},ot=it(st),at=nt(ot),ct=it({flag:"r"}),ht={encoding:"utf8",mode:438,flag:k[k.w]},lt=it(ht),ut={encoding:"utf8",mode:438,flag:k[k.a]},ft=it(ut),_t=nt(ft),dt=it(st),St=nt(dt),pt={mode:511,recursive:!1},It=function(t){return g({},pt,"number"==typeof t?{mode:t}:t)},Et={recursive:!1},At=function(t){return g({},Et,t)},yt=it({encoding:"utf8",withFileTypes:!1}),gt=nt(yt),Tt={bigint:!1},mt=function(t){return void 0===t&&(t={}),g({},Tt,t)},vt=function(t,e){return"function"==typeof t?[mt(),t]:[mt(t),rt(e)]};function Rt(t){if("string"!=typeof t&&!f.Buffer.isBuffer(t)){try{if(!(t instanceof i(8835).URL))throw new TypeError(M)}catch(t){throw new TypeError(M)}t=function(t){if(""!==t.hostname)throw new y.TypeError("ERR_INVALID_FILE_URL_HOST",d.default.platform);for(var e=t.pathname,i=0;i<e.length;i++)if("%"===e[i]){var r=32|e.codePointAt(i+2);if("2"===e[i+1]&&102===r)throw new y.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(e)}(t)}var e=String(t);return Lt(e),e}e.pathToFilename=Rt;var wt=function(t,e){return void 0===e&&(e=d.default.cwd()),v(e,t)};if(H){var Ot=wt,Wt=i(4290).Z4;wt=function(t,e){return Wt(Ot(t,e))}}function bt(t,e){var i=wt(t,e).substr(1);return i?i.split(o):[]}function Nt(t){return bt(Rt(t))}function Ct(t,e){return void 0===e&&(e=A.ENCODING_UTF8),f.Buffer.isBuffer(t)?t:t instanceof Uint8Array?f.bufferFrom(t):f.bufferFrom(String(t),e)}function Ft(t,e){return e&&"buffer"!==e?t.toString(e):t}function Lt(t,e){if(-1!==(""+t).indexOf("\0")){var i=new Error("Path must be a string without null bytes");if(i.code=Y,"function"!=typeof e)throw i;return d.default.nextTick(e,i),!1}return!0}function Pt(t,e){var i=function(t,e){return"number"==typeof t?t:"string"==typeof t?parseInt(t,8):e?Pt(e):void 0}(t,e);if("number"!=typeof i||isNaN(i))throw new TypeError("mode must be an int");return i}function Dt(t){return t>>>0===t}function Bt(t){if(!Dt(t))throw TypeError(U)}function Gt(t){if("string"==typeof t&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return t<0?Date.now()/1e3:t;throw new Error("Cannot parse time: "+t)}function kt(t){if("number"!=typeof t)throw TypeError("uid must be an unsigned int")}function Ht(t){if("number"!=typeof t)throw TypeError("gid must be an unsigned int")}e.filenameToSteps=bt,e.pathToSteps=Nt,e.dataToStr=function(t,e){return void 0===e&&(e=A.ENCODING_UTF8),f.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?f.bufferFrom(t).toString(e):String(t)},e.dataToBuffer=Ct,e.bufferToEncoding=Ft,e.toUnixTimestamp=Gt;var Mt=function(){function t(t){void 0===t&&(t={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=m.default(this),this.statWatchers={},this.props=g({Node:h.Node,Link:h.Link,File:h.File},t);var e=this.createLink();e.setNode(this.createNode(!0));var i=this;this.StatWatcher=function(t){function e(){return t.call(this,i)||this}return n(e,t),e}(Yt);var r=Kt;this.ReadStream=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(this,s([i],e))||this}return n(e,t),e}(r);var o=jt;this.WriteStream=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(this,s([i],e))||this}return n(e,t),e}(o),this.FSWatcher=function(t){function e(){return t.call(this,i)||this}return n(e,t),e}($t),this.root=e}return t.fromJSON=function(e,i){var r=new t;return r.fromJSON(e,i),r},Object.defineProperty(t.prototype,"promises",{get:function(){if(null===this.promisesApi)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),t.prototype.createLink=function(t,e,i,r){if(void 0===i&&(i=!1),!t)return new this.props.Link(this,null,"");if(!e)throw new Error("createLink: name cannot be empty");return t.createChild(e,this.createNode(i,r))},t.prototype.deleteLink=function(t){var e=t.parent;return!!e&&(e.deleteChild(t),!0)},t.prototype.newInoNumber=function(){return this.releasedInos.pop()||(this.ino=(this.ino+1)%4294967295,this.ino)},t.prototype.newFdNumber=function(){var e=this.releasedFds.pop();return"number"==typeof e?e:t.fd--},t.prototype.createNode=function(t,e){void 0===t&&(t=!1);var i=new this.props.Node(this.newInoNumber(),e);return t&&i.setIsDirectory(),this.inodes[i.ino]=i,i},t.prototype.getNode=function(t){return this.inodes[t]},t.prototype.deleteNode=function(t){t.del(),delete this.inodes[t.ino],this.releasedInos.push(t.ino)},t.prototype.genRndStr=function(){var t=(Math.random()+1).toString(36).substr(2,6);return 6===t.length?t:this.genRndStr()},t.prototype.getLink=function(t){return this.root.walk(t)},t.prototype.getLinkOrThrow=function(t,e){var i=bt(t),r=this.getLink(i);if(!r)throw Q(Y,e,t);return r},t.prototype.getResolvedLink=function(t){for(var e="string"==typeof t?bt(t):t,i=this.root,r=0;r<e.length;){var n=e[r];if(!(i=i.getChild(n)))return null;var s=i.getNode();s.isSymlink()?(e=s.symlink.concat(e.slice(r+1)),i=this.root,r=0):r++}return i},t.prototype.getResolvedLinkOrThrow=function(t,e){var i=this.getResolvedLink(t);if(!i)throw Q(Y,e,t);return i},t.prototype.resolveSymlinks=function(t){return this.getResolvedLink(t.steps.slice(1))},t.prototype.getLinkAsDirOrThrow=function(t,e){var i=this.getLinkOrThrow(t,e);if(!i.getNode().isDirectory())throw Q($,e,t);return i},t.prototype.getLinkParent=function(t){return this.root.walk(t,t.length-1)},t.prototype.getLinkParentAsDirOrThrow=function(t,e){var i=t instanceof Array?t:bt(t),r=this.getLinkParent(i);if(!r)throw Q(Y,e,o+i.join(o));if(!r.getNode().isDirectory())throw Q($,e,o+i.join(o));return r},t.prototype.getFileByFd=function(t){return this.fds[String(t)]},t.prototype.getFileByFdOrThrow=function(t,e){if(!Dt(t))throw TypeError(U);var i=this.getFileByFd(t);if(!i)throw Q(K,e);return i},t.prototype.getNodeByIdOrCreate=function(t,e,i){if("number"==typeof t){var r=this.getFileByFd(t);if(!r)throw Error("File nto found");return r.node}var n=Nt(t),s=this.getLink(n);if(s)return s.getNode();if(e&W){var o=this.getLinkParent(n);if(o){var a=n[n.length-1];return(s=this.createLink(o,a,!1,i)).getNode()}}throw Q(Y,"getNodeByIdOrCreate",Rt(t))},t.prototype.wrapAsync=function(t,e,i){var r=this;rt(i),_.default((function(){try{i(null,t.apply(r,e))}catch(t){i(t)}}))},t.prototype._toJSON=function(t,e,i){var r;void 0===t&&(t=this.root),void 0===e&&(e={});var n=!0,s=t.children;for(var o in t.getNode().isFile()&&((r={})[t.getName()]=t.parent.getChild(t.getName()),s=r,t=t.parent),s){n=!1;var c=t.getChild(o);if(!c)throw new Error("_toJSON: unexpected undefined");var h=c.getNode();if(h.isFile()){var l=c.getPath();i&&(l=a(i,l)),e[l]=h.getString()}else h.isDirectory()&&this._toJSON(c,e,i)}var u=t.getPath();return i&&(u=a(i,u)),u&&n&&(e[u]=null),e},t.prototype.toJSON=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=!1);var r=[];if(t){t instanceof Array||(t=[t]);for(var n=0,s=t;n<s.length;n++){var o=Rt(s[n]);(h=this.getResolvedLink(o))&&r.push(h)}}else r.push(this.root);if(!r.length)return e;for(var a=0,c=r;a<c.length;a++){var h=c[a];this._toJSON(h,e,i?h.getPath():"")}return e},t.prototype.fromJSON=function(t,e){for(var i in void 0===e&&(e=d.default.cwd()),t){var r=t[i];if("string"==typeof r){var n=bt(i=wt(i,e));if(n.length>1){var s=o+n.slice(0,n.length-1).join(o);this.mkdirpBase(s,511)}this.writeFileSync(i,r)}else this.mkdirpBase(i,511)}},t.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},t.prototype.mountSync=function(t,e){this.fromJSON(e,t)},t.prototype.openLink=function(t,e,i){if(void 0===i&&(i=!0),this.openFiles>=this.maxFiles)throw Q(X,"open",t.getPath());var r=t;if(i&&(r=this.resolveSymlinks(t)),!r)throw Q(Y,"open",t.getPath());var n=r.getNode();if(n.isDirectory()){if((e&(R|O|w))!==R)throw Q(q,"open",t.getPath())}else if(e&L)throw Q($,"open",t.getPath());if(!(e&w||n.canRead()))throw Q(z,"open",t.getPath());var s=new this.props.File(t,n,e,this.newFdNumber());return this.fds[s.fd]=s,this.openFiles++,e&N&&s.truncate(),s},t.prototype.openFile=function(t,e,i,r){void 0===r&&(r=!0);var n=bt(t),s=r?this.getResolvedLink(n):this.getLink(n);if(!s&&e&W){var a=this.getResolvedLink(n.slice(0,n.length-1));if(!a)throw Q(Y,"open",o+n.join(o));e&W&&"number"==typeof i&&(s=this.createLink(a,n[n.length-1],!1,i))}if(s)return this.openLink(s,e,r);throw Q(Y,"open",t)},t.prototype.openBase=function(t,e,i,r){void 0===r&&(r=!0);var n=this.openFile(t,e,i,r);if(!n)throw Q(Y,"open",t);return n.fd},t.prototype.openSync=function(t,e,i){void 0===i&&(i=438);var r=Pt(i),n=Rt(t),s=tt(e);return this.openBase(n,s,r)},t.prototype.open=function(t,e,i,r){var n=i,s=r;"function"==typeof i&&(n=438,s=i);var o=Pt(n=n||438),a=Rt(t),c=tt(e);this.wrapAsync(this.openBase,[a,c,o],s)},t.prototype.closeFile=function(t){this.fds[t.fd]&&(this.openFiles--,delete this.fds[t.fd],this.releasedFds.push(t.fd))},t.prototype.closeSync=function(t){Bt(t);var e=this.getFileByFdOrThrow(t,"close");this.closeFile(e)},t.prototype.close=function(t,e){Bt(t),this.wrapAsync(this.closeSync,[t],e)},t.prototype.openFileOrGetById=function(t,e,i){if("number"==typeof t){var r=this.fds[t];if(!r)throw Q(Y);return r}return this.openFile(Rt(t),e,i)},t.prototype.readBase=function(t,e,i,r,n){return this.getFileByFdOrThrow(t).read(e,Number(i),Number(r),n)},t.prototype.readSync=function(t,e,i,r,n){return Bt(t),this.readBase(t,e,i,r,n)},t.prototype.read=function(t,e,i,r,n,s){var o=this;if(rt(s),0===r)return d.default.nextTick((function(){s&&s(null,0,e)}));_.default((function(){try{var a=o.readBase(t,e,i,r,n);s(null,a,e)}catch(t){s(t)}}))},t.prototype.readFileBase=function(t,e,i){var r,n,s="number"==typeof t&&Dt(t);if(s)n=t;else{var o=bt(Rt(t)),a=this.getResolvedLink(o);if(a&&a.getNode().isDirectory())throw Q(q,"open",a.getPath());n=this.openSync(t,e)}try{r=Ft(this.getFileByFdOrThrow(n).getBuffer(),i)}finally{s||this.closeSync(n)}return r},t.prototype.readFileSync=function(t,e){var i=ct(e),r=tt(i.flag);return this.readFileBase(t,r,i.encoding)},t.prototype.readFile=function(t,e,i){var r=nt(ct)(e,i),n=r[0],s=r[1],o=tt(n.flag);this.wrapAsync(this.readFileBase,[t,o,n.encoding],s)},t.prototype.writeBase=function(t,e,i,r,n){return this.getFileByFdOrThrow(t,"write").write(e,i,r,n)},t.prototype.writeSync=function(t,e,i,r,n){var s,o,a,c;Bt(t);var h="string"!=typeof e;h?(o=0|(i||0),a=r,c=n):(c=i,s=r);var l=Ct(e,s);return h?void 0===a&&(a=l.length):(o=0,a=l.length),this.writeBase(t,l,o,a,c)},t.prototype.write=function(t,e,i,r,n,s){var o,a,c,h,l,u=this;Bt(t);var f=typeof e,d=typeof i,S=typeof r,p=typeof n;"string"!==f?"function"===d?l=i:"function"===S?(o=0|i,l=r):"function"===p?(o=0|i,a=r,l=n):(o=0|i,a=r,c=n,l=s):"function"===d?l=i:"function"===S?(c=i,l=r):"function"===p&&(c=i,h=r,l=n);var I=Ct(e,h);"string"!==f?void 0===a&&(a=I.length):(o=0,a=I.length);var E=rt(l);_.default((function(){try{var i=u.writeBase(t,I,o,a,c);E(null,i,"string"!==f?I:e)}catch(t){E(t)}}))},t.prototype.writeFileBase=function(t,e,i,r){var n,s="number"==typeof t;n=s?t:this.openBase(Rt(t),i,r);var o=0,a=e.length,c=i&C?void 0:0;try{for(;a>0;){var h=this.writeSync(n,e,o,a,c);o+=h,a-=h,void 0!==c&&(c+=h)}}finally{s||this.closeSync(n)}},t.prototype.writeFileSync=function(t,e,i){var r=lt(i),n=tt(r.flag),s=Pt(r.mode),o=Ct(e,r.encoding);this.writeFileBase(t,o,n,s)},t.prototype.writeFile=function(t,e,i,r){var n=i,s=r;"function"==typeof i&&(n=ht,s=i);var o=rt(s),a=lt(n),c=tt(a.flag),h=Pt(a.mode),l=Ct(e,a.encoding);this.wrapAsync(this.writeFileBase,[t,l,c,h],o)},t.prototype.linkBase=function(t,e){var i=bt(t),r=this.getLink(i);if(!r)throw Q(Y,"link",t,e);var n=bt(e),s=this.getLinkParent(n);if(!s)throw Q(Y,"link",t,e);var o=n[n.length-1];if(s.getChild(o))throw Q(j,"link",t,e);var a=r.getNode();a.nlink++,s.createChild(o,a)},t.prototype.copyFileBase=function(t,e,i){var r=this.readFileSync(t);if(i&D&&this.existsSync(e))throw Q(j,"copyFile",t,e);if(i&B)throw Q(Z,"copyFile",t,e);this.writeFileBase(e,r,k.w,438)},t.prototype.copyFileSync=function(t,e,i){var r=Rt(t),n=Rt(e);return this.copyFileBase(r,n,0|(i||0))},t.prototype.copyFile=function(t,e,i,r){var n,s,o=Rt(t),a=Rt(e);"function"==typeof i?(n=0,s=i):(n=i,s=r),rt(s),this.wrapAsync(this.copyFileBase,[o,a,n],s)},t.prototype.linkSync=function(t,e){var i=Rt(t),r=Rt(e);this.linkBase(i,r)},t.prototype.link=function(t,e,i){var r=Rt(t),n=Rt(e);this.wrapAsync(this.linkBase,[r,n],i)},t.prototype.unlinkBase=function(t){var e=bt(t),i=this.getLink(e);if(!i)throw Q(Y,"unlink",t);if(i.length)throw Error("Dir not empty...");this.deleteLink(i);var r=i.getNode();r.nlink--,r.nlink<=0&&this.deleteNode(r)},t.prototype.unlinkSync=function(t){var e=Rt(t);this.unlinkBase(e)},t.prototype.unlink=function(t,e){var i=Rt(t);this.wrapAsync(this.unlinkBase,[i],e)},t.prototype.symlinkBase=function(t,e){var i=bt(e),r=this.getLinkParent(i);if(!r)throw Q(Y,"symlink",t,e);var n=i[i.length-1];if(r.getChild(n))throw Q(j,"symlink",t,e);var s=r.createChild(n);return s.getNode().makeSymlink(bt(t)),s},t.prototype.symlinkSync=function(t,e,i){var r=Rt(t),n=Rt(e);this.symlinkBase(r,n)},t.prototype.symlink=function(t,e,i,r){var n=rt("function"==typeof i?i:r),s=Rt(t),o=Rt(e);this.wrapAsync(this.symlinkBase,[s,o],n)},t.prototype.realpathBase=function(t,e){var i=bt(t),r=this.getResolvedLink(i);if(!r)throw Q(Y,"realpath",t);return A.strToEncoding(r.getPath(),e)},t.prototype.realpathSync=function(t,e){return this.realpathBase(Rt(t),dt(e).encoding)},t.prototype.realpath=function(t,e,i){var r=St(e,i),n=r[0],s=r[1],o=Rt(t);this.wrapAsync(this.realpathBase,[o,n.encoding],s)},t.prototype.lstatBase=function(t,e){void 0===e&&(e=!1);var i=this.getLink(bt(t));if(!i)throw Q(Y,"lstat",t);return l.default.build(i.getNode(),e)},t.prototype.lstatSync=function(t,e){return this.lstatBase(Rt(t),mt(e).bigint)},t.prototype.lstat=function(t,e,i){var r=vt(e,i),n=r[0],s=r[1];this.wrapAsync(this.lstatBase,[Rt(t),n.bigint],s)},t.prototype.statBase=function(t,e){void 0===e&&(e=!1);var i=this.getResolvedLink(bt(t));if(!i)throw Q(Y,"stat",t);return l.default.build(i.getNode(),e)},t.prototype.statSync=function(t,e){return this.statBase(Rt(t),mt(e).bigint)},t.prototype.stat=function(t,e,i){var r=vt(e,i),n=r[0],s=r[1];this.wrapAsync(this.statBase,[Rt(t),n.bigint],s)},t.prototype.fstatBase=function(t,e){void 0===e&&(e=!1);var i=this.getFileByFd(t);if(!i)throw Q(K,"fstat");return l.default.build(i.node,e)},t.prototype.fstatSync=function(t,e){return this.fstatBase(t,mt(e).bigint)},t.prototype.fstat=function(t,e,i){var r=vt(e,i),n=r[0],s=r[1];this.wrapAsync(this.fstatBase,[t,n.bigint],s)},t.prototype.renameBase=function(t,e){var i=this.getLink(bt(t));if(!i)throw Q(Y,"rename",t,e);var r=bt(e),n=this.getLinkParent(r);if(!n)throw Q(Y,"rename",t,e);var o=i.parent;o&&o.deleteChild(i);var a=r[r.length-1];i.steps=s(n.steps,[a]),n.setChild(i.getName(),i)},t.prototype.renameSync=function(t,e){var i=Rt(t),r=Rt(e);this.renameBase(i,r)},t.prototype.rename=function(t,e,i){var r=Rt(t),n=Rt(e);this.wrapAsync(this.renameBase,[r,n],i)},t.prototype.existsBase=function(t){return!!this.statBase(t)},t.prototype.existsSync=function(t){try{return this.existsBase(Rt(t))}catch(t){return!1}},t.prototype.exists=function(t,e){var i=this,r=Rt(t);if("function"!=typeof e)throw Error(x);_.default((function(){try{e(i.existsBase(r))}catch(t){e(!1)}}))},t.prototype.accessBase=function(t,e){this.getLinkOrThrow(t,"access")},t.prototype.accessSync=function(t,e){void 0===e&&(e=P);var i=Rt(t);e|=0,this.accessBase(i,e)},t.prototype.access=function(t,e,i){var r,n=P;"function"!=typeof e?(n=0|e,r=rt(i)):r=e;var s=Rt(t);this.wrapAsync(this.accessBase,[s,n],r)},t.prototype.appendFileSync=function(t,e,i){void 0===i&&(i=ut);var r=ft(i);r.flag&&!Dt(t)||(r.flag="a"),this.writeFileSync(t,e,r)},t.prototype.appendFile=function(t,e,i,r){var n=_t(i,r),s=n[0],o=n[1];s.flag&&!Dt(t)||(s.flag="a"),this.writeFile(t,e,s,o)},t.prototype.readdirBase=function(t,e){var i=bt(t),r=this.getResolvedLink(i);if(!r)throw Q(Y,"readdir",t);if(!r.getNode().isDirectory())throw Q($,"scandir",t);if(e.withFileTypes){var n=[];for(var s in r.children){var o=r.getChild(s);o&&n.push(u.default.build(o,e.encoding))}return H||"buffer"===e.encoding||n.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),n}var a=[];for(var c in r.children)a.push(A.strToEncoding(c,e.encoding));return H||"buffer"===e.encoding||a.sort(),a},t.prototype.readdirSync=function(t,e){var i=yt(e),r=Rt(t);return this.readdirBase(r,i)},t.prototype.readdir=function(t,e,i){var r=gt(e,i),n=r[0],s=r[1],o=Rt(t);this.wrapAsync(this.readdirBase,[o,n],s)},t.prototype.readlinkBase=function(t,e){var i=this.getLinkOrThrow(t,"readlink").getNode();if(!i.isSymlink())throw Q(V,"readlink",t);var r=o+i.symlink.join(o);return A.strToEncoding(r,e)},t.prototype.readlinkSync=function(t,e){var i=ot(e),r=Rt(t);return this.readlinkBase(r,i.encoding)},t.prototype.readlink=function(t,e,i){var r=at(e,i),n=r[0],s=r[1],o=Rt(t);this.wrapAsync(this.readlinkBase,[o,n.encoding],s)},t.prototype.fsyncBase=function(t){this.getFileByFdOrThrow(t,"fsync")},t.prototype.fsyncSync=function(t){this.fsyncBase(t)},t.prototype.fsync=function(t,e){this.wrapAsync(this.fsyncBase,[t],e)},t.prototype.fdatasyncBase=function(t){this.getFileByFdOrThrow(t,"fdatasync")},t.prototype.fdatasyncSync=function(t){this.fdatasyncBase(t)},t.prototype.fdatasync=function(t,e){this.wrapAsync(this.fdatasyncBase,[t],e)},t.prototype.ftruncateBase=function(t,e){this.getFileByFdOrThrow(t,"ftruncate").truncate(e)},t.prototype.ftruncateSync=function(t,e){this.ftruncateBase(t,e)},t.prototype.ftruncate=function(t,e,i){var r="number"==typeof e?e:0,n=rt("number"==typeof e?i:e);this.wrapAsync(this.ftruncateBase,[t,r],n)},t.prototype.truncateBase=function(t,e){var i=this.openSync(t,"r+");try{this.ftruncateSync(i,e)}finally{this.closeSync(i)}},t.prototype.truncateSync=function(t,e){if(Dt(t))return this.ftruncateSync(t,e);this.truncateBase(t,e)},t.prototype.truncate=function(t,e,i){var r="number"==typeof e?e:0,n=rt("number"==typeof e?i:e);if(Dt(t))return this.ftruncate(t,r,n);this.wrapAsync(this.truncateBase,[t,r],n)},t.prototype.futimesBase=function(t,e,i){var r=this.getFileByFdOrThrow(t,"futimes").node;r.atime=new Date(1e3*e),r.mtime=new Date(1e3*i)},t.prototype.futimesSync=function(t,e,i){this.futimesBase(t,Gt(e),Gt(i))},t.prototype.futimes=function(t,e,i,r){this.wrapAsync(this.futimesBase,[t,Gt(e),Gt(i)],r)},t.prototype.utimesBase=function(t,e,i){var r=this.openSync(t,"r+");try{this.futimesBase(r,e,i)}finally{this.closeSync(r)}},t.prototype.utimesSync=function(t,e,i){this.utimesBase(Rt(t),Gt(e),Gt(i))},t.prototype.utimes=function(t,e,i,r){this.wrapAsync(this.utimesBase,[Rt(t),Gt(e),Gt(i)],r)},t.prototype.mkdirBase=function(t,e){var i=bt(t);if(!i.length)throw Q(q,"mkdir",t);var r=this.getLinkParentAsDirOrThrow(t,"mkdir"),n=i[i.length-1];if(r.getChild(n))throw Q(j,"mkdir",t);r.createChild(n,this.createNode(!0,e))},t.prototype.mkdirpBase=function(t,e){for(var i=bt(t),r=this.root,n=0;n<i.length;n++){var s=i[n];if(!r.getNode().isDirectory())throw Q($,"mkdir",r.getPath());var o=r.getChild(s);if(o){if(!o.getNode().isDirectory())throw Q($,"mkdir",o.getPath());r=o}else r=r.createChild(s,this.createNode(!0,e))}},t.prototype.mkdirSync=function(t,e){var i=It(e),r=Pt(i.mode,511),n=Rt(t);i.recursive?this.mkdirpBase(n,r):this.mkdirBase(n,r)},t.prototype.mkdir=function(t,e,i){var r=It(e),n=rt("function"==typeof e?e:i),s=Pt(r.mode,511),o=Rt(t);r.recursive?this.wrapAsync(this.mkdirpBase,[o,s],n):this.wrapAsync(this.mkdirBase,[o,s],n)},t.prototype.mkdirpSync=function(t,e){this.mkdirSync(t,{mode:e,recursive:!0})},t.prototype.mkdirp=function(t,e,i){var r="function"==typeof e?void 0:e,n=rt("function"==typeof e?e:i);this.mkdir(t,{mode:r,recursive:!0},n)},t.prototype.mkdtempBase=function(t,e,i){void 0===i&&(i=5);var r=t+this.genRndStr();try{return this.mkdirBase(r,511),A.strToEncoding(r,e)}catch(r){if(r.code===j){if(i>1)return this.mkdtempBase(t,e,i-1);throw Error("Could not create temp dir.")}throw r}},t.prototype.mkdtempSync=function(t,e){var i=ot(e).encoding;if(!t||"string"!=typeof t)throw new TypeError("filename prefix is required");return Lt(t),this.mkdtempBase(t,i)},t.prototype.mkdtemp=function(t,e,i){var r=at(e,i),n=r[0].encoding,s=r[1];if(!t||"string"!=typeof t)throw new TypeError("filename prefix is required");Lt(t)&&this.wrapAsync(this.mkdtempBase,[t,n],s)},t.prototype.rmdirBase=function(t,e){var i=At(e),r=this.getLinkAsDirOrThrow(t,"rmdir");if(r.length&&!i.recursive)throw Q(J,"rmdir",t);this.deleteLink(r)},t.prototype.rmdirSync=function(t,e){this.rmdirBase(Rt(t),e)},t.prototype.rmdir=function(t,e,i){var r=At(e),n=rt("function"==typeof e?e:i);this.wrapAsync(this.rmdirBase,[Rt(t),r],n)},t.prototype.fchmodBase=function(t,e){this.getFileByFdOrThrow(t,"fchmod").chmod(e)},t.prototype.fchmodSync=function(t,e){this.fchmodBase(t,Pt(e))},t.prototype.fchmod=function(t,e,i){this.wrapAsync(this.fchmodBase,[t,Pt(e)],i)},t.prototype.chmodBase=function(t,e){var i=this.openSync(t,"r+");try{this.fchmodBase(i,e)}finally{this.closeSync(i)}},t.prototype.chmodSync=function(t,e){var i=Pt(e),r=Rt(t);this.chmodBase(r,i)},t.prototype.chmod=function(t,e,i){var r=Pt(e),n=Rt(t);this.wrapAsync(this.chmodBase,[n,r],i)},t.prototype.lchmodBase=function(t,e){var i=this.openBase(t,O,0,!1);try{this.fchmodBase(i,e)}finally{this.closeSync(i)}},t.prototype.lchmodSync=function(t,e){var i=Pt(e),r=Rt(t);this.lchmodBase(r,i)},t.prototype.lchmod=function(t,e,i){var r=Pt(e),n=Rt(t);this.wrapAsync(this.lchmodBase,[n,r],i)},t.prototype.fchownBase=function(t,e,i){this.getFileByFdOrThrow(t,"fchown").chown(e,i)},t.prototype.fchownSync=function(t,e,i){kt(e),Ht(i),this.fchownBase(t,e,i)},t.prototype.fchown=function(t,e,i,r){kt(e),Ht(i),this.wrapAsync(this.fchownBase,[t,e,i],r)},t.prototype.chownBase=function(t,e,i){this.getResolvedLinkOrThrow(t,"chown").getNode().chown(e,i)},t.prototype.chownSync=function(t,e,i){kt(e),Ht(i),this.chownBase(Rt(t),e,i)},t.prototype.chown=function(t,e,i,r){kt(e),Ht(i),this.wrapAsync(this.chownBase,[Rt(t),e,i],r)},t.prototype.lchownBase=function(t,e,i){this.getLinkOrThrow(t,"lchown").getNode().chown(e,i)},t.prototype.lchownSync=function(t,e,i){kt(e),Ht(i),this.lchownBase(Rt(t),e,i)},t.prototype.lchown=function(t,e,i,r){kt(e),Ht(i),this.wrapAsync(this.lchownBase,[Rt(t),e,i],r)},t.prototype.watchFile=function(t,e,i){var r=Rt(t),n=e,s=i;if("function"==typeof n&&(s=e,n=null),"function"!=typeof s)throw Error('"watchFile()" requires a listener function');var o=5007,a=!0;n&&"object"==typeof n&&("number"==typeof n.interval&&(o=n.interval),"boolean"==typeof n.persistent&&(a=n.persistent));var c=this.statWatchers[r];return c||((c=new this.StatWatcher).start(r,a,o),this.statWatchers[r]=c),c.addListener("change",s),c},t.prototype.unwatchFile=function(t,e){var i=Rt(t),r=this.statWatchers[i];r&&("function"==typeof e?r.removeListener("change",e):r.removeAllListeners("change"),0===r.listenerCount("change")&&(r.stop(),delete this.statWatchers[i]))},t.prototype.createReadStream=function(t,e){return new this.ReadStream(t,e)},t.prototype.createWriteStream=function(t,e){return new this.WriteStream(t,e)},t.prototype.watch=function(t,e,i){var r=Rt(t),n=e;"function"==typeof e&&(i=e,n=null);var s=ot(n),o=s.persistent,a=s.recursive,c=s.encoding;void 0===o&&(o=!0),void 0===a&&(a=!1);var h=new this.FSWatcher;return h.start(r,o,a,c),i&&h.addListener("change",i),h},t.fd=2147483647,t}();function Ut(t){t.emit("stop")}e.Volume=Mt;var xt,Yt=function(t){function e(e){var i=t.call(this)||this;return i.onInterval=function(){try{var t=i.vol.statSync(i.filename);i.hasChanged(t)&&(i.emit("change",t,i.prev),i.prev=t)}finally{i.loop()}},i.vol=e,i}return n(e,t),e.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},e.prototype.hasChanged=function(t){return t.mtimeMs>this.prev.mtimeMs||t.nlink!==this.prev.nlink},e.prototype.start=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=5007),this.filename=Rt(t),this.setTimeout=e?setTimeout:S.default,this.interval=i,this.prev=this.vol.statSync(this.filename),this.loop()},e.prototype.stop=function(){clearTimeout(this.timeoutRef),d.default.nextTick(Ut,this)},e}(E.EventEmitter);function Kt(t,e,i){if(!(this instanceof Kt))return new Kt(t,e,i);if(this._vol=t,void 0===(i=g({},et(i,{}))).highWaterMark&&(i.highWaterMark=65536),p.Readable.call(this,i),this.path=Rt(e),this.fd=void 0===i.fd?null:i.fd,this.flags=void 0===i.flags?"r":i.flags,this.mode=void 0===i.mode?438:i.mode,this.start=i.start,this.end=i.end,this.autoClose=void 0===i.autoClose||i.autoClose,this.pos=void 0,this.bytesRead=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",(function(){this.autoClose&&this.destroy&&this.destroy()}))}function Vt(t){this.close()}function jt(t,e,i){if(!(this instanceof jt))return new jt(t,e,i);if(this._vol=t,i=g({},et(i,{})),p.Writable.call(this,i),this.path=Rt(e),this.fd=void 0===i.fd?null:i.fd,this.flags=void 0===i.flags?"w":i.flags,this.mode=void 0===i.mode?438:i.mode,this.start=i.start,this.autoClose=void 0===i.autoClose||!!i.autoClose,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}i.encoding&&this.setDefaultEncoding(i.encoding),"number"!=typeof this.fd&&this.open(),this.once("finish",(function(){this.autoClose&&this.close()}))}e.StatWatcher=Yt,T.inherits(Kt,p.Readable),e.ReadStream=Kt,Kt.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(function(e,i){if(e)return t.autoClose&&t.destroy&&t.destroy(),void t.emit("error",e);t.fd=i,t.emit("open",i),t.read()}))},Kt.prototype._read=function(t){if("number"!=typeof this.fd)return this.once("open",(function(){this._read(t)}));if(!this.destroyed){var e;(!xt||xt.length-xt.used<128)&&(e=this._readableState.highWaterMark,(xt=f.bufferAllocUnsafe(e)).used=0);var i=xt,r=Math.min(xt.length-xt.used,t),n=xt.used;if(void 0!==this.pos&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);var s=this;this._vol.read(this.fd,xt,xt.used,r,this.pos,(function(t,e){if(t)s.autoClose&&s.destroy&&s.destroy(),s.emit("error",t);else{var r=null;e>0&&(s.bytesRead+=e,r=i.slice(n,n+e)),s.push(r)}})),void 0!==this.pos&&(this.pos+=r),xt.used+=r}},Kt.prototype._destroy=function(t,e){this.close((function(i){e(t||i)}))},Kt.prototype.close=function(t){var e=this;if(t&&this.once("close",t),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd?void this.once("open",Vt):d.default.nextTick((function(){return e.emit("close")}));this.closed=!0,this._vol.close(this.fd,(function(t){t?e.emit("error",t):e.emit("close")})),this.fd=null},T.inherits(jt,p.Writable),e.WriteStream=jt,jt.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){if(t)return this.autoClose&&this.destroy&&this.destroy(),void this.emit("error",t);this.fd=e,this.emit("open",e)}.bind(this))},jt.prototype._write=function(t,e,i){if(!(t instanceof f.Buffer))return this.emit("error",new Error("Invalid data"));if("number"!=typeof this.fd)return this.once("open",(function(){this._write(t,e,i)}));var r=this;this._vol.write(this.fd,t,0,t.length,this.pos,(function(t,e){if(t)return r.autoClose&&r.destroy&&r.destroy(),i(t);r.bytesWritten+=e,i()})),void 0!==this.pos&&(this.pos+=t.length)},jt.prototype._writev=function(t,e){if("number"!=typeof this.fd)return this.once("open",(function(){this._writev(t,e)}));for(var i=this,r=t.length,n=new Array(r),s=0,o=0;o<r;o++){var a=t[o].chunk;n[o]=a,s+=a.length}var c=f.Buffer.concat(n);this._vol.write(this.fd,c,0,c.length,this.pos,(function(t,r){if(t)return i.destroy&&i.destroy(),e(t);i.bytesWritten+=r,e()})),void 0!==this.pos&&(this.pos+=s)},jt.prototype._destroy=Kt.prototype._destroy,jt.prototype.close=Kt.prototype.close,jt.prototype.destroySoon=jt.prototype.end;var $t=function(t){function e(e){var i=t.call(this)||this;return i._filename="",i._filenameEncoded="",i._recursive=!1,i._encoding=A.ENCODING_UTF8,i._onNodeChange=function(){i._emit("change")},i._onParentChild=function(t){t.getName()===i._getName()&&i._emit("rename")},i._emit=function(t){i.emit("change",t,i._filenameEncoded)},i._persist=function(){i._timer=setTimeout(i._persist,1e6)},i._vol=e,i}return n(e,t),e.prototype._getName=function(){return this._steps[this._steps.length-1]},e.prototype.start=function(t,e,i,r){void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===r&&(r=A.ENCODING_UTF8),this._filename=Rt(t),this._steps=bt(this._filename),this._filenameEncoded=A.strToEncoding(this._filename),this._recursive=i,this._encoding=r;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(t){var n=new Error("watch "+this._filename+" "+t.code);throw n.code=t.code,n.errno=t.code,n}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange);var s=this._link.parent;s&&(s.setMaxListeners(s.getMaxListeners()+1),s.on("child:delete",this._onParentChild)),e&&this._persist()},e.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var t=this._link.parent;t&&t.removeListener("child:delete",this._onParentChild)},e}(E.EventEmitter);e.FSWatcher=$t},6470:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function i(t,e){for(var i,r="",n=0,s=-1,o=0,a=0;a<=t.length;++a){if(a<t.length)i=t.charCodeAt(a);else{if(47===i)break;i=47}if(47===i){if(s===a-1||1===o);else if(s!==a-1&&2===o){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",n=0):n=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),s=a,o=0;continue}}else if(2===r.length||1===r.length){r="",n=0,s=a,o=0;continue}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),n=a-s-1;s=a,o=0}else 46===i&&-1!==o?++o:o=-1}return r}var r={resolve:function(){for(var t,r="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o;s>=0?o=arguments[s]:(void 0===t&&(t=process.cwd()),o=t),e(o),0!==o.length&&(r=o+"/"+r,n=47===o.charCodeAt(0))}return r=i(r,!n),n?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(e(t),0===t.length)return".";var r=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1);return 0!==(t=i(t,!r)).length||r||(t="."),t.length>0&&n&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,i=0;i<arguments.length;++i){var n=arguments[i];e(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":r.normalize(t)},relative:function(t,i){if(e(t),e(i),t===i)return"";if((t=r.resolve(t))===(i=r.resolve(i)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var s=t.length,o=s-n,a=1;a<i.length&&47===i.charCodeAt(a);++a);for(var c=i.length-a,h=o<c?o:c,l=-1,u=0;u<=h;++u){if(u===h){if(c>h){if(47===i.charCodeAt(a+u))return i.slice(a+u+1);if(0===u)return i.slice(a+u)}else o>h&&(47===t.charCodeAt(n+u)?l=u:0===u&&(l=0));break}var f=t.charCodeAt(n+u);if(f!==i.charCodeAt(a+u))break;47===f&&(l=u)}var _="";for(u=n+l+1;u<=s;++u)u!==s&&47!==t.charCodeAt(u)||(0===_.length?_+="..":_+="/..");return _.length>0?_+i.slice(a+l):(a+=l,47===i.charCodeAt(a)&&++a,i.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var i=t.charCodeAt(0),r=47===i,n=-1,s=!0,o=t.length-1;o>=1;--o)if(47===(i=t.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?r?"/":".":r&&1===n?"//":t.slice(0,n)},basename:function(t,i){if(void 0!==i&&"string"!=typeof i)throw new TypeError('"ext" argument must be a string');e(t);var r,n=0,s=-1,o=!0;if(void 0!==i&&i.length>0&&i.length<=t.length){if(i.length===t.length&&i===t)return"";var a=i.length-1,c=-1;for(r=t.length-1;r>=0;--r){var h=t.charCodeAt(r);if(47===h){if(!o){n=r+1;break}}else-1===c&&(o=!1,c=r+1),a>=0&&(h===i.charCodeAt(a)?-1==--a&&(s=r):(a=-1,s=c))}return n===s?s=c:-1===s&&(s=t.length),t.slice(n,s)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!o){n=r+1;break}}else-1===s&&(o=!1,s=r+1);return-1===s?"":t.slice(n,s)},extname:function(t){e(t);for(var i=-1,r=0,n=-1,s=!0,o=0,a=t.length-1;a>=0;--a){var c=t.charCodeAt(a);if(47!==c)-1===n&&(s=!1,n=a+1),46===c?-1===i?i=a:1!==o&&(o=1):-1!==i&&(o=-1);else if(!s){r=a+1;break}}return-1===i||-1===n||0===o||1===o&&i===n-1&&i===r+1?"":t.slice(i,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var i=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return i?i===e.root?i+r:i+"/"+r:r}(0,t)},parse:function(t){e(t);var i={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return i;var r,n=t.charCodeAt(0),s=47===n;s?(i.root="/",r=1):r=0;for(var o=-1,a=0,c=-1,h=!0,l=t.length-1,u=0;l>=r;--l)if(47!==(n=t.charCodeAt(l)))-1===c&&(h=!1,c=l+1),46===n?-1===o?o=l:1!==u&&(u=1):-1!==o&&(u=-1);else if(!h){a=l+1;break}return-1===o||-1===c||0===u||1===u&&o===c-1&&o===a+1?-1!==c&&(i.base=i.name=0===a&&s?t.slice(1,c):t.slice(a,c)):(0===a&&s?(i.name=t.slice(1,o),i.base=t.slice(1,c)):(i.name=t.slice(a,o),i.base=t.slice(a,c)),i.ext=t.slice(o,c)),a>0?i.dir=t.slice(0,a-1):s&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r},1353:(t,e,i)=>{t.exports=i(6417).randomBytes},7963:(t,e,i)=>{"use strict";function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var n=i(9509),s=i(1353),o=n.Buffer,a=n.kMaxLength,c=global.crypto||global.msCrypto,h=Math.pow(2,32)-1;function l(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>h||t<0)throw new TypeError("offset must be a uint32");if(t>a||t>e)throw new RangeError("offset out of range")}function u(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>h||t<0)throw new TypeError("size must be a uint32");if(t+e>i||t>a)throw new RangeError("buffer too small")}function f(t,e,i,r){if(process.browser){var n=t.buffer,o=new Uint8Array(n,e,i);return c.getRandomValues(o),r?void process.nextTick((function(){r(null,t)})):t}if(!r)return s(i).copy(t,e),t;s(i,(function(i,n){if(i)return r(i);n.copy(t,e),r(null,t)}))}c&&c.getRandomValues||!process.browser?(e.randomFill=function(t,e,i,r){if(!(o.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)r=e,e=0,i=t.length;else if("function"==typeof i)r=i,i=t.length-e;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return l(e,t.length),u(i,e,t.length),f(t,e,i,r)},e.randomFillSync=function(t,e,i){if(void 0===e&&(e=0),!(o.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(e,t.length),void 0===i&&(i=t.length-e),u(i,e,t.length),f(t,e,i)}):(e.randomFill=r,e.randomFillSync=r)},9496:(t,e,i)=>{var r=i(6417);"function"==typeof r.randomFill&&"function"==typeof r.randomFillSync?(e.randomFill=r.randomFill,e.randomFillSync=r.randomFillSync):t.exports=i(7963)},9509:(t,e,i)=>{var r=i(4293),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},3907:(t,e,i)=>{"use strict";var r,n;i.d(e,{J:()=>r,T:()=>n}),r="undefined"!=typeof TextEncoder?t=>(new TextEncoder).encode(t):t=>Buffer.from(t),n="undefined"!=typeof TextDecoder?t=>(new TextDecoder).decode(t):t=>Buffer.from(t).toString("utf-8")},1874:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});const r={0:[0,97,115,109,1,0,0,0,1,5,1,96,0,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,6,1,4,0,16,0,11],1:[0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,8,1,6,0,32,0,16,0,11],2:[0,97,115,109,1,0,0,0,1,7,1,96,2,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,10,1,8,0,32,0,32,1,16,0,11],3:[0,97,115,109,1,0,0,0,1,8,1,96,3,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,12,1,10,0,32,0,32,1,32,2,16,0,11],4:[0,97,115,109,1,0,0,0,1,9,1,96,4,127,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,14,1,12,0,32,0,32,1,32,2,32,3,16,0,11],5:[0,97,115,109,1,0,0,0,1,10,1,96,5,127,127,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,16,1,14,0,32,0,32,1,32,2,32,3,32,4,16,0,11],6:[0,97,115,109,1,0,0,0,1,11,1,96,6,127,127,127,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,18,1,16,0,32,0,32,1,32,2,32,3,32,4,32,5,16,0,11],7:[0,97,115,109,1,0,0,0,1,12,1,96,7,127,127,127,127,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,20,1,18,0,32,0,32,1,32,2,32,3,32,4,32,5,32,6,16,0,11],8:[0,97,115,109,1,0,0,0,1,13,1,96,8,127,127,127,127,127,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,22,1,20,0,32,0,32,1,32,2,32,3,32,4,32,5,32,6,32,7,16,0,11],9:[0,97,115,109,1,0,0,0,1,14,1,96,9,127,127,127,127,127,127,127,127,127,1,127,2,16,1,3,101,110,118,8,100,101,108,101,103,97,116,101,0,0,3,2,1,0,7,8,1,4,103,108,117,101,0,1,10,24,1,22,0,32,0,32,1,32,2,32,3,32,4,32,5,32,6,32,7,32,8,16,0,11]}},2692:(t,e,i)=>{"use strict";i.d(e,{R:()=>s});var r,n=i(1874);class s{constructor(t){this.core=t}preload(t,e,i){if(this.dylibTable||(this.dylibTable=new r.Table),!this.dylibTable.def.has(t))return this.core.fetchCompile(e).then((n=>{this.dylibTable.def.set(t,new r.Def(n,i,{path:t,uri:e}))}))}get import(){return c(this,["dlopen","dlsym","dlclose"])}get extlib(){return c(this,["dlerror_get"])}dlopen(t,e){var i=this.userGetCString(t).toString("utf-8");if(this.core.trace.syscalls(`dlopen("${i}", ${e})`),!this.dylibTable)return 0;var r=this.dylibTable.def.get(i);if(r){var n=r.instantiate(this.core),s=this.dylibTable.ref.size+1;return this.dylibTable.ref.set(s,{def:r,instance:n}),s}return 0}dlsym(t,e){var i,r,n=this.userGetCString(e).toString("utf-8");this.core.trace.syscalls(`dlsym(${t}, "${n}")`);var s=this.dylibTable.ref.get(t);if(s){var o=s.instance.exports[n];if(o&&o instanceof Function)return this.allocateFunc(o);var a=null===(r=null===(i=s.def.reloc)||void 0===i?void 0:i.js)||void 0===r?void 0:r[n],c=a&&this.allocateDelegate(a);if(void 0!==c)return c}return 0}dlclose(t){}dlerror_get(t){return this.userCStringMalloc("not found\0",t)}allocateFunc(t){var e=this.core.proc.funcTable.grow(1);return this.core.proc.funcTable.set(e,t),e}allocateDelegate(t){var e=n.Z[t.length];if(e){var i=new WebAssembly.Module(new Uint8Array(e)),r=new WebAssembly.Instance(i,{env:{delegate:t}});return this.allocateFunc(r.exports.glue)}console.warn(`cannot delegate function with ${t.length} arguments:`,t)}userGetCString(t){return this.core.proc.userGetCString(t)}userCStringMalloc(t,e){return this.core.proc.userCStringMalloc(t,e)}}!function(t){t.Table=class{constructor(){this.def=new Map,this.ref=new Map}},t.Def=class{constructor(t,e={},i={}){this.stackSize=65536,this.memBlocks=10,this.tblSize=1024,this.module=t,this.reloc=e,this.metadata=i}instantiate(t){var e=t.wasi.memory.buffer.byteLength+this.stackSize,i=t.proc.funcTable.length;t.wasi.memory.grow(this.memBlocks),t.proc.funcTable.grow(this.tblSize);var r=this.globals(this.module,t.wasm.instance),n=new WebAssembly.Instance(this.module,{env:{memory:t.wasi.memory,table:t.proc.funcTable,__indirect_function_table:t.proc.funcTable,__memory_base:e,__table_base:i,__stack_pointer:this._mkglobal(e),stackSave:()=>e,stackRestore:()=>{},...this.relocTable(this.module,t.wasm.instance,t.proc.import),...this.emglobals(this.module,e,t.wasm.instance,(()=>n))},...r,wasik_ext:t.proc.extlib});this.globalsInit(n,e,r["GOT.mem"]||{});var s=n.exports.__post_instantiate;s instanceof Function&&s();var o=n.exports.__wasm_call_ctors;return o instanceof Function&&o(),n}relocTable(t,e,i){var r,n=WebAssembly.Module.imports(t),s={};for(let t of n)if("env"==t.module&&"function"===t.kind){var o=(null===(r=this.reloc.js)||void 0===r?void 0:r[t.name])||e.exports[a[t.name]||t.name]||i[t.name];o instanceof Function?s[t.name]=o:(console.warn("unresolved symbol:",t,"\nin",this.metadata),s[t.name]=()=>0)}return s}globals(t,e){var i,r,n=WebAssembly.Module.imports(t),s={};for(let t of n)if("global"===t.kind&&t.module.match(o)){var a=e.exports[t.name];null!==(i=s[r=t.module])&&void 0!==i||(s[r]={}),s[t.module][t.name]=this._mkglobal(a instanceof WebAssembly.Global?a.value:void 0)}return s}globalsInit(t,e,i){for(let n in i){var r=t.exports[n];r instanceof WebAssembly.Global&&(i[n].value=e+r.value)}}emglobals(t,e,i,r){var n=WebAssembly.Module.imports(t),s=WebAssembly.Module.exports(t),o={};for(let t of n)if("function"===t.kind&&t.name.startsWith("g$")){let n,a=t.name.slice(2);(n=i.exports[a])?o[t.name]=()=>n:(n=s.find((t=>t.name==a)))&&(o[t.name]=()=>{return t=a,e+ +r().exports[t];var t})}return o}_mkglobal(t=3735928559){return new WebAssembly.Global({value:"i32",mutable:!0},t)}}}(r||(r={}));const o=/^GOT[.]/,a={fiprintf:"fprintf"};function c(t,e){return e.reduce(((e,i)=>Object.assign(e,{[i]:t[i].bind(t)})),{})}},1641:(t,e,i)=>{"use strict";i.d(e,{fs:()=>n});const r={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_DSYNC:4194304,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1},n=new class{constructor(){this.constants=r}strmode(t){let e="";return e+={[r.S_IFDIR]:"d",[r.S_IFCHR]:"c",[r.S_IFBLK]:"b",[r.S_IFREG]:"-",[r.S_IFLNK]:"l",[r.S_IFSOCK]:"s",[r.S_IFIFO]:"p"}[t&r.S_IFMT]||"?",e+=t&r.S_IRUSR?"r":"-",e+=t&r.S_IWUSR?"w":"-",e+=t&r.S_IXUSR?"x":"-",e+=t&r.S_IRGRP?"r":"-",e+=t&r.S_IWGRP?"w":"-",e+=t&r.S_IXGRP?"x":"-",e+=t&r.S_IROTH?"r":"-",e+=t&r.S_IWOTH?"w":"-",e+=t&r.S_IXOTH?"x":"-",e}}},1054:(t,e,i)=>{"use strict";i.d(e,{p:()=>S,w:()=>E});var r=i(2357),n=i.n(r),s=i(5622),o=i.n(s),a=i(8614),c=i(2055),h=i(3590),l=i(4293),u=i(44),f=i(2692),_=i(1641),d=i(3907);class S extends a.EventEmitter{constructor(t,e={}){super(),this.core=t,this.opts=e,this.sigvec=new E,this.sigvec.on("signal",(t=>this.emit("syscall",{func:"signal",data:t}))),this.childq=new u.W({data:new Uint32Array(new m(512))}),this.childset=new Set,this.dyld=new f.R(t),this.pending=[]}init(){const t=this.newfd()+1,e={real:t,rights:I,filetype:c.WASI_FILETYPE_DIRECTORY,path:".",fakePath:"."};this.core.wasi.FD_MAP.set(p,e),this.core.wasi.FD_MAP.set(t,e),this.core.wasmFs.fs.writeFileSync("/dev/null","")}get import(){return this.sigvec.debug=this.debug,this.funcTable||(this.funcTable=new WebAssembly.Table({initial:this.opts.funcTableSz||1024,element:"anyfunc"})),{...h.Z,__indirect_function_table:this.funcTable,...v(this,["geteuid","strmode","__control_setjmp","__control_setjmp_with_return","setjmp","longjmp","sigsetjmp","siglongjmp","vfork","__control_fork","wait","wait3","execve","sigkill","sigsuspend","sigaction","getpagesize","posix_spawn"]),...this.dyld.import}}get extlib(){return{...v(this,["trace","sorry","dupfd","progname_get","login_get"]),...this.dyld.extlib}}get path(){return{...o(),resolve:(t,...e)=>("."==t&&(t=this.core.env.PWD),o().resolve(t||"/",...e))}}get mem(){return this.core.wasi.refreshMemory(),this.core.wasi.view}get membuf(){return l.Buffer.from(this.core.wasi.memory.buffer)}sorry(){for(var t;t=this.pending.pop();t());}getenv_all(){var t=this.core.wasm.instance.exports.wasik_environ;return"function"==typeof t?this.parse_env(t()):{}}parse_env(t){var e={};for(let i of this.userGetCStrings(t))this._parse_envvar(i,e);return e}_parse_envvar(t,e){try{var i=(new TextDecoder).decode(t),r=i.match(/^(.*?)=(.*)$/);r?e[r[1]]=r[2]:console.warn(`invalid envvar? '${i}'`)}catch(t){console.warn("parse_env",t)}}progname_get(t){var e=this.core.argv[0]+"\0";return this.userCStringMalloc(e,t)}login_get(t){return this.userCStringMalloc("user\0",t)}geteuid(){return 0}trace(t){var e=this.userGetCString(t);this.core.trace.user(e)}realpath(t,e){var i=this.userGetCString(t);if(0===e)throw"realpath(0): not implemented";let r=o().resolve(this.core.env.PWD,(0,d.T)(i))+"\0";if(r.length>A)throw{errno:1,code:"ERANGE"};return this.membuf.write(r,e),e}newfd(t=0){var e=Math.max(...this.core.wasi.FD_MAP.keys());return Math.max(t,e+1)}dupfd(t,e,i){this.core.trace.syscalls(`dupfd(${t}, ${e}, ${i}`);var r=this.core.wasi.FD_MAP.get(t);if(!r)return-1;var n=this.newfd(e);return this.core.wasi.FD_MAP.set(n,this.dupdesc(r)),n}dupdesc(t){var e=this.core.wasmFs.volume.openSync("/","r"),i=this.core.wasmFs.volume.fds;return i[e]=i[t.real],Object.assign({},t,{real:e})}strmode(t,e){let i=_.fs.strmode(t)+"\0";this.membuf.write(i,e)}__control_setjmp(t,e){this.debug(`__control_setjmp [${t}, ${e}]`),this.mem.setUint32(t,0);let i=this.blockImpl(e),r=0;try{for(;;)try{return i(r)}catch(e){if(this.debug(`setjmp caught ${JSON.stringify(e)}`),!(e instanceof T&&e.env==t))throw e;r=e.val}}finally{this.debug("__control_setjmp exiting")}}__control_setjmp_with_return(t,e){return this.__control_setjmp(t,e)}setjmp(t){return console.warn("setjmp",t),0}longjmp(t,e){throw this.debug(`longjmp [${t}] ${e}`),new T(t,e)}sigsetjmp(t,e){return this.core.trace.syscalls(`sigsetjmp(${t}, ${e})`),0}siglongjmp(t,e){this.longjmp(t,e)}vfork(){this.core.trace.syscalls("vfork()");var t=Math.max(0,...this.childset)+1;return this.childset.add(t),this.onJoin=e=>{if(!(e instanceof g))throw e;{let i=e;this.emit("syscall",{func:"spawn",data:{pid:t,execv:i.copy(),env:this.getenv_all()}})}},t}__control_fork(t,e,i){let r=this.blockImpl(i);try{r(t),this.onJoin&&this.onJoin(null)}catch(t){this.onJoin&&this.onJoin(t)}this.onJoin=null,r(e)}execve(t,e,i){throw this.core.trace.syscalls(`execv(${t}, ${e}, ${i})`),new g((0,d.T)(this.userGetCString(t)),this.userGetCStrings(e),this.userGetCStrings(i))}posix_spawn(t,e,i,r,n,s){var o=(0,d.T)(this.userGetCString(e));this.core.trace.syscalls(`posix_spawn(${t}, "${o}", ${i}, ${r}, ...})`);var a=new g(o,this.userGetCStrings(n),this.userGetCStrings(s)),c=Math.max(0,...this.childset)+1;return this.emit("syscall",{func:"spawn",data:{pid:c,execv:a,env:this.core.env}}),this.mem.setUint32(t,c,!0),0}wait(t){return this.core.trace.syscalls(`wait(${t})`),this.waitBase(t)}wait3(t,e,i){return this.core.trace.syscalls(`wait3(${t}, ${e}, ${i})`),this.waitBase(t)}waitBase(t){var e=this.childq.dequeue(),i=this.childq.dequeue();return this.debug(`  -> ${e}`),0!==t&&this.mem.setUint32(t,i<<8,!0),e}userGetCString(t){if(0==t)return null;let e=l.Buffer.from(this.core.wasi.memory.buffer);return e.slice(t,e.indexOf(0,t))}userGetCStrings(t){if(0==t)return null;let e=[];for(;;){let i=this.mem.getUint32(t,!0);if(0===i)break;e.push(this.userGetCString(i)),t+=4}return e}userCStringMalloc(t,e){return this.pending.push((()=>{let i=this.mem.getUint32(e,!0);this.membuf.write(t,i)})),t.length}blockImpl(t){let e=this.funcTable.get(this.mem.getUint32(t+12,!0));return(...i)=>e(t,...i)}sigkill(t){this.sigvec.send(t)}sigsuspend(){this.sigvec.receive()}sigaction(t,e,i){if(this.core.trace.syscalls(`sigaction(${t}, ${e}, ${i})`),0!=e){var r=this.mem.getUint32(e,!0),n=this.funcTable.get(r);this.core.trace.syscalls(" --\x3e",r,n),this.sigvec.handlers[t]=n}0!=i&&this.mem.setUint32(i,0)}getpagesize(){return 4096}}const p=-100,I={base:c.RIGHTS_ALL,inheriting:c.RIGHTS_ALL};class E extends a.EventEmitter{constructor(t={}){super(),this.wait=t.wait||new Int32Array(new m(4*y)),this.handlers=Array(y)}static from(t){return new E(t)}to(){return{wait:this.wait}}send(t){n()(0<t&&t<y),Atomics.add(this.wait,0,1),Atomics.add(this.wait,t,1),Atomics.notify(this.wait,0,1)}receive(t){return this._snapshot||(this._snapshot=new Int32Array(y)),Atomics.wait(this.wait,0,Atomics.load(this.wait,0)),this.sweep(t),-1}sweep(t){for(let e=1;e<y;e++)if(!t||t.includes(e)){let t=this.handlers[e];t&&this._snapshot[e]<this.wait[e]&&(this.debug("calling",t),t(e)),this._snapshot[e]=this.wait[e]}}}const A=256,y=20;class g{constructor(t,e,i){this.prog=t,this.argv=e,this.envp=i}copy(){var t=t=>t.map((t=>l.Buffer.from(t)));return new g(this.prog,t(this.argv),t(this.envp))}}class T{constructor(t,e){this.env=t,this.val=e}}const m="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function v(t,e){return e.reduce(((e,i)=>Object.assign(e,{[i]:t[i].bind(t)})),{})}},44:(t,e,i)=>{"use strict";i.d(e,{W:()=>r});class r{constructor(t){this._data=t.data,this._wait=t.wait||new Int32Array(new n(8))}static from(t){return new r(t)}to(){return{data:this._data,wait:this._wait}}enqueue(t){let e=Atomics.load(this._wait,0),i=Atomics.load(this._wait,1);return e?e--:e=this._data.length,e!=i?(Atomics.store(this._data,i++,t),Atomics.store(this._wait,1,i),Atomics.notify(this._wait,1,1),1):0}enqueueAll(t){let e=Atomics.load(this._wait,0),i=Atomics.load(this._wait,1);var r;for(e?e--:e=this._data.length,r=0;e!=i&&r<t.length;r++)Atomics.store(this._data,i++,t[r]);return r>0&&(Atomics.store(this._wait,1,i),Atomics.notify(this._wait,1,1)),r}wait(){let t=Atomics.load(this._wait,0),e=Atomics.load(this._wait,1);for(;t==e;)Atomics.wait(this._wait,1,e),e=Atomics.load(this._wait,1)}dequeue(){this.wait();let t=Atomics.load(this._wait,0),e=Atomics.load(this._data,t++);return Atomics.store(this._wait,0,t),Atomics.notify(this._wait,0,1),e}dequeueSome(t,e,i){if(0==t)return 0;this.wait();let r=Atomics.load(this._wait,0),n=Atomics.load(this._wait,1);var s;for(s=0;r!=n&&i<t;s++)e[i++]=Atomics.load(this._data,r++),n>=this._data.length&&(n=0);return Atomics.store(this._wait,0,r),Atomics.notify(this._wait,0,1),s}isEmpty(){return Atomics.load(this._wait,0)==Atomics.load(this._wait,1)}}const n="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer},3590:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const r={debug:t=>{}};for(let t of["signal","raise","pipe","dup","dup2","dup3","execv","execl","execvp","execlp","getpwnam","getpwnam_r","getpwent","tcsetpgrp","kill","killpg","fork","realpath","getpid","getpgid","setpgid","getpgrp","setpgrp","issetugid","strsignal","wait4","waitpid","getuid","geteuid","getgid","getegid","getsid","setegid","seteuid","setgid","setuid","setsid","umask","getrlimit","setrlimit","getpriority","setpriority","sigfillset","sigprocmask","sigsetmask","siginterrupt","sigaltstack","sigwait","sigpending","getppid","tcgetpgrp","gethostname","tzset","flockfile","ftrylockfile","funlockfile","getpwuid","getpwuid_r","setpwent","endpwent","getgrgid","setreuid","setregid","strmode","acl_get_file","acl_free","acl_get_entry","fchdir","chown","fchown","lchown","fchownat","chmod","fchmod","fchmodat","lchmod","chflags","fchflags","lchflags","chroot","getgroups","utimes","futimes","lutimes","clock_gettime","clock_settime","alarm","system","mkfifo","mkstemp","mkstemps","mkostemp","mkostemps","tmpfile","settimeofday","bsd_signal","ttyname","ttyname_r","ctermid_r","socket","connect","popen","pclose","sync","nice","errx","vwarnx","posix_spawn","posix_spawnp","posix_spawnattr_init","posix_spawnattr_destroy","posix_spawnattr_setflags","posix_spawnattr_setsigmask","posix_spawn_file_actions_init","posix_spawn_file_actions_destroy","posix_spawn_file_actions_addopen","posix_spawn_file_actions_addclose","posix_spawn_file_actions_adddup2","pthread_mutex_init","pthread_mutex_lock","pthread_cond_timedwait","pthread_cond_signal","pthread_mutex_unlock","pthread_cond_destroy","pthread_mutex_destroy","pthread_cond_wait","pthread_cond_init","pthread_attr_init","pthread_attr_setstacksize","pthread_attr_destroy","pthread_create","pthread_detach","pthread_self","pthread_kill","pthread_exit","pthread_mutex_trylock","pthread_key_create","pthread_key_delete","pthread_setspecific","pthread_getspecific","pthread_sigmask","pthread_attr_getscope","pthread_attr_setscope","posix_spawnattr_setpgroup","posix_spawnattr_setsigdefault","tgetent","tgetflag","tgetnum","tgetstr","tgoto","tputs","cfgetospeed","cfgetispeed","cfsetospeed","cfsetispeed","tcsendbreak","tcdrain","tcflush","tcflow","tcgetsid","login","login_tty","logout","logwtmp","opendev","openpty","fparseln","forkpty","pidlock","ttylock","ttyunlock","ttyaction","ttymsg"])r[t]=function(){r.debug(`stub for ${t} [${[...arguments]}]`)};const n=r},2152:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var r,n=i(8614);class s extends n.EventEmitter{constructor(t){super(),this.core=t,this.fds=[],this.stdin_fl=0,this.termios={flags:[258,3,0,10],win:this.defaultWindow()},this.core.on("stream:out",(t=>{this.fds.includes(t.fd)&&this.emit("data",t.data)})),this.debug=()=>{}}to(){return{termios:{win:this.termios.win}}}makeTty(t){this.core.wasi.FD_MAP.get(t).filetype=2,this.core.wasi.FD_MAP.get(t).rights.base&=~BigInt(36)}write(t){this.core.stdin.write(t)}fd_fdstat_set_flags(t,e){return this.debug(`fdstat_set_flags(${t}, ${e})\n`),0===t&&(this.stdin_fl=e,this.core.stdin.blocking=!(4&e)),0}fd_fdstat_get(t,e){var i=this.core.wasi.wasiImport.fd_fdstat_get(t,e);return 0===t&&this.core.proc.mem.setUint16(e+2,this.stdin_fl,!0),i}defaultWindow(){var t=new Uint16Array(new SharedArrayBuffer(4));return t[0]=24,t[1]=80,t}get overrideImport(){return o(this,["fd_fdstat_get","fd_fdstat_set_flags"])}get import(){return o(this,["tcgetattr","tcsetattr","tgetent"])}get extlib(){return o(this,["tty_ioctl"])}tcgetattr(t,e){this.debug(`tcgetattr(${t}, ${e})`);let i=this.core.proc.mem;return this.termios.flags.forEach(((t,r)=>{i.setUint32(e+4*r,t,!0)})),i.setUint8(e+16+1+5,0),i.setUint8(e+16+1+6,1),0}tcsetattr(t,e,i){this.debug(`tcsetattr(${t}, ${e}, ${i})`);let r=this.core.proc.mem,n=a(4).map((t=>r.getUint32(i+4*t,!0))),s=a(32).map((t=>r.getUint8(i+16+1+t)));return this.debug(`  [${n.map((t=>"0"+t.toString(8))).join(", ")}] [${s}]`),this.termios.flags=n,this.core.stdin.blocking=s[6]>0,this.core.proc.emit("syscall",{func:"ioctl:tty",data:{fd:t,when:e,flags:n}}),0}tgetent(t,e){return this.debug(`tgetent(_, '${this.core.proc.userGetCString(e)}')`),1}tty_ioctl(t,e,i){if(console.warn("tty_ioctl",t,e,i),1==t){var n=this.core.proc.mem,s=this.termios.win;switch(e){case r.TIOCGWINSZ:for(let t=0;t<s.length;t++)n.setUint16(i+2*t,s[t],!0);break;case r.TIOCSWINSZ:var o=s.map(((t,e)=>n.getUint16(i+2*e)));this.core.proc.emit("syscall",{func:"ioctl:tty",data:{fd:t,request:e,win:o}})}}}}function o(t,e){return e.reduce(((e,i)=>Object.assign(e,{[i]:t[i].bind(t)})),{})}function a(t){return[...Array(t).keys()]}!function(t){t[t.TCSETFL=1]="TCSETFL",t[t.TIOCGWINSZ=21523]="TIOCGWINSZ",t[t.TIOCSWINSZ=21524]="TIOCSWINSZ"}(r||(r={}))},7098:(t,e,i)=>{"use strict";i.r(e),i.d(e,{WASIExitError:()=>E,ExecCore:()=>S});var r=i(8614),n=i(2357),s=i.n(n),o=i(3818),a=i(6551),c=i(2946),h=i(4189),l=i(7131),u=i(2152),f=i(1054),_=i(3590),d=i(3907);c.WASI.defaultBindings=o.jU||o.n2?i(1311).Z:i(9647).Z;class S extends r.EventEmitter{constructor(t={}){super(),this.debug=I,this.trace={user:I,syscalls:I},this.opts=t=Object.assign({},p,t),this.stdin=t.stdin?new l.w:null,this.wasmFs=new h.Yn,this.populateRootFs(),this.proc=new f.p(this,t.proc),this.tty=t.tty?new u.u(this):null,this.cached=!1!==t.cacheBins?new Map:null,this.init()}initTraces(){var t;this.opts.debug&&(this.debug=this._debugPrint(),this.trace.user=this._tracePrint()),(null===(t=this.opts.trace)||void 0===t?void 0:t.syscalls)&&(this.trace.syscalls=this._tracePrintAny()),this.tty&&(this.tty.debug=(...t)=>this.debug(...t)),this.proc.debug=(...t)=>this.debug(...t),_.Z.debug=this.debug}init(){this.argv=["."],this.env=this.initialEnv(),this.wasi=new c.WASI({args:this.argv,env:this.env,bindings:{...c.WASI.defaultBindings,exit:t=>{throw new E(t)},fs:this.wasmFs.fs,path:this.proc.path},preopens:{"/":"/"},...this.extraWASIConfig()}),this.exited=!1,this.registerStdio(),this.proc.init();let t=this.opts.tty;if(t){var e="number"==typeof t?[t]:"boolean"==typeof t?[0,1,2]:t;this.tty.fds=e;for(let t of e)this.tty.makeTty(t)}}configure(t){Object.assign(this.opts,t)}reset(){this.stdin&&this.stdin.reset(),this.init()}async start(t,e,i){this.exited&&this.reset(),e&&this.argv.splice(0,1/0,...e),i&&Object.assign(this.env,i),this.proc.opts=this.opts.proc||{},this.initTraces();var r=await this.fetchCompile(t),n=await WebAssembly.instantiate(r,this.getImports(r));this.wasm={module:r,instance:n};try{return this.wasi.start(this.wasm.instance),0}catch(t){if(t instanceof E)return t.code;throw t}finally{this.exited=!0}}get fs(){return this.wasmFs.fs}async fetch(t){switch(this.opts.fetchMode){case"browser":const e=await fetch(t);return new Uint8Array(await e.arrayBuffer());case"fs":return(0,i(5747).readFileSync)(t);default:s()(!1,`unknown fetch mode '${this.opts.fetchMode}'`)}}async fetchCompile(t){return i=t,r=async t=>{var e=await this.fetch(t);return WebAssembly.compile(e)},(e=this.cached)?function(t,e,i){let r=t.get(e);return r||(r=i(e),t.set(e,r)),r}(e,i,r):r(i);var e,i,r}getImports(t){var e,i;return{...this.wasi.getImports(t),wasik_ext:{...this.proc.extlib,...null===(e=this.tty)||void 0===e?void 0:e.extlib},env:{...this.proc.import,...null===(i=this.tty)||void 0===i?void 0:i.import}}}share(){return{stdin:this.stdin.to(),tty:this.tty.to(),sigvec:this.proc.sigvec.to(),childq:this.proc.childq.to()}}emitWrite(t,e){return this.emit("stream:out",{fd:t,data:e}),e.length}initialEnv(){return this.opts.env?Object.assign({},this.opts.env):this.defaultEnv()}defaultEnv(){return{PATH:"/bin",PWD:"/home"}}extraWASIConfig(){let t=this.opts;return{traceSyscalls:t.trace&&t.trace.syscalls}}registerStdio(){var t=this.wasmFs.volume;if(!(t.fds[0]&&t.fds[1]&&t.fds[2])){t.releasedFds=[0,1,2];const e=t.openSync("/dev/stderr","w"),i=t.openSync("/dev/stdout","w"),r=t.openSync("/dev/stdin","r");s()(0==r&&1==i&&2==e)}this.stdin&&(t.fds[0].read=this.stdin.read.bind(this.stdin)),t.fds[1].write=t=>this.emitWrite(1,t),t.fds[2].write=t=>this.emitWrite(2,t)}mountFs(t){t.fromJSON(this.wasmFs.volume.toJSON()),this.wasmFs.volume=t,this.wasmFs.fs=(0,a.createFsFromVolume)(t),this.init()}populateRootFs(){this.wasmFs.fs.mkdirSync("/home"),this.wasmFs.fs.mkdirSync("/bin")}_debugPrint(){return global.process?(...t)=>this.emitWrite(2,(0,d.J)(t.join(" ")+"\n")):console.log}_tracePrint(){return global.process?t=>this.emitWrite(2,t):t=>console.warn("[trace]",(0,d.T)(t),t)}_tracePrintAny(){return global.process?(...t)=>this.emitWrite(2,(0,d.J)(t.toString())):(...t)=>console.warn("[trace]",...t)}}const p={stdin:!0,fetchMode:o.jU||o.n2?"browser":"fs"},I=()=>{};class E{constructor(t){this.code=t}}},7131:(t,e,i)=>{"use strict";i.d(e,{w:()=>s,D:()=>o});var r=i(8614),n=i(44);class s extends r.EventEmitter{constructor(t={}){super(),this.queue=n.W.from(t.queue||{data:new Uint8Array(new a(1024))}),this.meta=t.meta||new Int32Array(new a(4)),t.meta||(this.length=-1),this.pos=0,this.blocking=!0}static from(t){return new s(t)}to(){return{queue:this.queue.to(),meta:this.meta}}get length(){return Atomics.load(this.meta,0)}set length(t){Atomics.store(this.meta,0,t)}read(t,e,i,r){if(i>t.length&&(i=t.length),this.queue.isEmpty()){if(e>0)return 0;if(!this.blocking)throw{errno:35,code:"EAGAIN"}}if(this.length>=0&&this.pos>=this.length)return 0;var n=this.queue.dequeueSome(i,t,e);return n>0&&(this.length>=0&&(n=Math.min(this.length-this.pos,n)),this.pos+=n,this.emit("data",t.slice(e,n))),n}write(t){let e=this.queue.enqueueAll(t);return this.pos+=e,e}end(){this.length=this.pos,this.queue.enqueue(0)}reset(){this.length=-1,this.pos=0,this.blocking=!0}}class o extends r.EventEmitter{constructor(t){super(),this.ts=t,this.writer=this.ts.writable.getWriter(),this.reader=this.ts.readable.getReader(),(async()=>{for(;;){let{done:t,value:e}=await this.reader.read();if(e&&this.emit("data",e),t){this.emit("end");break}}})()}write(t){this.writer.write(t)}end(){this.writer.close()}}const a="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer},2357:t=>{"use strict";t.exports=require("assert")},4293:t=>{"use strict";t.exports=require("buffer")},6417:t=>{"use strict";t.exports=require("crypto")},8614:t=>{"use strict";t.exports=require("events")},5747:t=>{"use strict";t.exports=require("fs")},5622:t=>{"use strict";t.exports=require("path")},1765:t=>{"use strict";t.exports=require("process")},2413:t=>{"use strict";t.exports=require("stream")},3867:t=>{"use strict";t.exports=require("tty")},8835:t=>{"use strict";t.exports=require("url")},1669:t=>{"use strict";t.exports=require("util")},5013:t=>{"use strict";t.exports=require("worker_threads")}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,i),s.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.u=t=>t+".index.js",i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="",i.b=require("url").pathToFileURL(__filename);var r={};(()=>{"use strict";i.r(r),i.d(r,{BareProcess:()=>f,ExecCore:()=>d.ExecCore,Process:()=>l,SharedVolume:()=>y,WorkerProcess:()=>u});var t=i(8614),e=i(7131),n=i(1054),s=i(3818);let o,a,c;if(s.n2)o=self.Worker,a=self.postMessage,c=t=>addEventListener("message",t);else if(s.UG){const t=i(5013);class e{constructor(e){this.thread=new t.Worker(e)}addEventListener(t,e){this.thread.on(t,(t=>{e({data:t})}))}postMessage(t){this.thread.postMessage(t)}static onMessage(e){t.parentPort.on("message",(t=>{e({data:t})}))}static postMessage(e){t.parentPort.postMessage(e)}}o=e,c=e.onMessage,a=e.postMessage}var h=i(44);class l extends t.EventEmitter{constructor(t){super(),this.opts=t,this.setupEncoder()?this.stdout=new e.D(new TextDecoderStream):"undefined"!=typeof process&&process.stdin&&(process.stdin.on("data",(t=>this.stdin_raw.write(t))),this.stdout=process.stdout),this.on("exit",(()=>this.exited=!0))}waitFor(){var t,e;return new Promise(((i,r)=>{this.on("error",t=t=>r(t)),this.on("exit",e=t=>i(t))})).finally((()=>{this.removeListener("error",t),this.removeListener("exit",e)}))}reset(){this.exited=!1,this.stdin_raw.reset(),this.setupEncoder()}setupEncoder(){return"undefined"!=typeof TextEncoderStream&&(this.stdin=new e.D(new TextEncoderStream),this.stdin.on("data",(t=>this.stdin_raw.write(t))),this.stdin.on("end",(()=>this.stdin_raw.end())),!0)}}class u extends l{constructor(t,r={}){super(r),this.worker=new o(new URL(i.p+i.u(34),i.b)),this.worker.addEventListener("message",(i=>{i.data.stdin&&(this.stdin_raw=e.w.from(i.data.stdin)),i.data.tty&&(this.tty=i.data.tty),i.data.sigvec&&(this.sigvec=n.w.from(i.data.sigvec)),i.data.childq&&(this.childq=h.W.from(i.data.childq)),i.data.fd&&this.stdout.write(i.data.data),i.data.event&&this.emit(i.data.event,i.data.arg,t)})),t&&this.exec(t)}mountFs(t){return this.worker.postMessage({volume:t.to()}),this}exec(t,e){this.exited&&this.reset(),e&&(this.opts.argv=e),this.worker.postMessage({exec:t,opts:this.opts})}}class f extends l{constructor(t,e={}){super(e),this.exec(t)}async exec(t,e){const{ExecCore:r}=await Promise.resolve().then(i.bind(i,7098));this.core=new r({argv:e,...this.opts}),this.core.on("stream:out",(t=>process.stdout.write(t.data)));try{let e=await this.core.start(t,this.opts.argv);this.emit("exit",{code:e})}catch(e){this.emit("error",e,t)}}}var _,d=i(7098),S=i(6551),p=i(6898),I=i(1172),E=i(2357),A=i.n(E);class y extends S.Volume{constructor(t={}){let e;super({Node:class{constructor(t,i){return new T(e,t,i)}},Link:m}),this.dev=g.from(t.dev),e=this;var i=this.root.getNode();i.vol=this,i._link=this.root,this.debug=()=>{}}static from(t){return new y(t)}to(){return{dev:this.dev.to()}}writeBlob(t,e){var i=this.openSync(t,S.fs.constants.O_CREAT),r=this.fds[i].node,n=this.dev.allocBlob(e.length);n.set(e,0),r.setBlob(n),this.closeSync(i)}createLink(t,e,i,r){const n=super.createLink(t,e,i,r);return t&&this.debug("+ created link",t.ino,e,n.ino),n.push(),n}deleteLink(t){this.debug("deleted link",t.parent.ino,t.getName(),t.ino);var e=t.parent,i=super.deleteLink(t);return e.push(),i}createNode(t=!1,e){if(!this.dev)return super.createNode(t,e);const i=new this.props.Node(this.dev.alloc(),e);return t&&i.setIsDirectory(),this.inodes[i.ino]=i,i.push(),i}getNodeShared(t){return this.inodes[t]||this._fetchNode(t)}createSymlink(t,e){this.symlinkSync("",e);var i=this.getLink((0,p.filenameToSteps)(e)),r=t.split("/");return""==r[0]?r.splice(0,1):r.splice(0,0,"."),i.getNode().makeSymlink(r),i}getResolvedLink(t){let e="string"==typeof t?(0,p.filenameToSteps)(t):t,i=this.root;for(let t=0;t<e.length;){const r=e[t],n=i.getChild(r);if(!n)return null;const s=n.getNode();if(s.isSymlink()){if(e=s.symlink.concat(e.slice(t+1)),t=0,"."!==e[0]){i=this.root;continue}}else i=n;t++}return i}_fetchNode(t){var e=new this.props.Node(t);return this.inodes[t]=e,e}}class g{constructor(t={}){this.raw=t.raw||new SharedArrayBuffer(t.size||1<<20),this.blockSize=t.blockSize||1024,this.blockCount=this.raw.byteLength/this.blockSize,this.bitset=t.bitset||new Uint8Array(new SharedArrayBuffer(this.blockCount)),this.cursors=t.cursors||new Uint32Array(new SharedArrayBuffer(12)),t.cursors||(this.blockCursor=2,this.boundaryCursor=2,this.blobCursor=this.raw.byteLength)}static from(t){return new g(t)}to(){return{raw:this.raw,blockSize:this.blockSize,bitset:this.bitset,cursors:this.cursors}}get(t){var e=t*this.blockSize;return new Uint8Array(this.raw,e,this.blockSize)}isFree(t){return 0==Atomics.load(this.bitset,t)}get blockCursor(){return this.cursors[0]}set blockCursor(t){this.cursors[0]=t}get boundaryCursor(){return this.cursors[1]}set boundaryCursor(t){this.cursors[1]=t}get blobCursor(){return this.cursors[2]}set blobCursor(t){this.cursors[2]=t}alloc(){let t=this.blobCursor/this.blockSize;for(let e=this.blockCursor;e<t;e++)if(0==this.bitset[e]&&0==Atomics.compareExchange(this.bitset,e,0,1))return this.blockCursor=e,this.boundaryCursor=Math.max(this.boundaryCursor,e+1),e;throw new Error("no space left on device")}allocBlob(t){var e=this.blobCursor-t;if(e<this.boundaryCursor*this.blockSize)throw new Error("no space left on device");return this.blobCursor=e,this.getBlob(e,t)}getBlob(t,e){var i=new Uint8Array(this.raw,t,e);return Object.setPrototypeOf(i,Buffer.prototype),i}readText(t,e=0){var i=this.get(t);return i=i.slice(e,i.indexOf(0,e)),{buf:new TextDecoder("utf-8").decode(i),size:i.length+1}}read(t,e=0,i){var r=this.get(t).slice(e,i>=0?e+i:void 0);return{buf:r,size:r.length}}readInto(t,e,i,r,n){var s=this.get(t).subarray(e,e+i);return r.set(s,n),s.length}writeText(t,e,i=0){var r=Buffer.from(e+"\0","utf-8");if(r.length+i>this.blockSize)throw new Error(`inode text overflow (block=${t}, length=${r.length})`);return this.write(t,r,i)}write(t,e,i=0){return i+e.length>this.blockSize&&(e=e.subarray(0,this.blockSize-i)),this.get(t).set(e,i),e.length}}class T extends I.Node{constructor(t,e,i){super(e,i),this.vol=t,this.ver=0,this.isBlob=!1,this._link=null}setModeProperty(t){super.setModeProperty(t),this.ver++,this.push()}getLink(t,e){return this._link||(A()(t&&e),this._link=new m(this.vol,t,e),this._link.setNode(this)),this._link}setBlob(t){this.buf=t,this.isBlob=!0,this.touch()}touch(){super.touch(),this.ver++,this.push()}del(){super.del()}push(){if(this.vol&&this.vol.dev){var t=this.vol.dev.get(this.ino),e={p:this.perm,m:this.mode,v:this.ver},i=this.buf;0!=t[0]&&(e=Object.assign(this._read().header,e)),i&&(e.z=i.length),this.isBlob&&(e.blob=[i.byteOffset],i=void 0),this.symlink&&(e.symlink=this.symlink),this.vol.debug("+ push node",this.ino,e);var r=this._write(e,i);this._writeTrail(i,r)}}pull(){if(this.vol&&0!=this.vol.dev.get(this.ino)[0]){var{header:t,rdc:e}=this._read();if(this.vol.debug("- pull node",this.ino,t),this.perm=t.p,this.mode=t.m,this.symlink=t.symlink,this.symlink&&console.log("symlink",this.symlink),this.ver!=t.v&&(this.ver=t.v,t.z>=0))if(t.blob)this.buf=this.vol.dev.getBlob(t.blob[0],t.z),this.isBlob=!0;else{var i=Buffer.alloc(t.z),r=this.vol.dev.readInto(this.ino,e,t.z,i,0);t.n>0&&this._readTrail(i,r),this.buf=i,this.isBlob=!1}}}_read(){var{buf:t,size:e}=this.vol.dev.readText(this.ino);return{header:JSON.parse(t),rdc:e}}_write(t,e){var i=this._writeJson(t||{});if(e&&i+e.length>this.vol.dev.blockSize){var r=this._next(t).ino;i=this._writeJson(Object.assign({},t,{n:r}))}return e?this.vol.dev.write(this.ino,e,i):0}_writeJson(t){return this.vol.dev.writeText(this.ino,JSON.stringify(t))}_writeTrail(t,e){for(var i=this;t&&e<t.length;)t=t.subarray(e),e=(i=i._next())._write(null,t),A()(e>0)}_readTrail(t,e){for(var i=this;e<t.length;){i=i._next();var{header:r,rdc:n}=i._read();if(n=this.vol.dev.readInto(i.ino,n,t.length-e,t,e),A()(n>0),e+=n,!(r.n>=0))break}A()(e==t.length)}_next(t){return t||(t=this._read().header),t.n>=0?this.vol.getNodeShared(t.n):this.vol.createNode()}}class m extends I.Link{constructor(t,e,i){return super(t,e,i),this.ver=0,this._dirty=!1,new Proxy(this,new _.LinkHandler)}createChild(t,e=this.vol.createNode()){this._dirty=!0;const i=new m(this.vol,this,t);return i.setNode(e),this.setChild(t,i),i}setChild(t,e){return this._dirty=!0,e=super.setChild(t,e),this.touch(),e}deleteChild(t){this._dirty=!0,super.deleteChild(t),this.touch()}touch(){this.vol.getNodeShared(this.ino).ver++,this.push()}setNode(t){super.setNode(t),t._link=this}getNode(){const t=this.node;return A()(t,"LinkSharedVolume.node is unset"),t.pull(),t}push(){if(this.vol.dev){var t={};for(let[e,i]of Object.entries(this.children))t[e]={ino:i.ino};var e=this.getNode(),i=JSON.stringify(t);this.vol.debug("+ push link",this.ino,i),e.buf=Buffer.from(i),e.ver++,e.push(),this.ver=e.ver,this._dirty=!1}}pull(){if(0!=this.vol.dev.get(this.ino)[0]){var t=this.getNode();if(t.pull(),t.isDirectory()&&t.buf&&t.ver!==this.ver){var e=JSON.parse(t.buf.toString("utf-8"));this.vol.debug("- pull link",this.ino,e);var i={};for(let[t,r]of Object.entries(e||{}))if("number"==typeof r.ino){let e=this.vol.getNodeShared(r.ino);i[t]=e.getLink(this,t)}this.children=i,this.ver=t.ver,this._dirty=!1}}}}!function(t){t.LinkHandler=class{get(t,e){return"children"===e&&t.vol.dev&&!t._dirty&&t.pull(),t[e]}},t.LinkChildren=class{constructor(t){this.link=t}getOwnPropertyDescriptor(t,e){return this.link.pull(),t.hasOwnProperty(e)?{configurable:!0,enumerable:!0}:void 0}get(t,e){return this.link.pull(),t[e]}set(t,e,i){return t[e]=i,!0}}}(_||(_={}))})(),module.exports=r})();