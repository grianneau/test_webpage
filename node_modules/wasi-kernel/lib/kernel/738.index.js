exports.id=738,exports.ids=[738],exports.modules={1311:(t,e,n)=>{"use strict";const r=n(9496),i=n(3986),o=n(6470),s=n(2946),a={hrtime:n(998).default(i.default),exit:t=>{throw new s.WASIExitError(t)},kill:t=>{throw new s.WASIKillError(t)},randomFillSync:r.randomFillSync,isTTY:()=>!0,path:o,fs:null};e.Z=a},9647:(t,e,n)=>{"use strict";const r=n(6417),i=n(5747),{isatty:o}=n(3867),s=n(5622);let a=n(998).default(process.hrtime);process.hrtime&&process.hrtime.bigint&&(a=process.hrtime.bigint);const _={hrtime:a,exit:t=>{process.exit(t)},kill:t=>{process.kill(process.pid,t)},randomFillSync:r.randomFillSync,isTTY:o,fs:i,path:s};e.Z=_},2055:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(9642);e.WASI_ESUCCESS=0,e.WASI_E2BIG=1,e.WASI_EACCES=2,e.WASI_EADDRINUSE=3,e.WASI_EADDRNOTAVAIL=4,e.WASI_EAFNOSUPPORT=5,e.WASI_EAGAIN=6,e.WASI_EALREADY=7,e.WASI_EBADF=8,e.WASI_EBADMSG=9,e.WASI_EBUSY=10,e.WASI_ECANCELED=11,e.WASI_ECHILD=12,e.WASI_ECONNABORTED=13,e.WASI_ECONNREFUSED=14,e.WASI_ECONNRESET=15,e.WASI_EDEADLK=16,e.WASI_EDESTADDRREQ=17,e.WASI_EDOM=18,e.WASI_EDQUOT=19,e.WASI_EEXIST=20,e.WASI_EFAULT=21,e.WASI_EFBIG=22,e.WASI_EHOSTUNREACH=23,e.WASI_EIDRM=24,e.WASI_EILSEQ=25,e.WASI_EINPROGRESS=26,e.WASI_EINTR=27,e.WASI_EINVAL=28,e.WASI_EIO=29,e.WASI_EISCONN=30,e.WASI_EISDIR=31,e.WASI_ELOOP=32,e.WASI_EMFILE=33,e.WASI_EMLINK=34,e.WASI_EMSGSIZE=35,e.WASI_EMULTIHOP=36,e.WASI_ENAMETOOLONG=37,e.WASI_ENETDOWN=38,e.WASI_ENETRESET=39,e.WASI_ENETUNREACH=40,e.WASI_ENFILE=41,e.WASI_ENOBUFS=42,e.WASI_ENODEV=43,e.WASI_ENOENT=44,e.WASI_ENOEXEC=45,e.WASI_ENOLCK=46,e.WASI_ENOLINK=47,e.WASI_ENOMEM=48,e.WASI_ENOMSG=49,e.WASI_ENOPROTOOPT=50,e.WASI_ENOSPC=51,e.WASI_ENOSYS=52,e.WASI_ENOTCONN=53,e.WASI_ENOTDIR=54,e.WASI_ENOTEMPTY=55,e.WASI_ENOTRECOVERABLE=56,e.WASI_ENOTSOCK=57,e.WASI_ENOTSUP=58,e.WASI_ENOTTY=59,e.WASI_ENXIO=60,e.WASI_EOVERFLOW=61,e.WASI_EOWNERDEAD=62,e.WASI_EPERM=63,e.WASI_EPIPE=64,e.WASI_EPROTO=65,e.WASI_EPROTONOSUPPORT=66,e.WASI_EPROTOTYPE=67,e.WASI_ERANGE=68,e.WASI_EROFS=69,e.WASI_ESPIPE=70,e.WASI_ESRCH=71,e.WASI_ESTALE=72,e.WASI_ETIMEDOUT=73,e.WASI_ETXTBSY=74,e.WASI_EXDEV=75,e.WASI_ENOTCAPABLE=76,e.WASI_SIGABRT=0,e.WASI_SIGALRM=1,e.WASI_SIGBUS=2,e.WASI_SIGCHLD=3,e.WASI_SIGCONT=4,e.WASI_SIGFPE=5,e.WASI_SIGHUP=6,e.WASI_SIGILL=7,e.WASI_SIGINT=8,e.WASI_SIGKILL=9,e.WASI_SIGPIPE=10,e.WASI_SIGQUIT=11,e.WASI_SIGSEGV=12,e.WASI_SIGSTOP=13,e.WASI_SIGTERM=14,e.WASI_SIGTRAP=15,e.WASI_SIGTSTP=16,e.WASI_SIGTTIN=17,e.WASI_SIGTTOU=18,e.WASI_SIGURG=19,e.WASI_SIGUSR1=20,e.WASI_SIGUSR2=21,e.WASI_SIGVTALRM=22,e.WASI_SIGXCPU=23,e.WASI_SIGXFSZ=24,e.WASI_FILETYPE_UNKNOWN=0,e.WASI_FILETYPE_BLOCK_DEVICE=1,e.WASI_FILETYPE_CHARACTER_DEVICE=2,e.WASI_FILETYPE_DIRECTORY=3,e.WASI_FILETYPE_REGULAR_FILE=4,e.WASI_FILETYPE_SOCKET_DGRAM=5,e.WASI_FILETYPE_SOCKET_STREAM=6,e.WASI_FILETYPE_SYMBOLIC_LINK=7,e.WASI_FDFLAG_APPEND=1,e.WASI_FDFLAG_DSYNC=2,e.WASI_FDFLAG_NONBLOCK=4,e.WASI_FDFLAG_RSYNC=8,e.WASI_FDFLAG_SYNC=16,e.WASI_RIGHT_FD_DATASYNC=r.BigIntPolyfill(1),e.WASI_RIGHT_FD_READ=r.BigIntPolyfill(2),e.WASI_RIGHT_FD_SEEK=r.BigIntPolyfill(4),e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS=r.BigIntPolyfill(8),e.WASI_RIGHT_FD_SYNC=r.BigIntPolyfill(16),e.WASI_RIGHT_FD_TELL=r.BigIntPolyfill(32),e.WASI_RIGHT_FD_WRITE=r.BigIntPolyfill(64),e.WASI_RIGHT_FD_ADVISE=r.BigIntPolyfill(128),e.WASI_RIGHT_FD_ALLOCATE=r.BigIntPolyfill(256),e.WASI_RIGHT_PATH_CREATE_DIRECTORY=r.BigIntPolyfill(512),e.WASI_RIGHT_PATH_CREATE_FILE=r.BigIntPolyfill(1024),e.WASI_RIGHT_PATH_LINK_SOURCE=r.BigIntPolyfill(2048),e.WASI_RIGHT_PATH_LINK_TARGET=r.BigIntPolyfill(4096),e.WASI_RIGHT_PATH_OPEN=r.BigIntPolyfill(8192),e.WASI_RIGHT_FD_READDIR=r.BigIntPolyfill(16384),e.WASI_RIGHT_PATH_READLINK=r.BigIntPolyfill(32768),e.WASI_RIGHT_PATH_RENAME_SOURCE=r.BigIntPolyfill(65536),e.WASI_RIGHT_PATH_RENAME_TARGET=r.BigIntPolyfill(131072),e.WASI_RIGHT_PATH_FILESTAT_GET=r.BigIntPolyfill(262144),e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE=r.BigIntPolyfill(524288),e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES=r.BigIntPolyfill(1048576),e.WASI_RIGHT_FD_FILESTAT_GET=r.BigIntPolyfill(2097152),e.WASI_RIGHT_FD_FILESTAT_SET_SIZE=r.BigIntPolyfill(4194304),e.WASI_RIGHT_FD_FILESTAT_SET_TIMES=r.BigIntPolyfill(8388608),e.WASI_RIGHT_PATH_SYMLINK=r.BigIntPolyfill(16777216),e.WASI_RIGHT_PATH_REMOVE_DIRECTORY=r.BigIntPolyfill(33554432),e.WASI_RIGHT_PATH_UNLINK_FILE=r.BigIntPolyfill(67108864),e.WASI_RIGHT_POLL_FD_READWRITE=r.BigIntPolyfill(134217728),e.WASI_RIGHT_SOCK_SHUTDOWN=r.BigIntPolyfill(268435456),e.RIGHTS_ALL=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_BLOCK_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_BLOCK_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_BASE=e.RIGHTS_ALL,e.RIGHTS_CHARACTER_DEVICE_INHERITING=e.RIGHTS_ALL,e.RIGHTS_REGULAR_FILE_BASE=e.WASI_RIGHT_FD_DATASYNC|e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_SEEK|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_TELL|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_FD_ALLOCATE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_SIZE|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_REGULAR_FILE_INHERITING=r.BigIntPolyfill(0),e.RIGHTS_DIRECTORY_BASE=e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_SYNC|e.WASI_RIGHT_FD_ADVISE|e.WASI_RIGHT_PATH_CREATE_DIRECTORY|e.WASI_RIGHT_PATH_CREATE_FILE|e.WASI_RIGHT_PATH_LINK_SOURCE|e.WASI_RIGHT_PATH_LINK_TARGET|e.WASI_RIGHT_PATH_OPEN|e.WASI_RIGHT_FD_READDIR|e.WASI_RIGHT_PATH_READLINK|e.WASI_RIGHT_PATH_RENAME_SOURCE|e.WASI_RIGHT_PATH_RENAME_TARGET|e.WASI_RIGHT_PATH_FILESTAT_GET|e.WASI_RIGHT_PATH_FILESTAT_SET_SIZE|e.WASI_RIGHT_PATH_FILESTAT_SET_TIMES|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_FD_FILESTAT_SET_TIMES|e.WASI_RIGHT_PATH_SYMLINK|e.WASI_RIGHT_PATH_UNLINK_FILE|e.WASI_RIGHT_PATH_REMOVE_DIRECTORY|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_DIRECTORY_INHERITING=e.RIGHTS_DIRECTORY_BASE|e.RIGHTS_REGULAR_FILE_BASE,e.RIGHTS_SOCKET_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE|e.WASI_RIGHT_SOCK_SHUTDOWN,e.RIGHTS_SOCKET_INHERITING=e.RIGHTS_ALL,e.RIGHTS_TTY_BASE=e.WASI_RIGHT_FD_READ|e.WASI_RIGHT_FD_FDSTAT_SET_FLAGS|e.WASI_RIGHT_FD_WRITE|e.WASI_RIGHT_FD_FILESTAT_GET|e.WASI_RIGHT_POLL_FD_READWRITE,e.RIGHTS_TTY_INHERITING=r.BigIntPolyfill(0),e.WASI_CLOCK_REALTIME=0,e.WASI_CLOCK_MONOTONIC=1,e.WASI_CLOCK_PROCESS_CPUTIME_ID=2,e.WASI_CLOCK_THREAD_CPUTIME_ID=3,e.WASI_EVENTTYPE_CLOCK=0,e.WASI_EVENTTYPE_FD_READ=1,e.WASI_EVENTTYPE_FD_WRITE=2,e.WASI_FILESTAT_SET_ATIM=1,e.WASI_FILESTAT_SET_ATIM_NOW=2,e.WASI_FILESTAT_SET_MTIM=4,e.WASI_FILESTAT_SET_MTIM_NOW=8,e.WASI_O_CREAT=1,e.WASI_O_DIRECTORY=2,e.WASI_O_EXCL=4,e.WASI_O_TRUNC=8,e.WASI_PREOPENTYPE_DIR=0,e.WASI_DIRCOOKIE_START=0,e.WASI_STDIN_FILENO=0,e.WASI_STDOUT_FILENO=1,e.WASI_STDERR_FILENO=2,e.WASI_WHENCE_SET=0,e.WASI_WHENCE_CUR=1,e.WASI_WHENCE_END=2,e.ERROR_MAP={E2BIG:e.WASI_E2BIG,EACCES:e.WASI_EACCES,EADDRINUSE:e.WASI_EADDRINUSE,EADDRNOTAVAIL:e.WASI_EADDRNOTAVAIL,EAFNOSUPPORT:e.WASI_EAFNOSUPPORT,EALREADY:e.WASI_EALREADY,EAGAIN:e.WASI_EAGAIN,EBADF:e.WASI_EBADF,EBADMSG:e.WASI_EBADMSG,EBUSY:e.WASI_EBUSY,ECANCELED:e.WASI_ECANCELED,ECHILD:e.WASI_ECHILD,ECONNABORTED:e.WASI_ECONNABORTED,ECONNREFUSED:e.WASI_ECONNREFUSED,ECONNRESET:e.WASI_ECONNRESET,EDEADLOCK:e.WASI_EDEADLK,EDESTADDRREQ:e.WASI_EDESTADDRREQ,EDOM:e.WASI_EDOM,EDQUOT:e.WASI_EDQUOT,EEXIST:e.WASI_EEXIST,EFAULT:e.WASI_EFAULT,EFBIG:e.WASI_EFBIG,EHOSTDOWN:e.WASI_EHOSTUNREACH,EHOSTUNREACH:e.WASI_EHOSTUNREACH,EIDRM:e.WASI_EIDRM,EILSEQ:e.WASI_EILSEQ,EINPROGRESS:e.WASI_EINPROGRESS,EINTR:e.WASI_EINTR,EINVAL:e.WASI_EINVAL,EIO:e.WASI_EIO,EISCONN:e.WASI_EISCONN,EISDIR:e.WASI_EISDIR,ELOOP:e.WASI_ELOOP,EMFILE:e.WASI_EMFILE,EMLINK:e.WASI_EMLINK,EMSGSIZE:e.WASI_EMSGSIZE,EMULTIHOP:e.WASI_EMULTIHOP,ENAMETOOLONG:e.WASI_ENAMETOOLONG,ENETDOWN:e.WASI_ENETDOWN,ENETRESET:e.WASI_ENETRESET,ENETUNREACH:e.WASI_ENETUNREACH,ENFILE:e.WASI_ENFILE,ENOBUFS:e.WASI_ENOBUFS,ENODEV:e.WASI_ENODEV,ENOENT:e.WASI_ENOENT,ENOEXEC:e.WASI_ENOEXEC,ENOLCK:e.WASI_ENOLCK,ENOLINK:e.WASI_ENOLINK,ENOMEM:e.WASI_ENOMEM,ENOMSG:e.WASI_ENOMSG,ENOPROTOOPT:e.WASI_ENOPROTOOPT,ENOSPC:e.WASI_ENOSPC,ENOSYS:e.WASI_ENOSYS,ENOTCONN:e.WASI_ENOTCONN,ENOTDIR:e.WASI_ENOTDIR,ENOTEMPTY:e.WASI_ENOTEMPTY,ENOTRECOVERABLE:e.WASI_ENOTRECOVERABLE,ENOTSOCK:e.WASI_ENOTSOCK,ENOTTY:e.WASI_ENOTTY,ENXIO:e.WASI_ENXIO,EOVERFLOW:e.WASI_EOVERFLOW,EOWNERDEAD:e.WASI_EOWNERDEAD,EPERM:e.WASI_EPERM,EPIPE:e.WASI_EPIPE,EPROTO:e.WASI_EPROTO,EPROTONOSUPPORT:e.WASI_EPROTONOSUPPORT,EPROTOTYPE:e.WASI_EPROTOTYPE,ERANGE:e.WASI_ERANGE,EROFS:e.WASI_EROFS,ESPIPE:e.WASI_ESPIPE,ESRCH:e.WASI_ESRCH,ESTALE:e.WASI_ESTALE,ETIMEDOUT:e.WASI_ETIMEDOUT,ETXTBSY:e.WASI_ETXTBSY,EXDEV:e.WASI_EXDEV},e.SIGNAL_MAP={[e.WASI_SIGHUP]:"SIGHUP",[e.WASI_SIGINT]:"SIGINT",[e.WASI_SIGQUIT]:"SIGQUIT",[e.WASI_SIGILL]:"SIGILL",[e.WASI_SIGTRAP]:"SIGTRAP",[e.WASI_SIGABRT]:"SIGABRT",[e.WASI_SIGBUS]:"SIGBUS",[e.WASI_SIGFPE]:"SIGFPE",[e.WASI_SIGKILL]:"SIGKILL",[e.WASI_SIGUSR1]:"SIGUSR1",[e.WASI_SIGSEGV]:"SIGSEGV",[e.WASI_SIGUSR2]:"SIGUSR2",[e.WASI_SIGPIPE]:"SIGPIPE",[e.WASI_SIGALRM]:"SIGALRM",[e.WASI_SIGTERM]:"SIGTERM",[e.WASI_SIGCHLD]:"SIGCHLD",[e.WASI_SIGCONT]:"SIGCONT",[e.WASI_SIGSTOP]:"SIGSTOP",[e.WASI_SIGTSTP]:"SIGTSTP",[e.WASI_SIGTTIN]:"SIGTTIN",[e.WASI_SIGTTOU]:"SIGTTOU",[e.WASI_SIGURG]:"SIGURG",[e.WASI_SIGXCPU]:"SIGXCPU",[e.WASI_SIGXFSZ]:"SIGXFSZ",[e.WASI_SIGVTALRM]:"SIGVTALRM"}},2946:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(9642),i=n(5961),o=n(1744);let s;const a=n(2055),_=a.WASI_RIGHT_FD_DATASYNC|a.WASI_RIGHT_FD_READ|a.WASI_RIGHT_FD_SYNC|a.WASI_RIGHT_FD_ADVISE|a.WASI_RIGHT_FD_FILESTAT_GET|a.WASI_RIGHT_POLL_FD_READWRITE,c=a.WASI_RIGHT_FD_DATASYNC|a.WASI_RIGHT_FD_WRITE|a.WASI_RIGHT_FD_SYNC|a.WASI_RIGHT_FD_ADVISE|a.WASI_RIGHT_FD_FILESTAT_GET|a.WASI_RIGHT_POLL_FD_READWRITE,f=c,u=t=>{const e=Math.trunc(t),n=r.BigIntPolyfill(Math.round(1e6*(t-e)));return r.BigIntPolyfill(e)*r.BigIntPolyfill(1e6)+n},l=t=>{"number"==typeof t&&(t=Math.trunc(t));const e=r.BigIntPolyfill(t);return Number(e/r.BigIntPolyfill(1e6))},h=t=>(...e)=>{try{return t(...e)}catch(t){if(t&&t.code&&"string"==typeof t.code)return a.ERROR_MAP[t.code]||a.WASI_EINVAL;if(t instanceof E)return t.errno;throw t}},I=(t,e)=>{const n=t.FD_MAP.get(e);if(!n)throw new E(a.WASI_EBADF);if(void 0===n.filetype){const r=t.bindings.fs.fstatSync(n.real),{filetype:i,rightsBase:o,rightsInheriting:s}=S(t,e,r);n.filetype=i,n.rights||(n.rights={base:o,inheriting:s})}return n},S=(t,e,n)=>{switch(!0){case n.isBlockDevice():return{filetype:a.WASI_FILETYPE_BLOCK_DEVICE,rightsBase:a.RIGHTS_BLOCK_DEVICE_BASE,rightsInheriting:a.RIGHTS_BLOCK_DEVICE_INHERITING};case n.isCharacterDevice():{const n=a.WASI_FILETYPE_CHARACTER_DEVICE;return void 0!==e&&t.bindings.isTTY(e)?{filetype:n,rightsBase:a.RIGHTS_TTY_BASE,rightsInheriting:a.RIGHTS_TTY_INHERITING}:{filetype:n,rightsBase:a.RIGHTS_CHARACTER_DEVICE_BASE,rightsInheriting:a.RIGHTS_CHARACTER_DEVICE_INHERITING}}case n.isDirectory():return{filetype:a.WASI_FILETYPE_DIRECTORY,rightsBase:a.RIGHTS_DIRECTORY_BASE,rightsInheriting:a.RIGHTS_DIRECTORY_INHERITING};case n.isFIFO():return{filetype:a.WASI_FILETYPE_SOCKET_STREAM,rightsBase:a.RIGHTS_SOCKET_BASE,rightsInheriting:a.RIGHTS_SOCKET_INHERITING};case n.isFile():return{filetype:a.WASI_FILETYPE_REGULAR_FILE,rightsBase:a.RIGHTS_REGULAR_FILE_BASE,rightsInheriting:a.RIGHTS_REGULAR_FILE_INHERITING};case n.isSocket():return{filetype:a.WASI_FILETYPE_SOCKET_STREAM,rightsBase:a.RIGHTS_SOCKET_BASE,rightsInheriting:a.RIGHTS_SOCKET_INHERITING};case n.isSymbolicLink():return{filetype:a.WASI_FILETYPE_SYMBOLIC_LINK,rightsBase:r.BigIntPolyfill(0),rightsInheriting:r.BigIntPolyfill(0)};default:return{filetype:a.WASI_FILETYPE_UNKNOWN,rightsBase:r.BigIntPolyfill(0),rightsInheriting:r.BigIntPolyfill(0)}}};class E extends Error{constructor(t){super(),this.errno=t,Object.setPrototypeOf(this,E.prototype)}}e.WASIError=E;class p extends Error{constructor(t){super(`WASI Exit error: ${t}`),this.code=t,Object.setPrototypeOf(this,p.prototype)}}e.WASIExitError=p;class A extends Error{constructor(t){super(`WASI Kill signal: ${t}`),this.signal=t,Object.setPrototypeOf(this,A.prototype)}}e.WASIKillError=A;class d{constructor(t){let e={};t&&t.preopens?e=t.preopens:t&&t.preopenDirectories&&(e=t.preopenDirectories);let n={};t&&t.env&&(n=t.env);let i=[];t&&t.args&&(i=t.args);let p=s;t&&t.bindings&&(p=t.bindings),this.memory=void 0,this.view=void 0,this.bindings=p,this.FD_MAP=new Map([[a.WASI_STDIN_FILENO,{real:0,filetype:a.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:_,inheriting:r.BigIntPolyfill(0)},path:void 0}],[a.WASI_STDOUT_FILENO,{real:1,filetype:a.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:c,inheriting:r.BigIntPolyfill(0)},path:void 0}],[a.WASI_STDERR_FILENO,{real:2,filetype:a.WASI_FILETYPE_CHARACTER_DEVICE,rights:{base:f,inheriting:r.BigIntPolyfill(0)},path:void 0}]]);let A=this.bindings.fs,d=this.bindings.path;for(const[t,n]of Object.entries(e)){const e=A.openSync(n,A.constants.O_RDONLY),r=[...this.FD_MAP.keys()].reverse()[0]+1;this.FD_MAP.set(r,{real:e,filetype:a.WASI_FILETYPE_DIRECTORY,rights:{base:a.RIGHTS_DIRECTORY_BASE,inheriting:a.RIGHTS_DIRECTORY_INHERITING},fakePath:t,path:n})}const T=(t,e)=>(this.refreshMemory(),Array.from({length:e},((e,n)=>{const r=t+8*n,i=this.view.getUint32(r,!0),o=this.view.getUint32(r+4,!0);return new Uint8Array(this.memory.buffer,i,o)}))),y=(t,e)=>{const n=I(this,t);if(e!==r.BigIntPolyfill(0)&&(n.rights.base&e)===r.BigIntPolyfill(0))throw new E(a.WASI_EPERM);return n},R=p.hrtime(),m=t=>{switch(t){case a.WASI_CLOCK_MONOTONIC:return p.hrtime();case a.WASI_CLOCK_REALTIME:return u(Date.now());case a.WASI_CLOCK_PROCESS_CPUTIME_ID:case a.WASI_CLOCK_THREAD_CPUTIME_ID:return p.hrtime()-R;default:return null}};this.wasiImport={args_get:(t,e)=>{this.refreshMemory();let n=t,r=e;return i.forEach((t=>{this.view.setUint32(n,r,!0),n+=4,r+=o.default.from(this.memory.buffer).write(`${t}\0`,r)})),a.WASI_ESUCCESS},args_sizes_get:(t,e)=>{this.refreshMemory(),this.view.setUint32(t,i.length,!0);const n=i.reduce(((t,e)=>t+o.default.byteLength(e)+1),0);return this.view.setUint32(e,n,!0),a.WASI_ESUCCESS},environ_get:(t,e)=>{this.refreshMemory();let r=t,i=e;return Object.entries(n).forEach((([t,e])=>{this.view.setUint32(r,i,!0),r+=4,i+=o.default.from(this.memory.buffer).write(`${t}=${e}\0`,i)})),a.WASI_ESUCCESS},environ_sizes_get:(t,e)=>{this.refreshMemory();const r=Object.entries(n).map((([t,e])=>`${t}=${e}\0`)),i=r.reduce(((t,e)=>t+o.default.byteLength(e)),0);return this.view.setUint32(t,r.length,!0),this.view.setUint32(e,i,!0),a.WASI_ESUCCESS},clock_res_get:(t,e)=>{let n;switch(t){case a.WASI_CLOCK_MONOTONIC:case a.WASI_CLOCK_PROCESS_CPUTIME_ID:case a.WASI_CLOCK_THREAD_CPUTIME_ID:n=r.BigIntPolyfill(1);break;case a.WASI_CLOCK_REALTIME:n=r.BigIntPolyfill(1e3)}return this.view.setBigUint64(e,n),a.WASI_ESUCCESS},clock_time_get:(t,e,n)=>{this.refreshMemory();const i=m(t);return null===i?a.WASI_EINVAL:(this.view.setBigUint64(n,r.BigIntPolyfill(i),!0),a.WASI_ESUCCESS)},fd_advise:h(((t,e,n,r)=>(y(t,a.WASI_RIGHT_FD_ADVISE),a.WASI_ENOSYS))),fd_allocate:h(((t,e,n)=>(y(t,a.WASI_RIGHT_FD_ALLOCATE),a.WASI_ENOSYS))),fd_close:h((t=>{const e=y(t,r.BigIntPolyfill(0));return A.closeSync(e.real),this.FD_MAP.delete(t),a.WASI_ESUCCESS})),fd_datasync:h((t=>{const e=y(t,a.WASI_RIGHT_FD_DATASYNC);return A.fdatasyncSync(e.real),a.WASI_ESUCCESS})),fd_fdstat_get:h(((t,e)=>{const n=y(t,r.BigIntPolyfill(0));return this.refreshMemory(),this.view.setUint8(e,n.filetype),this.view.setUint16(e+2,0,!0),this.view.setUint16(e+4,0,!0),this.view.setBigUint64(e+8,r.BigIntPolyfill(n.rights.base),!0),this.view.setBigUint64(e+8+8,r.BigIntPolyfill(n.rights.inheriting),!0),a.WASI_ESUCCESS})),fd_fdstat_set_flags:h(((t,e)=>(y(t,a.WASI_RIGHT_FD_FDSTAT_SET_FLAGS),a.WASI_ENOSYS))),fd_fdstat_set_rights:h(((t,e,n)=>{const i=y(t,r.BigIntPolyfill(0));return(i.rights.base|e)>i.rights.base||(i.rights.inheriting|n)>i.rights.inheriting?a.WASI_EPERM:(i.rights.base=e,i.rights.inheriting=n,a.WASI_ESUCCESS)})),fd_filestat_get:h(((t,e)=>{const n=y(t,a.WASI_RIGHT_FD_FILESTAT_GET),i=A.fstatSync(n.real);return this.refreshMemory(),this.view.setBigUint64(e,r.BigIntPolyfill(i.dev),!0),e+=8,this.view.setBigUint64(e,r.BigIntPolyfill(i.ino),!0),e+=8,this.view.setUint8(e,n.filetype),e+=8,this.view.setBigUint64(e,r.BigIntPolyfill(i.nlink),!0),e+=8,this.view.setBigUint64(e,r.BigIntPolyfill(i.size),!0),e+=8,this.view.setBigUint64(e,u(i.atimeMs),!0),e+=8,this.view.setBigUint64(e,u(i.mtimeMs),!0),e+=8,this.view.setBigUint64(e,u(i.ctimeMs),!0),a.WASI_ESUCCESS})),fd_filestat_set_size:h(((t,e)=>{const n=y(t,a.WASI_RIGHT_FD_FILESTAT_SET_SIZE);return A.ftruncateSync(n.real,Number(e)),a.WASI_ESUCCESS})),fd_filestat_set_times:h(((t,e,n,r)=>{const i=y(t,a.WASI_RIGHT_FD_FILESTAT_SET_TIMES),o=A.fstatSync(i.real);let s=o.atime,_=o.mtime;const c=l(m(a.WASI_CLOCK_REALTIME)),f=a.WASI_FILESTAT_SET_ATIM|a.WASI_FILESTAT_SET_ATIM_NOW;if((r&f)===f)return a.WASI_EINVAL;const u=a.WASI_FILESTAT_SET_MTIM|a.WASI_FILESTAT_SET_MTIM_NOW;return(r&u)===u?a.WASI_EINVAL:((r&a.WASI_FILESTAT_SET_ATIM)===a.WASI_FILESTAT_SET_ATIM?s=l(e):(r&a.WASI_FILESTAT_SET_ATIM_NOW)===a.WASI_FILESTAT_SET_ATIM_NOW&&(s=c),(r&a.WASI_FILESTAT_SET_MTIM)===a.WASI_FILESTAT_SET_MTIM?_=l(n):(r&a.WASI_FILESTAT_SET_MTIM_NOW)===a.WASI_FILESTAT_SET_MTIM_NOW&&(_=c),A.futimesSync(i.real,new Date(s),new Date(_)),a.WASI_ESUCCESS)})),fd_prestat_get:h(((t,e)=>{const n=y(t,r.BigIntPolyfill(0));return n.path?(this.refreshMemory(),this.view.setUint8(e,a.WASI_PREOPENTYPE_DIR),this.view.setUint32(e+4,o.default.byteLength(n.fakePath),!0),a.WASI_ESUCCESS):a.WASI_EINVAL})),fd_prestat_dir_name:h(((t,e,n)=>{const i=y(t,r.BigIntPolyfill(0));return i.path?(this.refreshMemory(),o.default.from(this.memory.buffer).write(i.fakePath,e,n,"utf8"),a.WASI_ESUCCESS):a.WASI_EINVAL})),fd_pwrite:h(((t,e,n,r,i)=>{const o=y(t,a.WASI_RIGHT_FD_WRITE|a.WASI_RIGHT_FD_SEEK);let s=0;return T(e,n).forEach((t=>{let e=0;for(;e<t.byteLength;)e+=A.writeSync(o.real,t,e,t.byteLength-e,Number(r)+s+e);s+=e})),this.view.setUint32(i,s,!0),a.WASI_ESUCCESS})),fd_write:h(((t,e,n,i)=>{const o=y(t,a.WASI_RIGHT_FD_WRITE);let s=0;return T(e,n).forEach((t=>{let e=0;for(;e<t.byteLength;){const n=A.writeSync(o.real,t,e,t.byteLength-e,o.offset?Number(o.offset):null);o.offset&&(o.offset+=r.BigIntPolyfill(n)),e+=n}s+=e})),this.view.setUint32(i,s,!0),a.WASI_ESUCCESS})),fd_pread:h(((t,e,n,r,i)=>{const o=y(t,a.WASI_RIGHT_FD_READ|a.WASI_RIGHT_FD_SEEK);let s=0;t:for(const t of T(e,n)){let e=0;for(;e<t.byteLength;){const n=t.byteLength-e,i=A.readSync(o.real,t,e,t.byteLength-e,Number(r)+s+e);if(e+=i,s+=i,0===i||i<n)break t}s+=e}return this.view.setUint32(i,s,!0),a.WASI_ESUCCESS})),fd_read:h(((t,e,n,i)=>{const o=y(t,a.WASI_RIGHT_FD_READ),s=0===o.real;let _=0;t:for(const t of T(e,n)){let e=0;for(;e<t.byteLength;){let n=t.byteLength-e,i=s||void 0===o.offset?null:Number(o.offset),a=A.readSync(o.real,t,e,n,i);if(s||(o.offset=(o.offset?o.offset:r.BigIntPolyfill(0))+r.BigIntPolyfill(a)),e+=a,_+=a,0===a||a<n)break t}}return this.view.setUint32(i,_,!0),a.WASI_ESUCCESS})),fd_readdir:h(((t,e,n,i,s)=>{const _=y(t,a.WASI_RIGHT_FD_READDIR);this.refreshMemory();const c=A.readdirSync(_.path,{withFileTypes:!0}),f=e;for(let t=Number(i);t<c.length;t+=1){const i=c[t];let s=o.default.byteLength(i.name);if(e-f>n)break;if(this.view.setBigUint64(e,r.BigIntPolyfill(t+1),!0),(e+=8)-f>n)break;const u=A.statSync(d.resolve(_.path,i.name));if(this.view.setBigUint64(e,r.BigIntPolyfill(u.ino),!0),(e+=8)-f>n)break;if(this.view.setUint32(e,s,!0),(e+=4)-f>n)break;let l;switch(!0){case u.isBlockDevice():l=a.WASI_FILETYPE_BLOCK_DEVICE;break;case u.isCharacterDevice():l=a.WASI_FILETYPE_CHARACTER_DEVICE;break;case u.isDirectory():l=a.WASI_FILETYPE_DIRECTORY;break;case u.isFIFO():l=a.WASI_FILETYPE_SOCKET_STREAM;break;case u.isFile():l=a.WASI_FILETYPE_REGULAR_FILE;break;case u.isSocket():l=a.WASI_FILETYPE_SOCKET_STREAM;break;case u.isSymbolicLink():l=a.WASI_FILETYPE_SYMBOLIC_LINK;break;default:l=a.WASI_FILETYPE_UNKNOWN}if(this.view.setUint8(e,l),e+=1,(e+=3)+s>=f+n)break;o.default.from(this.memory.buffer).write(i.name,e),e+=s}const u=e-f;return this.view.setUint32(s,Math.min(u,n),!0),a.WASI_ESUCCESS})),fd_renumber:h(((t,e)=>(y(t,r.BigIntPolyfill(0)),y(e,r.BigIntPolyfill(0)),A.closeSync(this.FD_MAP.get(t).real),this.FD_MAP.set(t,this.FD_MAP.get(e)),this.FD_MAP.delete(e),a.WASI_ESUCCESS))),fd_seek:h(((t,e,n,i)=>{const o=y(t,a.WASI_RIGHT_FD_SEEK);switch(this.refreshMemory(),n){case a.WASI_WHENCE_CUR:o.offset=(o.offset?o.offset:r.BigIntPolyfill(0))+r.BigIntPolyfill(e);break;case a.WASI_WHENCE_END:const{size:t}=A.fstatSync(o.real);o.offset=r.BigIntPolyfill(t)+r.BigIntPolyfill(e);break;case a.WASI_WHENCE_SET:o.offset=r.BigIntPolyfill(e)}return this.view.setBigUint64(i,o.offset,!0),a.WASI_ESUCCESS})),fd_tell:h(((t,e)=>{const n=y(t,a.WASI_RIGHT_FD_TELL);return this.refreshMemory(),n.offset||(n.offset=r.BigIntPolyfill(0)),this.view.setBigUint64(e,n.offset,!0),a.WASI_ESUCCESS})),fd_sync:h((t=>{const e=y(t,a.WASI_RIGHT_FD_SYNC);return A.fsyncSync(e.real),a.WASI_ESUCCESS})),path_create_directory:h(((t,e,n)=>{const r=y(t,a.WASI_RIGHT_PATH_CREATE_DIRECTORY);if(!r.path)return a.WASI_EINVAL;this.refreshMemory();const i=o.default.from(this.memory.buffer,e,n).toString();return A.mkdirSync(d.resolve(r.path,i)),a.WASI_ESUCCESS})),path_filestat_get:h(((t,e,n,i,s)=>{const _=y(t,a.WASI_RIGHT_PATH_FILESTAT_GET);if(!_.path)return a.WASI_EINVAL;this.refreshMemory();const c=o.default.from(this.memory.buffer,n,i).toString(),f=A.statSync(d.resolve(_.path,c));return this.view.setBigUint64(s,r.BigIntPolyfill(f.dev),!0),s+=8,this.view.setBigUint64(s,r.BigIntPolyfill(f.ino),!0),s+=8,this.view.setUint8(s,S(this,void 0,f).filetype),s+=8,this.view.setBigUint64(s,r.BigIntPolyfill(f.nlink),!0),s+=8,this.view.setBigUint64(s,r.BigIntPolyfill(f.size),!0),s+=8,this.view.setBigUint64(s,u(f.atimeMs),!0),s+=8,this.view.setBigUint64(s,u(f.mtimeMs),!0),s+=8,this.view.setBigUint64(s,u(f.ctimeMs),!0),a.WASI_ESUCCESS})),path_filestat_set_times:h(((t,e,n,r,i,s,_)=>{const c=y(t,a.WASI_RIGHT_PATH_FILESTAT_SET_TIMES);if(!c.path)return a.WASI_EINVAL;this.refreshMemory();const f=A.fstatSync(c.real);let u=f.atime,h=f.mtime;const I=l(m(a.WASI_CLOCK_REALTIME)),S=a.WASI_FILESTAT_SET_ATIM|a.WASI_FILESTAT_SET_ATIM_NOW;if((_&S)===S)return a.WASI_EINVAL;const E=a.WASI_FILESTAT_SET_MTIM|a.WASI_FILESTAT_SET_MTIM_NOW;if((_&E)===E)return a.WASI_EINVAL;(_&a.WASI_FILESTAT_SET_ATIM)===a.WASI_FILESTAT_SET_ATIM?u=l(i):(_&a.WASI_FILESTAT_SET_ATIM_NOW)===a.WASI_FILESTAT_SET_ATIM_NOW&&(u=I),(_&a.WASI_FILESTAT_SET_MTIM)===a.WASI_FILESTAT_SET_MTIM?h=l(s):(_&a.WASI_FILESTAT_SET_MTIM_NOW)===a.WASI_FILESTAT_SET_MTIM_NOW&&(h=I);const p=o.default.from(this.memory.buffer,n,r).toString();return A.utimesSync(d.resolve(c.path,p),new Date(u),new Date(h)),a.WASI_ESUCCESS})),path_link:h(((t,e,n,r,i,s,_)=>{const c=y(t,a.WASI_RIGHT_PATH_LINK_SOURCE),f=y(i,a.WASI_RIGHT_PATH_LINK_TARGET);if(!c.path||!f.path)return a.WASI_EINVAL;this.refreshMemory();const u=o.default.from(this.memory.buffer,n,r).toString(),l=o.default.from(this.memory.buffer,s,_).toString();return A.linkSync(d.resolve(c.path,u),d.resolve(f.path,l)),a.WASI_ESUCCESS})),path_open:h(((t,e,n,i,s,_,c,f,u)=>{const l=y(t,a.WASI_RIGHT_PATH_OPEN);_=r.BigIntPolyfill(_),c=r.BigIntPolyfill(c);const h=(_&(a.WASI_RIGHT_FD_READ|a.WASI_RIGHT_FD_READDIR))!==r.BigIntPolyfill(0),S=(_&(a.WASI_RIGHT_FD_DATASYNC|a.WASI_RIGHT_FD_WRITE|a.WASI_RIGHT_FD_ALLOCATE|a.WASI_RIGHT_FD_FILESTAT_SET_SIZE))!==r.BigIntPolyfill(0);let E;S&&h?E=A.constants.O_RDWR:h?E=A.constants.O_RDONLY:S&&(E=A.constants.O_WRONLY);let p=_|a.WASI_RIGHT_PATH_OPEN,T=_|c;0!=(s&a.WASI_O_CREAT)&&(E|=A.constants.O_CREAT,p|=a.WASI_RIGHT_PATH_CREATE_FILE),0!=(s&a.WASI_O_DIRECTORY)&&(E|=A.constants.O_DIRECTORY),0!=(s&a.WASI_O_EXCL)&&(E|=A.constants.O_EXCL),0!=(s&a.WASI_O_TRUNC)&&(E|=A.constants.O_TRUNC,p|=a.WASI_RIGHT_PATH_FILESTAT_SET_SIZE),0!=(f&a.WASI_FDFLAG_APPEND)&&(E|=A.constants.O_APPEND),0!=(f&a.WASI_FDFLAG_DSYNC)&&(A.constants.O_DSYNC?E|=A.constants.O_DSYNC:E|=A.constants.O_SYNC,T|=a.WASI_RIGHT_FD_DATASYNC),0!=(f&a.WASI_FDFLAG_NONBLOCK)&&(E|=A.constants.O_NONBLOCK),0!=(f&a.WASI_FDFLAG_RSYNC)&&(A.constants.O_RSYNC?E|=A.constants.O_RSYNC:E|=A.constants.O_SYNC,T|=a.WASI_RIGHT_FD_SYNC),0!=(f&a.WASI_FDFLAG_SYNC)&&(E|=A.constants.O_SYNC,T|=a.WASI_RIGHT_FD_SYNC),S&&0==(E&(A.constants.O_APPEND|A.constants.O_TRUNC))&&(T|=a.WASI_RIGHT_FD_SEEK),this.refreshMemory();const R=o.default.from(this.memory.buffer,n,i).toString(),m=d.resolve(l.path,R);if(d.relative(l.path,m).startsWith(".."))return a.WASI_ENOTCAPABLE;let g,W,v;try{if(g=A.realpathSync(m),d.relative(l.path,g).startsWith(".."))return a.WASI_ENOTCAPABLE}catch(t){if("ENOENT"!==t.code)throw t;g=m}try{W=A.statSync(g).isDirectory()}catch(t){}v=!S&&W?A.openSync(g,A.constants.O_RDONLY):A.openSync(g,E);const O=[...this.FD_MAP.keys()].reverse()[0]+1;return this.FD_MAP.set(O,{real:v,filetype:void 0,rights:{base:p,inheriting:T},path:g}),I(this,O),this.view.setUint32(u,O,!0),a.WASI_ESUCCESS})),path_readlink:h(((t,e,n,r,i,s)=>{const _=y(t,a.WASI_RIGHT_PATH_READLINK);if(!_.path)return a.WASI_EINVAL;this.refreshMemory();const c=o.default.from(this.memory.buffer,e,n).toString(),f=d.resolve(_.path,c),u=A.readlinkSync(f),l=o.default.from(this.memory.buffer).write(u,r,i);return this.view.setUint32(s,l,!0),a.WASI_ESUCCESS})),path_remove_directory:h(((t,e,n)=>{const r=y(t,a.WASI_RIGHT_PATH_REMOVE_DIRECTORY);if(!r.path)return a.WASI_EINVAL;this.refreshMemory();const i=o.default.from(this.memory.buffer,e,n).toString();return A.rmdirSync(d.resolve(r.path,i)),a.WASI_ESUCCESS})),path_rename:h(((t,e,n,r,i,s)=>{const _=y(t,a.WASI_RIGHT_PATH_RENAME_SOURCE),c=y(r,a.WASI_RIGHT_PATH_RENAME_TARGET);if(!_.path||!c.path)return a.WASI_EINVAL;this.refreshMemory();const f=o.default.from(this.memory.buffer,e,n).toString(),u=o.default.from(this.memory.buffer,i,s).toString();return A.renameSync(d.resolve(_.path,f),d.resolve(c.path,u)),a.WASI_ESUCCESS})),path_symlink:h(((t,e,n,r,i)=>{const s=y(n,a.WASI_RIGHT_PATH_SYMLINK);if(!s.path)return a.WASI_EINVAL;this.refreshMemory();const _=o.default.from(this.memory.buffer,t,e).toString(),c=o.default.from(this.memory.buffer,r,i).toString();return A.symlinkSync(_,d.resolve(s.path,c)),a.WASI_ESUCCESS})),path_unlink_file:h(((t,e,n)=>{const r=y(t,a.WASI_RIGHT_PATH_UNLINK_FILE);if(!r.path)return a.WASI_EINVAL;this.refreshMemory();const i=o.default.from(this.memory.buffer,e,n).toString();return A.unlinkSync(d.resolve(r.path,i)),a.WASI_ESUCCESS})),poll_oneoff:(t,e,n,i)=>{let o=0,s=0;this.refreshMemory();for(let i=0;i<n;i+=1){const n=this.view.getBigUint64(t,!0);t+=8;const i=this.view.getUint8(t);switch(t+=1,i){case a.WASI_EVENTTYPE_CLOCK:{t+=7,this.view.getBigUint64(t,!0),t+=8;const i=this.view.getUint32(t,!0);t+=4,t+=4;const _=this.view.getBigUint64(t,!0);t+=8,this.view.getBigUint64(t,!0),t+=8;const c=this.view.getUint16(t,!0);t+=2,t+=6;const f=1===c;let u=a.WASI_ESUCCESS;const l=r.BigIntPolyfill(m(i));if(null===l)u=a.WASI_EINVAL;else{const t=f?_:l+_;s=t>s?t:s}this.view.setBigUint64(e,n,!0),e+=8,this.view.setUint16(e,u,!0),e+=2,this.view.setUint8(e,a.WASI_EVENTTYPE_CLOCK),e+=1,e+=5,o+=1;break}case a.WASI_EVENTTYPE_FD_READ:case a.WASI_EVENTTYPE_FD_WRITE:t+=3,this.view.getUint32(t,!0),t+=4,this.view.setBigUint64(e,n,!0),e+=8,this.view.setUint16(e,a.WASI_ENOSYS,!0),e+=2,this.view.setUint8(e,i),e+=1,e+=5,o+=1;break;default:return a.WASI_EINVAL}}for(this.view.setUint32(i,o,!0);p.hrtime()<s;);return a.WASI_ESUCCESS},proc_exit:t=>(p.exit(t),a.WASI_ESUCCESS),proc_raise:t=>t in a.SIGNAL_MAP?(p.kill(a.SIGNAL_MAP[t]),a.WASI_ESUCCESS):a.WASI_EINVAL,random_get:(t,e)=>(this.refreshMemory(),p.randomFillSync(new Uint8Array(this.memory.buffer),t,e),a.WASI_ESUCCESS),sched_yield:()=>a.WASI_ESUCCESS,sock_recv:()=>a.WASI_ENOSYS,sock_send:()=>a.WASI_ENOSYS,sock_shutdown:()=>a.WASI_ENOSYS},t.traceSyscalls&&Object.keys(this.wasiImport).forEach((t=>{const e=this.wasiImport[t];this.wasiImport[t]=function(...n){console.log(`WASI: wasiImport called: ${t} (${n})`);try{let t=e(...n);return console.log(`WASI:  => ${t}`),t}catch(t){throw console.log(`Catched error: ${t}`),t}}}))}refreshMemory(){this.view&&0!==this.view.buffer.byteLength||(this.view=new i.DataViewPolyfill(this.memory.buffer))}setMemory(t){this.memory=t}start(t){const e=t.exports;if(null===e||"object"!=typeof e)throw new Error(`instance.exports must be an Object. Received ${e}.`);const{memory:n}=e;if(!(n instanceof WebAssembly.Memory))throw new Error(`instance.exports.memory must be a WebAssembly.Memory. Recceived ${n}.`);this.setMemory(n),e._start&&e._start()}getImportNamespace(t){let e=null;for(let n of WebAssembly.Module.imports(t))if("function"===n.kind&&n.module.startsWith("wasi_"))if(e){if(e!==n.module)throw new Error("Multiple namespaces detected.")}else e=n.module;return e}getImports(t){switch(this.getImportNamespace(t)){case"wasi_unstable":return{wasi_unstable:this.wasiImport};case"wasi_snapshot_preview1":return{wasi_snapshot_preview1:this.wasiImport};default:throw new Error("Can't detect a WASI namespace for the WebAssembly Module")}}}e.default=d,d.defaultBindings=s,e.WASI=d},9642:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:{};e.BigIntPolyfill="undefined"!=typeof BigInt?BigInt:n.BigInt||Number},3986:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=Math.floor(.001*(Date.now()-performance.now()));e.default=function(t){let e=.001*performance.now(),r=Math.floor(e)+n,i=Math.floor(e%1*1e9);return t&&(r-=t[0],i-=t[1],i<0&&(r--,i+=1e9)),[r,i]}},1744:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=Buffer;e.default=n},5961:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(9642);let i=DataView;i.prototype.setBigUint64||(i.prototype.setBigUint64=function(t,e,n){let r,i;if(e<2**32)r=Number(e),i=0;else{for(var o=e.toString(2),s="",a=0;a<64-o.length;a++)s+="0";s+=o,i=parseInt(s.substring(0,32),2),r=parseInt(s.substring(32),2)}this.setUint32(t+(n?0:4),r,n),this.setUint32(t+(n?4:0),i,n)},i.prototype.getBigUint64=function(t,e){let n=this.getUint32(t+(e?0:4),e),i=this.getUint32(t+(e?4:0),e);for(var o=n.toString(2),s=i.toString(2),a="",_=0;_<32-o.length;_++)a+="0";return a+=o,r.BigIntPolyfill("0b"+s+a)}),e.DataViewPolyfill=i},998:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t=>e=>{const n=t(e);return 1e9*n[0]+n[1]}},4189:(t,e,n)=>{"use strict";const r=n(6551),i=n(6898),o=n(5622);n(8022);const s=(t,e)=>{if(!t)throw new Error(e)};e.Yn=class{constructor(){this.volume=new i.Volume,this.fs=r.createFsFromVolume(this.volume),this.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""})}_toJSON(t,e={},n){let r=!0;for(const i in t.children){r=!1;const s=t.getChild(i);if(s){const t=s.getNode();if(t&&t.isFile()){let r=s.getPath();n&&(r=o.relative(n,r)),e[r]=t.getBuffer()}else t&&t.isDirectory()&&this._toJSON(s,e,n)}}let i=t.getPath();return n&&(i=o.relative(n,i)),i&&r&&(e[i]=null),e}toJSON(t,e={},n=!1){const r=[];if(t){t instanceof Array||(t=[t]);for(const e of t){const t=i.pathToFilename(e),n=this.volume.getResolvedLink(t);n&&r.push(n)}}else r.push(this.volume.root);if(!r.length)return e;for(const t of r)this._toJSON(t,e,n?t.getPath():"");return e}fromJSONFixed(t,e){for(let n in e){const r=e[n];if(r?null===Object.getPrototypeOf(r):null===r)t.mkdirpBase(n,511);else{const e=i.filenameToSteps(n);if(e.length>1){const n="/"+e.slice(0,e.length-1).join("/");t.mkdirpBase(n,511)}t.writeFileSync(n,r||"")}}}fromJSON(t){this.volume=new i.Volume,this.fromJSONFixed(this.volume,t),this.fs=r.createFsFromVolume(this.volume),this.volume.releasedFds=[0,1,2];const e=this.volume.openSync("/dev/stderr","w"),n=this.volume.openSync("/dev/stdout","w"),o=this.volume.openSync("/dev/stdin","r");s(2===e,`invalid handle for stderr: ${e}`),s(1===n,`invalid handle for stdout: ${n}`),s(0===o,`invalid handle for stdin: ${o}`)}async getStdOut(){return new Promise((t=>{t(this.fs.readFileSync("/dev/stdout","utf8"))}))}}},8022:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(1172).Node.prototype.emit=function(t,...e){const n=this.listeners(t);for(let t of n)try{t(...e)}catch(t){console.error(t)}return n.length>0}},3818:(t,e)=>{"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="undefined"!=typeof window&&void 0!==window.document,i="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,o="object"===("undefined"==typeof self?"undefined":n(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name;"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),"undefined"!=typeof Deno&&Deno.core;e.jU=r,e.n2=o,e.UG=i},2630:(t,e)=>{var n=Array.prototype.slice;e.l=function t(e,r){for(var i in r)e[i]=r[i];return arguments.length<3?e:t.apply(null,[e].concat(n.call(arguments,2)))}},4290:(t,e)=>{"use strict";e.Z4=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n?(t=i(t,e)).replace(/^([a-zA-Z]+:|\.\/)/,""):t};var n="win32"===process.platform;function r(t,e){var r=t[e];return e>0&&("/"===r||n&&"\\"===r)}function i(t,e){if("string"!=typeof t)throw new TypeError("expected a string");return t=t.replace(/[\\\/]+/g,"/"),!1!==e&&(t=function(t){var e=t.length-1;if(e<2)return t;for(;r(t,e);)e--;return t.substr(0,e+1)}(t)),t}},5659:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fsProps=["constants","F_OK","R_OK","W_OK","X_OK","Stats"],e.fsSyncMethods=["renameSync","ftruncateSync","truncateSync","chownSync","fchownSync","lchownSync","chmodSync","fchmodSync","lchmodSync","statSync","lstatSync","fstatSync","linkSync","symlinkSync","readlinkSync","realpathSync","unlinkSync","rmdirSync","mkdirSync","mkdirpSync","readdirSync","closeSync","openSync","utimesSync","futimesSync","fsyncSync","writeSync","readSync","readFileSync","writeFileSync","appendFileSync","existsSync","accessSync","fdatasyncSync","mkdtempSync","copyFileSync","createReadStream","createWriteStream"],e.fsAsyncMethods=["rename","ftruncate","truncate","chown","fchown","lchown","chmod","fchmod","lchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","mkdirp","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","exists","access","fdatasync","mkdtemp","copyFile","watchFile","unwatchFile","watch"]},832:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5561),i=n(9568),o=r.constants.S_IFMT,s=r.constants.S_IFDIR,a=r.constants.S_IFREG,_=r.constants.S_IFBLK,c=r.constants.S_IFCHR,f=r.constants.S_IFLNK,u=r.constants.S_IFIFO,l=r.constants.S_IFSOCK,h=function(){function t(){this.name="",this.mode=0}return t.build=function(e,n){var r=new t,o=e.getNode().mode;return r.name=i.strToEncoding(e.getName(),n),r.mode=o,r},t.prototype._checkModeProperty=function(t){return(this.mode&o)===t},t.prototype.isDirectory=function(){return this._checkModeProperty(s)},t.prototype.isFile=function(){return this._checkModeProperty(a)},t.prototype.isBlockDevice=function(){return this._checkModeProperty(_)},t.prototype.isCharacterDevice=function(){return this._checkModeProperty(c)},t.prototype.isSymbolicLink=function(){return this._checkModeProperty(f)},t.prototype.isFIFO=function(){return this._checkModeProperty(u)},t.prototype.isSocket=function(){return this._checkModeProperty(l)},t}();e.Dirent=h,e.default=h},1507:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5561),i=n(3103),o=r.constants.S_IFMT,s=r.constants.S_IFDIR,a=r.constants.S_IFREG,_=r.constants.S_IFBLK,c=r.constants.S_IFCHR,f=r.constants.S_IFLNK,u=r.constants.S_IFIFO,l=r.constants.S_IFSOCK,h=function(){function t(){}return t.build=function(e,n){void 0===n&&(n=!1);var r=new t,o=e.uid,s=e.gid,a=e.atime,_=e.mtime,c=e.ctime,f=n?i.default:function(t){return t};r.uid=f(o),r.gid=f(s),r.rdev=f(0),r.blksize=f(4096),r.ino=f(e.ino),r.size=f(e.getSize()),r.blocks=f(1),r.atime=a,r.mtime=_,r.ctime=c,r.birthtime=c,r.atimeMs=f(a.getTime()),r.mtimeMs=f(_.getTime());var u=f(c.getTime());return r.ctimeMs=u,r.birthtimeMs=u,r.dev=f(0),r.mode=f(e.mode),r.nlink=f(e.nlink),r},t.prototype._checkModeProperty=function(t){return(Number(this.mode)&o)===t},t.prototype.isDirectory=function(){return this._checkModeProperty(s)},t.prototype.isFile=function(){return this._checkModeProperty(a)},t.prototype.isBlockDevice=function(){return this._checkModeProperty(_)},t.prototype.isCharacterDevice=function(){return this._checkModeProperty(c)},t.prototype.isSymbolicLink=function(){return this._checkModeProperty(f)},t.prototype.isFIFO=function(){return this._checkModeProperty(u)},t.prototype.isSocket=function(){return this._checkModeProperty(l)},t}();e.Stats=h,e.default=h},5561:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}},9568:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6426),i=n(6978);e.ENCODING_UTF8="utf8",e.assertEncoding=function(t){if(t&&!r.Buffer.isEncoding(t))throw new i.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",t)},e.strToEncoding=function(t,n){return n&&n!==e.ENCODING_UTF8?"buffer"===n?new r.Buffer(t):new r.Buffer(t).toString(n):t}},3103:(t,e)=>{"function"==typeof BigInt?e.default=BigInt:e.default=function(){throw new Error("BigInt is not supported in this environment.")}},6551:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(1507),o=n(832),s=n(6898),a=n(5659),_=a.fsSyncMethods,c=a.fsAsyncMethods,f=n(5561),u=f.constants.F_OK,l=f.constants.R_OK,h=f.constants.W_OK,I=f.constants.X_OK;function S(t){for(var e={F_OK:u,R_OK:l,W_OK:h,X_OK:I,constants:f.constants,Stats:i.default,Dirent:o.default},n=0,r=_;n<r.length;n++)"function"==typeof t[E=r[n]]&&(e[E]=t[E].bind(t));for(var a=0,S=c;a<S.length;a++){var E;"function"==typeof t[E=S[a]]&&(e[E]=t[E].bind(t))}return e.StatWatcher=t.StatWatcher,e.FSWatcher=t.FSWatcher,e.WriteStream=t.WriteStream,e.ReadStream=t.ReadStream,e.promises=t.promises,e._toUnixTimestamp=s.toUnixTimestamp,e}e.Volume=s.Volume,e.vol=new s.Volume,e.createFsFromVolume=S,e.fs=S(e.vol),t.exports=r(r({},t.exports),e.fs),t.exports.semantic=!0},6426:function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4293);function o(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new(i.Buffer.bind.apply(i.Buffer,r([void 0,t],e)))}e.Buffer=i.Buffer;var s=i.Buffer.allocUnsafe||o;e.bufferAllocUnsafe=s;var a=i.Buffer.from||o;e.bufferFrom=a},6978:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2357),s=n(1669),a="undefined"==typeof Symbol?"_kCode":Symbol("code"),_={};function c(t){return function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t.call(this,u(e,n))||this;return i.code=e,i[a]=e,i.name=t.prototype.name+" ["+i[a]+"]",i}return i(e,t),e}(t)}var f=function(t){function n(n){var r=this;if("object"!=typeof n||null===n)throw new e.TypeError("ERR_INVALID_ARG_TYPE","options","object");return(r=n.message?t.call(this,n.message)||this:t.call(this,s.inspect(n.actual).slice(0,128)+" "+n.operator+" "+s.inspect(n.expected).slice(0,128))||this).generatedMessage=!n.message,r.name="AssertionError [ERR_ASSERTION]",r.code="ERR_ASSERTION",r.actual=n.actual,r.expected=n.expected,r.operator=n.operator,e.Error.captureStackTrace(r,n.stackStartFunction),r}return i(n,t),n}(global.Error);function u(t,e){o.strictEqual(typeof t,"string");var n,r=_[t];if(o(r,"An invalid error message key was used: "+t+"."),"function"==typeof r)n=r;else{if(n=s.format,void 0===e||0===e.length)return r;e.unshift(r)}return String(n.apply(null,e))}function l(t,e){_[t]="function"==typeof e?e:String(e)}function h(t,e){if(o(t,"expected is required"),o("string"==typeof e,"thing is required"),Array.isArray(t)){var n=t.length;return o(n>0,"At least one expected value needs to be specified"),t=t.map((function(t){return String(t)})),n>2?"one of "+e+" "+t.slice(0,n-1).join(", ")+", or "+t[n-1]:2===n?"one of "+e+" "+t[0]+" or "+t[1]:"of "+e+" "+t[0]}return"of "+e+" "+String(t)}e.AssertionError=f,e.message=u,e.E=l,e.Error=c(global.Error),e.TypeError=c(global.TypeError),e.RangeError=c(global.RangeError),l("ERR_ARG_NOT_ITERABLE","%s must be iterable"),l("ERR_ASSERTION","%s"),l("ERR_BUFFER_OUT_OF_BOUNDS",(function(t,e){return e?"Attempt to write outside buffer bounds":'"'+t+'" is outside of buffer bounds'})),l("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),l("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),l("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),l("ERR_DNS_SET_SERVERS_FAILED",(function(t,e){return'c-ares failed to set servers: "'+t+'" ['+e+"]"})),l("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),l("ERR_ENCODING_NOT_SUPPORTED",(function(t){return'The "'+t+'" encoding is not supported'})),l("ERR_ENCODING_INVALID_ENCODED_DATA",(function(t){return"The encoded data was not valid for encoding "+t})),l("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),l("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),l("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),l("ERR_INDEX_OUT_OF_RANGE","Index out of range"),l("ERR_INVALID_ARG_TYPE",(function(t,e,n){var r,i;if(o(t,"name is required"),e.includes("not ")?(r="must not be",e=e.split("not ")[1]):r="must be",Array.isArray(t)){var s=t.map((function(t){return'"'+t+'"'})).join(", ");i="The "+s+" arguments "+r+" "+h(e,"type")}else if(t.includes(" argument"))i="The "+t+" "+r+" "+h(e,"type");else{var a=t.includes(".")?"property":"argument";i='The "'+t+'" '+a+" "+r+" "+h(e,"type")}return arguments.length>=3&&(i+=". Received type "+(null!==n?typeof n:"null")),i})),l("ERR_INVALID_ARRAY_LENGTH",(function(t,e,n){return o.strictEqual(typeof n,"number"),'The array "'+t+'" (length '+n+") must be of length "+e+"."})),l("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),l("ERR_INVALID_CALLBACK","Callback must be a function"),l("ERR_INVALID_CHAR","Invalid character in %s"),l("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),l("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),l("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),l("ERR_INVALID_FILE_URL_PATH","File URL path %s"),l("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),l("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),l("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+String(e)+'" is invalid for option "'+t+'"'})),l("ERR_INVALID_OPT_VALUE_ENCODING",(function(t){return'The value "'+String(t)+'" is invalid for option "encoding"'})),l("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),l("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),l("ERR_INVALID_THIS",'Value of "this" must be of type %s'),l("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),l("ERR_INVALID_URL","Invalid URL: %s"),l("ERR_INVALID_URL_SCHEME",(function(t){return"The URL must be "+h(t,"scheme")})),l("ERR_IPC_CHANNEL_CLOSED","Channel closed"),l("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),l("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),l("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),l("ERR_MISSING_ARGS",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o(t.length>0,"At least one arg needs to be specified");var n="The ",r=t.length;switch(t=t.map((function(t){return'"'+t+'"'})),r){case 1:n+=t[0]+" argument";break;case 2:n+=t[0]+" and "+t[1]+" arguments";break;default:n+=t.slice(0,r-1).join(", "),n+=", and "+t[r-1]+" arguments"}return n+" must be specified"})),l("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),l("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),l("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),l("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),l("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),l("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),l("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),l("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),l("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),l("ERR_SOCKET_CANNOT_SEND","Unable to send data"),l("ERR_SOCKET_CLOSED","Socket is closed"),l("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),l("ERR_STDERR_CLOSE","process.stderr cannot be closed"),l("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),l("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),l("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),l("ERR_TLS_DH_PARAM_SIZE",(function(t){return"DH parameter size "+t+" is less than 2048"})),l("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),l("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),l("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),l("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),l("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),l("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),l("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),l("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),l("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),l("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),l("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")},1172:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(4880),s=n(6426),a=n(5561),_=n(8614),c=n(1507),f=a.constants.S_IFMT,u=a.constants.S_IFDIR,l=a.constants.S_IFREG,h=(a.constants.S_IFBLK,a.constants.S_IFCHR,a.constants.S_IFLNK),I=(a.constants.S_IFIFO,a.constants.S_IFSOCK,a.constants.O_APPEND);e.SEP="/";var S=function(t){function e(e,n){void 0===n&&(n=438);var r=t.call(this)||this;return r.uid=o.default.getuid(),r.gid=o.default.getgid(),r.atime=new Date,r.mtime=new Date,r.ctime=new Date,r.perm=438,r.mode=l,r.nlink=1,r.perm=n,r.mode|=n,r.ino=e,r}return i(e,t),e.prototype.getString=function(t){return void 0===t&&(t="utf8"),this.getBuffer().toString(t)},e.prototype.setString=function(t){this.buf=s.bufferFrom(t,"utf8"),this.touch()},e.prototype.getBuffer=function(){return this.buf||this.setBuffer(s.bufferAllocUnsafe(0)),s.bufferFrom(this.buf)},e.prototype.setBuffer=function(t){this.buf=s.bufferFrom(t),this.touch()},e.prototype.getSize=function(){return this.buf?this.buf.length:0},e.prototype.setModeProperty=function(t){this.mode=this.mode&~f|t},e.prototype.setIsFile=function(){this.setModeProperty(l)},e.prototype.setIsDirectory=function(){this.setModeProperty(u)},e.prototype.setIsSymlink=function(){this.setModeProperty(h)},e.prototype.isFile=function(){return(this.mode&f)===l},e.prototype.isDirectory=function(){return(this.mode&f)===u},e.prototype.isSymlink=function(){return(this.mode&f)===h},e.prototype.makeSymlink=function(t){this.symlink=t,this.setIsSymlink()},e.prototype.write=function(t,e,n,r){if(void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===r&&(r=0),this.buf||(this.buf=s.bufferAllocUnsafe(0)),r+n>this.buf.length){var i=s.bufferAllocUnsafe(r+n);this.buf.copy(i,0,0,this.buf.length),this.buf=i}return t.copy(this.buf,r,e,e+n),this.touch(),n},e.prototype.read=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t.byteLength),void 0===r&&(r=0),this.buf||(this.buf=s.bufferAllocUnsafe(0));var i=n;return i>t.byteLength&&(i=t.byteLength),i+r>this.buf.length&&(i=this.buf.length-r),this.buf.copy(t,e,r,r+i),i},e.prototype.truncate=function(t){if(void 0===t&&(t=0),t)if(this.buf||(this.buf=s.bufferAllocUnsafe(0)),t<=this.buf.length)this.buf=this.buf.slice(0,t);else{var e=s.bufferAllocUnsafe(0);this.buf.copy(e),e.fill(0,t)}else this.buf=s.bufferAllocUnsafe(0);this.touch()},e.prototype.chmod=function(t){this.perm=t,this.mode=-512&this.mode|t,this.touch()},e.prototype.chown=function(t,e){this.uid=t,this.gid=e,this.touch()},e.prototype.touch=function(){this.mtime=new Date,this.emit("change",this)},e.prototype.canRead=function(t,e){return void 0===t&&(t=o.default.getuid()),void 0===e&&(e=o.default.getgid()),!!(4&this.perm)||!!(e===this.gid&&32&this.perm)||!!(t===this.uid&&256&this.perm)},e.prototype.canWrite=function(t,e){return void 0===t&&(t=o.default.getuid()),void 0===e&&(e=o.default.getgid()),!!(2&this.perm)||!!(e===this.gid&&16&this.perm)||!!(t===this.uid&&128&this.perm)},e.prototype.del=function(){this.emit("delete",this)},e.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}},e}(_.EventEmitter);e.Node=S;var E=function(t){function n(e,n,r){var i=t.call(this)||this;return i.children={},i.steps=[],i.ino=0,i.length=0,i.vol=e,i.parent=n,i.steps=n?n.steps.concat([r]):[r],i}return i(n,t),n.prototype.setNode=function(t){this.node=t,this.ino=t.ino},n.prototype.getNode=function(){return this.node},n.prototype.createChild=function(t,e){void 0===e&&(e=this.vol.createNode());var r=new n(this.vol,this,t);return r.setNode(e),e.isDirectory(),this.setChild(t,r),r},n.prototype.setChild=function(t,e){return void 0===e&&(e=new n(this.vol,this,t)),this.children[t]=e,e.parent=this,this.length++,this.emit("child:add",e,this),e},n.prototype.deleteChild=function(t){delete this.children[t.getName()],this.length--,this.emit("child:delete",t,this)},n.prototype.getChild=function(t){if(Object.hasOwnProperty.call(this.children,t))return this.children[t]},n.prototype.getPath=function(){return this.steps.join(e.SEP)},n.prototype.getName=function(){return this.steps[this.steps.length-1]},n.prototype.walk=function(t,e,n){if(void 0===e&&(e=t.length),void 0===n&&(n=0),n>=t.length)return this;if(n>=e)return this;var r=t[n],i=this.getChild(r);return i?i.walk(t,e,n+1):null},n.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}},n}(_.EventEmitter);e.Link=E;var p=function(){function t(t,e,n,r){this.position=0,this.link=t,this.node=e,this.flags=n,this.fd=r}return t.prototype.getString=function(t){return void 0===t&&(t="utf8"),this.node.getString()},t.prototype.setString=function(t){this.node.setString(t)},t.prototype.getBuffer=function(){return this.node.getBuffer()},t.prototype.setBuffer=function(t){this.node.setBuffer(t)},t.prototype.getSize=function(){return this.node.getSize()},t.prototype.truncate=function(t){this.node.truncate(t)},t.prototype.seekTo=function(t){this.position=t},t.prototype.stats=function(){return c.default.build(this.node)},t.prototype.write=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t.length),"number"!=typeof r&&(r=this.position),this.flags&I&&(r=this.getSize());var i=this.node.write(t,e,n,r);return this.position=r+i,i},t.prototype.read=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t.byteLength),"number"!=typeof r&&(r=this.position);var i=this.node.read(t,e,n,r);return this.position=r+i,i},t.prototype.chmod=function(t){this.node.chmod(t)},t.prototype.chown=function(t,e){this.node.chown(t,e)},t}();e.File=p},4880:(t,e,n)=>{"use strict";function r(){var t=function(){if("undefined"!=typeof process)return process;try{return n(1765)}catch(t){return}}()||{};return t.getuid||(t.getuid=function(){return 0}),t.getgid||(t.getgid=function(){return 0}),t.cwd||(t.cwd=function(){return"/"}),t.nextTick||(t.nextTick=n(6015).default),t.emitWarning||(t.emitWarning=function(t,e){console.warn(e+(e?": ":"")+t)}),t.env||(t.env={}),t}Object.defineProperty(e,"__esModule",{value:!0}),e.createProcess=r,e.default=r()},6133:function(t,e){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function r(t,e,r){return void 0===r&&(r=function(t){return t}),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new Promise((function(o,s){t[e].bind(t).apply(void 0,n(i,[function(t,e){return t?s(t):o(r(e))}]))}))}}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.vol=t,this.fd=e}return t.prototype.appendFile=function(t,e){return r(this.vol,"appendFile")(this.fd,t,e)},t.prototype.chmod=function(t){return r(this.vol,"fchmod")(this.fd,t)},t.prototype.chown=function(t,e){return r(this.vol,"fchown")(this.fd,t,e)},t.prototype.close=function(){return r(this.vol,"close")(this.fd)},t.prototype.datasync=function(){return r(this.vol,"fdatasync")(this.fd)},t.prototype.read=function(t,e,n,i){return r(this.vol,"read",(function(e){return{bytesRead:e,buffer:t}}))(this.fd,t,e,n,i)},t.prototype.readFile=function(t){return r(this.vol,"readFile")(this.fd,t)},t.prototype.stat=function(t){return r(this.vol,"fstat")(this.fd,t)},t.prototype.sync=function(){return r(this.vol,"fsync")(this.fd)},t.prototype.truncate=function(t){return r(this.vol,"ftruncate")(this.fd,t)},t.prototype.utimes=function(t,e){return r(this.vol,"futimes")(this.fd,t,e)},t.prototype.write=function(t,e,n,i){return r(this.vol,"write",(function(e){return{bytesWritten:e,buffer:t}}))(this.fd,t,e,n,i)},t.prototype.writeFile=function(t,e){return r(this.vol,"writeFile")(this.fd,t,e)},t}();e.FileHandle=i,e.default=function(t){return"undefined"==typeof Promise?null:{FileHandle:i,access:function(e,n){return r(t,"access")(e,n)},appendFile:function(e,n,o){return r(t,"appendFile")(e instanceof i?e.fd:e,n,o)},chmod:function(e,n){return r(t,"chmod")(e,n)},chown:function(e,n,i){return r(t,"chown")(e,n,i)},copyFile:function(e,n,i){return r(t,"copyFile")(e,n,i)},lchmod:function(e,n){return r(t,"lchmod")(e,n)},lchown:function(e,n,i){return r(t,"lchown")(e,n,i)},link:function(e,n){return r(t,"link")(e,n)},lstat:function(e,n){return r(t,"lstat")(e,n)},mkdir:function(e,n){return r(t,"mkdir")(e,n)},mkdtemp:function(e,n){return r(t,"mkdtemp")(e,n)},open:function(e,n,o){return r(t,"open",(function(e){return new i(t,e)}))(e,n,o)},readdir:function(e,n){return r(t,"readdir")(e,n)},readFile:function(e,n){return r(t,"readFile")(e instanceof i?e.fd:e,n)},readlink:function(e,n){return r(t,"readlink")(e,n)},realpath:function(e,n){return r(t,"realpath")(e,n)},rename:function(e,n){return r(t,"rename")(e,n)},rmdir:function(e){return r(t,"rmdir")(e)},stat:function(e,n){return r(t,"stat")(e,n)},symlink:function(e,n,i){return r(t,"symlink")(e,n,i)},truncate:function(e,n){return r(t,"truncate")(e,n)},unlink:function(e){return r(t,"unlink")(e)},utimes:function(e,n,i){return r(t,"utimes")(e,n,i)},writeFile:function(e,n,o){return r(t,"writeFile")(e instanceof i?e.fd:e,n,o)}}}},6015:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),n="function"==typeof setImmediate?setImmediate.bind(global):setTimeout.bind(global),e.default=n},8369:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=setTimeout.apply(null,arguments);return r&&"object"==typeof r&&"function"==typeof r.unref&&r.unref(),r}},6898:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(e,"__esModule",{value:!0});var s,a,_=n(5622),c=n(1172),f=n(1507),u=n(832),l=n(6426),h=n(6015),I=n(4880),S=n(8369),E=n(2413),p=n(5561),A=n(8614),d=n(9568),T=n(6978),y=n(2630).l,R=n(1669),m=n(6133),g=_.resolve,W=p.constants.O_RDONLY,v=p.constants.O_WRONLY,O=p.constants.O_RDWR,N=p.constants.O_CREAT,F=p.constants.O_EXCL,L=p.constants.O_TRUNC,C=p.constants.O_APPEND,w=p.constants.O_SYNC,D=p.constants.O_DIRECTORY,P=p.constants.F_OK,b=p.constants.COPYFILE_EXCL,G=p.constants.COPYFILE_FICLONE_FORCE;if(_.posix){var B=_.posix;s=B.sep,a=B.relative}else s=_.sep,a=_.relative;var H,U="win32"===I.default.platform,k="path must be a string or Buffer",M="fd must be a file descriptor",Y="callback must be a function",K="ENOENT",V="EBADF",x="EINVAL",j="EEXIST",X="ENOTDIR",J="EMFILE",Z="EACCES",z="EISDIR",$="ENOTEMPTY",Q="ENOSYS";function q(t,e,n,r,i){void 0===e&&(e=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i=Error);var o=new i(function(t,e,n,r){void 0===e&&(e=""),void 0===n&&(n=""),void 0===r&&(r="");var i="";switch(n&&(i=" '"+n+"'"),r&&(i+=" -> '"+r+"'"),t){case K:return"ENOENT: no such file or directory, "+e+i;case V:return"EBADF: bad file descriptor, "+e+i;case x:return"EINVAL: invalid argument, "+e+i;case"EPERM":return"EPERM: operation not permitted, "+e+i;case"EPROTO":return"EPROTO: protocol error, "+e+i;case j:return"EEXIST: file already exists, "+e+i;case X:return"ENOTDIR: not a directory, "+e+i;case z:return"EISDIR: illegal operation on a directory, "+e+i;case Z:return"EACCES: permission denied, "+e+i;case $:return"ENOTEMPTY: directory not empty, "+e+i;case J:return"EMFILE: too many open files, "+e+i;case Q:return"ENOSYS: function not implemented, "+e+i;default:return t+": error occurred, "+e+i}}(t,e,n,r));return o.code=t,o}function tt(t){if("number"==typeof t)return t;if("string"==typeof t){var e=H[t];if(void 0!==e)return e}throw new T.TypeError("ERR_INVALID_OPT_VALUE","flags",t)}function et(t,e){var n;if(!e)return t;var r=typeof e;switch(r){case"string":n=y({},t,{encoding:e});break;case"object":n=y({},t,e);break;default:throw TypeError(function(t){return"Expected options to be either an object or a string, but got "+t+" instead"}(r))}return"buffer"!==n.encoding&&d.assertEncoding(n.encoding),n}function nt(t){return function(e){return et(t,e)}}function rt(t){if("function"!=typeof t)throw TypeError(Y);return t}function it(t){return function(e,n){return"function"==typeof e?[t(),e]:[t(e),rt(n)]}}!function(t){t[t.r=W]="r",t[t["r+"]=O]="r+",t[t.rs=W|w]="rs",t[t.sr=t.rs]="sr",t[t["rs+"]=O|w]="rs+",t[t["sr+"]=t["rs+"]]="sr+",t[t.w=v|N|L]="w",t[t.wx=v|N|L|F]="wx",t[t.xw=t.wx]="xw",t[t["w+"]=O|N|L]="w+",t[t["wx+"]=O|N|L|F]="wx+",t[t["xw+"]=t["wx+"]]="xw+",t[t.a=v|C|N]="a",t[t.ax=v|C|N|F]="ax",t[t.xa=t.ax]="xa",t[t["a+"]=O|C|N]="a+",t[t["ax+"]=O|C|N|F]="ax+",t[t["xa+"]=t["ax+"]]="xa+"}(H=e.FLAGS||(e.FLAGS={})),e.flagsToNumber=tt;var ot={encoding:"utf8"},st=nt(ot),at=it(st),_t=nt({flag:"r"}),ct={encoding:"utf8",mode:438,flag:H[H.w]},ft=nt(ct),ut={encoding:"utf8",mode:438,flag:H[H.a]},lt=nt(ut),ht=it(lt),It=nt(ot),St=it(It),Et={mode:511,recursive:!1},pt=function(t){return y({},Et,"number"==typeof t?{mode:t}:t)},At={recursive:!1},dt=function(t){return y({},At,t)},Tt=nt({encoding:"utf8",withFileTypes:!1}),yt=it(Tt),Rt={bigint:!1},mt=function(t){return void 0===t&&(t={}),y({},Rt,t)},gt=function(t,e){return"function"==typeof t?[mt(),t]:[mt(t),rt(e)]};function Wt(t){if("string"!=typeof t&&!l.Buffer.isBuffer(t)){try{if(!(t instanceof n(8835).URL))throw new TypeError(k)}catch(t){throw new TypeError(k)}t=function(t){if(""!==t.hostname)throw new T.TypeError("ERR_INVALID_FILE_URL_HOST",I.default.platform);for(var e=t.pathname,n=0;n<e.length;n++)if("%"===e[n]){var r=32|e.codePointAt(n+2);if("2"===e[n+1]&&102===r)throw new T.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(e)}(t)}var e=String(t);return Dt(e),e}e.pathToFilename=Wt;var vt=function(t,e){return void 0===e&&(e=I.default.cwd()),g(e,t)};if(U){var Ot=vt,Nt=n(4290).Z4;vt=function(t,e){return Nt(Ot(t,e))}}function Ft(t,e){var n=vt(t,e).substr(1);return n?n.split(s):[]}function Lt(t){return Ft(Wt(t))}function Ct(t,e){return void 0===e&&(e=d.ENCODING_UTF8),l.Buffer.isBuffer(t)?t:t instanceof Uint8Array?l.bufferFrom(t):l.bufferFrom(String(t),e)}function wt(t,e){return e&&"buffer"!==e?t.toString(e):t}function Dt(t,e){if(-1!==(""+t).indexOf("\0")){var n=new Error("Path must be a string without null bytes");if(n.code=K,"function"!=typeof e)throw n;return I.default.nextTick(e,n),!1}return!0}function Pt(t,e){var n=function(t,e){return"number"==typeof t?t:"string"==typeof t?parseInt(t,8):e?Pt(e):void 0}(t,e);if("number"!=typeof n||isNaN(n))throw new TypeError("mode must be an int");return n}function bt(t){return t>>>0===t}function Gt(t){if(!bt(t))throw TypeError(M)}function Bt(t){if("string"==typeof t&&+t==t)return+t;if(t instanceof Date)return t.getTime()/1e3;if(isFinite(t))return t<0?Date.now()/1e3:t;throw new Error("Cannot parse time: "+t)}function Ht(t){if("number"!=typeof t)throw TypeError("uid must be an unsigned int")}function Ut(t){if("number"!=typeof t)throw TypeError("gid must be an unsigned int")}e.filenameToSteps=Ft,e.pathToSteps=Lt,e.dataToStr=function(t,e){return void 0===e&&(e=d.ENCODING_UTF8),l.Buffer.isBuffer(t)?t.toString(e):t instanceof Uint8Array?l.bufferFrom(t).toString(e):String(t)},e.dataToBuffer=Ct,e.bufferToEncoding=wt,e.toUnixTimestamp=Bt;var kt=function(){function t(t){void 0===t&&(t={}),this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=m.default(this),this.statWatchers={},this.props=y({Node:c.Node,Link:c.Link,File:c.File},t);var e=this.createLink();e.setNode(this.createNode(!0));var n=this;this.StatWatcher=function(t){function e(){return t.call(this,n)||this}return i(e,t),e}(Kt);var r=Vt;this.ReadStream=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(this,o([n],e))||this}return i(e,t),e}(r);var s=jt;this.WriteStream=function(t){function e(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(this,o([n],e))||this}return i(e,t),e}(s),this.FSWatcher=function(t){function e(){return t.call(this,n)||this}return i(e,t),e}(Xt),this.root=e}return t.fromJSON=function(e,n){var r=new t;return r.fromJSON(e,n),r},Object.defineProperty(t.prototype,"promises",{get:function(){if(null===this.promisesApi)throw new Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0}),t.prototype.createLink=function(t,e,n,r){if(void 0===n&&(n=!1),!t)return new this.props.Link(this,null,"");if(!e)throw new Error("createLink: name cannot be empty");return t.createChild(e,this.createNode(n,r))},t.prototype.deleteLink=function(t){var e=t.parent;return!!e&&(e.deleteChild(t),!0)},t.prototype.newInoNumber=function(){return this.releasedInos.pop()||(this.ino=(this.ino+1)%4294967295,this.ino)},t.prototype.newFdNumber=function(){var e=this.releasedFds.pop();return"number"==typeof e?e:t.fd--},t.prototype.createNode=function(t,e){void 0===t&&(t=!1);var n=new this.props.Node(this.newInoNumber(),e);return t&&n.setIsDirectory(),this.inodes[n.ino]=n,n},t.prototype.getNode=function(t){return this.inodes[t]},t.prototype.deleteNode=function(t){t.del(),delete this.inodes[t.ino],this.releasedInos.push(t.ino)},t.prototype.genRndStr=function(){var t=(Math.random()+1).toString(36).substr(2,6);return 6===t.length?t:this.genRndStr()},t.prototype.getLink=function(t){return this.root.walk(t)},t.prototype.getLinkOrThrow=function(t,e){var n=Ft(t),r=this.getLink(n);if(!r)throw q(K,e,t);return r},t.prototype.getResolvedLink=function(t){for(var e="string"==typeof t?Ft(t):t,n=this.root,r=0;r<e.length;){var i=e[r];if(!(n=n.getChild(i)))return null;var o=n.getNode();o.isSymlink()?(e=o.symlink.concat(e.slice(r+1)),n=this.root,r=0):r++}return n},t.prototype.getResolvedLinkOrThrow=function(t,e){var n=this.getResolvedLink(t);if(!n)throw q(K,e,t);return n},t.prototype.resolveSymlinks=function(t){return this.getResolvedLink(t.steps.slice(1))},t.prototype.getLinkAsDirOrThrow=function(t,e){var n=this.getLinkOrThrow(t,e);if(!n.getNode().isDirectory())throw q(X,e,t);return n},t.prototype.getLinkParent=function(t){return this.root.walk(t,t.length-1)},t.prototype.getLinkParentAsDirOrThrow=function(t,e){var n=t instanceof Array?t:Ft(t),r=this.getLinkParent(n);if(!r)throw q(K,e,s+n.join(s));if(!r.getNode().isDirectory())throw q(X,e,s+n.join(s));return r},t.prototype.getFileByFd=function(t){return this.fds[String(t)]},t.prototype.getFileByFdOrThrow=function(t,e){if(!bt(t))throw TypeError(M);var n=this.getFileByFd(t);if(!n)throw q(V,e);return n},t.prototype.getNodeByIdOrCreate=function(t,e,n){if("number"==typeof t){var r=this.getFileByFd(t);if(!r)throw Error("File nto found");return r.node}var i=Lt(t),o=this.getLink(i);if(o)return o.getNode();if(e&N){var s=this.getLinkParent(i);if(s){var a=i[i.length-1];return(o=this.createLink(s,a,!1,n)).getNode()}}throw q(K,"getNodeByIdOrCreate",Wt(t))},t.prototype.wrapAsync=function(t,e,n){var r=this;rt(n),h.default((function(){try{n(null,t.apply(r,e))}catch(t){n(t)}}))},t.prototype._toJSON=function(t,e,n){var r;void 0===t&&(t=this.root),void 0===e&&(e={});var i=!0,o=t.children;for(var s in t.getNode().isFile()&&((r={})[t.getName()]=t.parent.getChild(t.getName()),o=r,t=t.parent),o){i=!1;var _=t.getChild(s);if(!_)throw new Error("_toJSON: unexpected undefined");var c=_.getNode();if(c.isFile()){var f=_.getPath();n&&(f=a(n,f)),e[f]=c.getString()}else c.isDirectory()&&this._toJSON(_,e,n)}var u=t.getPath();return n&&(u=a(n,u)),u&&i&&(e[u]=null),e},t.prototype.toJSON=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=!1);var r=[];if(t){t instanceof Array||(t=[t]);for(var i=0,o=t;i<o.length;i++){var s=Wt(o[i]);(c=this.getResolvedLink(s))&&r.push(c)}}else r.push(this.root);if(!r.length)return e;for(var a=0,_=r;a<_.length;a++){var c=_[a];this._toJSON(c,e,n?c.getPath():"")}return e},t.prototype.fromJSON=function(t,e){for(var n in void 0===e&&(e=I.default.cwd()),t){var r=t[n];if("string"==typeof r){var i=Ft(n=vt(n,e));if(i.length>1){var o=s+i.slice(0,i.length-1).join(s);this.mkdirpBase(o,511)}this.writeFileSync(n,r)}else this.mkdirpBase(n,511)}},t.prototype.reset=function(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))},t.prototype.mountSync=function(t,e){this.fromJSON(e,t)},t.prototype.openLink=function(t,e,n){if(void 0===n&&(n=!0),this.openFiles>=this.maxFiles)throw q(J,"open",t.getPath());var r=t;if(n&&(r=this.resolveSymlinks(t)),!r)throw q(K,"open",t.getPath());var i=r.getNode();if(i.isDirectory()){if((e&(W|O|v))!==W)throw q(z,"open",t.getPath())}else if(e&D)throw q(X,"open",t.getPath());if(!(e&v||i.canRead()))throw q(Z,"open",t.getPath());var o=new this.props.File(t,i,e,this.newFdNumber());return this.fds[o.fd]=o,this.openFiles++,e&L&&o.truncate(),o},t.prototype.openFile=function(t,e,n,r){void 0===r&&(r=!0);var i=Ft(t),o=r?this.getResolvedLink(i):this.getLink(i);if(!o&&e&N){var a=this.getResolvedLink(i.slice(0,i.length-1));if(!a)throw q(K,"open",s+i.join(s));e&N&&"number"==typeof n&&(o=this.createLink(a,i[i.length-1],!1,n))}if(o)return this.openLink(o,e,r);throw q(K,"open",t)},t.prototype.openBase=function(t,e,n,r){void 0===r&&(r=!0);var i=this.openFile(t,e,n,r);if(!i)throw q(K,"open",t);return i.fd},t.prototype.openSync=function(t,e,n){void 0===n&&(n=438);var r=Pt(n),i=Wt(t),o=tt(e);return this.openBase(i,o,r)},t.prototype.open=function(t,e,n,r){var i=n,o=r;"function"==typeof n&&(i=438,o=n);var s=Pt(i=i||438),a=Wt(t),_=tt(e);this.wrapAsync(this.openBase,[a,_,s],o)},t.prototype.closeFile=function(t){this.fds[t.fd]&&(this.openFiles--,delete this.fds[t.fd],this.releasedFds.push(t.fd))},t.prototype.closeSync=function(t){Gt(t);var e=this.getFileByFdOrThrow(t,"close");this.closeFile(e)},t.prototype.close=function(t,e){Gt(t),this.wrapAsync(this.closeSync,[t],e)},t.prototype.openFileOrGetById=function(t,e,n){if("number"==typeof t){var r=this.fds[t];if(!r)throw q(K);return r}return this.openFile(Wt(t),e,n)},t.prototype.readBase=function(t,e,n,r,i){return this.getFileByFdOrThrow(t).read(e,Number(n),Number(r),i)},t.prototype.readSync=function(t,e,n,r,i){return Gt(t),this.readBase(t,e,n,r,i)},t.prototype.read=function(t,e,n,r,i,o){var s=this;if(rt(o),0===r)return I.default.nextTick((function(){o&&o(null,0,e)}));h.default((function(){try{var a=s.readBase(t,e,n,r,i);o(null,a,e)}catch(t){o(t)}}))},t.prototype.readFileBase=function(t,e,n){var r,i,o="number"==typeof t&&bt(t);if(o)i=t;else{var s=Ft(Wt(t)),a=this.getResolvedLink(s);if(a&&a.getNode().isDirectory())throw q(z,"open",a.getPath());i=this.openSync(t,e)}try{r=wt(this.getFileByFdOrThrow(i).getBuffer(),n)}finally{o||this.closeSync(i)}return r},t.prototype.readFileSync=function(t,e){var n=_t(e),r=tt(n.flag);return this.readFileBase(t,r,n.encoding)},t.prototype.readFile=function(t,e,n){var r=it(_t)(e,n),i=r[0],o=r[1],s=tt(i.flag);this.wrapAsync(this.readFileBase,[t,s,i.encoding],o)},t.prototype.writeBase=function(t,e,n,r,i){return this.getFileByFdOrThrow(t,"write").write(e,n,r,i)},t.prototype.writeSync=function(t,e,n,r,i){var o,s,a,_;Gt(t);var c="string"!=typeof e;c?(s=0|(n||0),a=r,_=i):(_=n,o=r);var f=Ct(e,o);return c?void 0===a&&(a=f.length):(s=0,a=f.length),this.writeBase(t,f,s,a,_)},t.prototype.write=function(t,e,n,r,i,o){var s,a,_,c,f,u=this;Gt(t);var l=typeof e,I=typeof n,S=typeof r,E=typeof i;"string"!==l?"function"===I?f=n:"function"===S?(s=0|n,f=r):"function"===E?(s=0|n,a=r,f=i):(s=0|n,a=r,_=i,f=o):"function"===I?f=n:"function"===S?(_=n,f=r):"function"===E&&(_=n,c=r,f=i);var p=Ct(e,c);"string"!==l?void 0===a&&(a=p.length):(s=0,a=p.length);var A=rt(f);h.default((function(){try{var n=u.writeBase(t,p,s,a,_);A(null,n,"string"!==l?p:e)}catch(t){A(t)}}))},t.prototype.writeFileBase=function(t,e,n,r){var i,o="number"==typeof t;i=o?t:this.openBase(Wt(t),n,r);var s=0,a=e.length,_=n&C?void 0:0;try{for(;a>0;){var c=this.writeSync(i,e,s,a,_);s+=c,a-=c,void 0!==_&&(_+=c)}}finally{o||this.closeSync(i)}},t.prototype.writeFileSync=function(t,e,n){var r=ft(n),i=tt(r.flag),o=Pt(r.mode),s=Ct(e,r.encoding);this.writeFileBase(t,s,i,o)},t.prototype.writeFile=function(t,e,n,r){var i=n,o=r;"function"==typeof n&&(i=ct,o=n);var s=rt(o),a=ft(i),_=tt(a.flag),c=Pt(a.mode),f=Ct(e,a.encoding);this.wrapAsync(this.writeFileBase,[t,f,_,c],s)},t.prototype.linkBase=function(t,e){var n=Ft(t),r=this.getLink(n);if(!r)throw q(K,"link",t,e);var i=Ft(e),o=this.getLinkParent(i);if(!o)throw q(K,"link",t,e);var s=i[i.length-1];if(o.getChild(s))throw q(j,"link",t,e);var a=r.getNode();a.nlink++,o.createChild(s,a)},t.prototype.copyFileBase=function(t,e,n){var r=this.readFileSync(t);if(n&b&&this.existsSync(e))throw q(j,"copyFile",t,e);if(n&G)throw q(Q,"copyFile",t,e);this.writeFileBase(e,r,H.w,438)},t.prototype.copyFileSync=function(t,e,n){var r=Wt(t),i=Wt(e);return this.copyFileBase(r,i,0|(n||0))},t.prototype.copyFile=function(t,e,n,r){var i,o,s=Wt(t),a=Wt(e);"function"==typeof n?(i=0,o=n):(i=n,o=r),rt(o),this.wrapAsync(this.copyFileBase,[s,a,i],o)},t.prototype.linkSync=function(t,e){var n=Wt(t),r=Wt(e);this.linkBase(n,r)},t.prototype.link=function(t,e,n){var r=Wt(t),i=Wt(e);this.wrapAsync(this.linkBase,[r,i],n)},t.prototype.unlinkBase=function(t){var e=Ft(t),n=this.getLink(e);if(!n)throw q(K,"unlink",t);if(n.length)throw Error("Dir not empty...");this.deleteLink(n);var r=n.getNode();r.nlink--,r.nlink<=0&&this.deleteNode(r)},t.prototype.unlinkSync=function(t){var e=Wt(t);this.unlinkBase(e)},t.prototype.unlink=function(t,e){var n=Wt(t);this.wrapAsync(this.unlinkBase,[n],e)},t.prototype.symlinkBase=function(t,e){var n=Ft(e),r=this.getLinkParent(n);if(!r)throw q(K,"symlink",t,e);var i=n[n.length-1];if(r.getChild(i))throw q(j,"symlink",t,e);var o=r.createChild(i);return o.getNode().makeSymlink(Ft(t)),o},t.prototype.symlinkSync=function(t,e,n){var r=Wt(t),i=Wt(e);this.symlinkBase(r,i)},t.prototype.symlink=function(t,e,n,r){var i=rt("function"==typeof n?n:r),o=Wt(t),s=Wt(e);this.wrapAsync(this.symlinkBase,[o,s],i)},t.prototype.realpathBase=function(t,e){var n=Ft(t),r=this.getResolvedLink(n);if(!r)throw q(K,"realpath",t);return d.strToEncoding(r.getPath(),e)},t.prototype.realpathSync=function(t,e){return this.realpathBase(Wt(t),It(e).encoding)},t.prototype.realpath=function(t,e,n){var r=St(e,n),i=r[0],o=r[1],s=Wt(t);this.wrapAsync(this.realpathBase,[s,i.encoding],o)},t.prototype.lstatBase=function(t,e){void 0===e&&(e=!1);var n=this.getLink(Ft(t));if(!n)throw q(K,"lstat",t);return f.default.build(n.getNode(),e)},t.prototype.lstatSync=function(t,e){return this.lstatBase(Wt(t),mt(e).bigint)},t.prototype.lstat=function(t,e,n){var r=gt(e,n),i=r[0],o=r[1];this.wrapAsync(this.lstatBase,[Wt(t),i.bigint],o)},t.prototype.statBase=function(t,e){void 0===e&&(e=!1);var n=this.getResolvedLink(Ft(t));if(!n)throw q(K,"stat",t);return f.default.build(n.getNode(),e)},t.prototype.statSync=function(t,e){return this.statBase(Wt(t),mt(e).bigint)},t.prototype.stat=function(t,e,n){var r=gt(e,n),i=r[0],o=r[1];this.wrapAsync(this.statBase,[Wt(t),i.bigint],o)},t.prototype.fstatBase=function(t,e){void 0===e&&(e=!1);var n=this.getFileByFd(t);if(!n)throw q(V,"fstat");return f.default.build(n.node,e)},t.prototype.fstatSync=function(t,e){return this.fstatBase(t,mt(e).bigint)},t.prototype.fstat=function(t,e,n){var r=gt(e,n),i=r[0],o=r[1];this.wrapAsync(this.fstatBase,[t,i.bigint],o)},t.prototype.renameBase=function(t,e){var n=this.getLink(Ft(t));if(!n)throw q(K,"rename",t,e);var r=Ft(e),i=this.getLinkParent(r);if(!i)throw q(K,"rename",t,e);var s=n.parent;s&&s.deleteChild(n);var a=r[r.length-1];n.steps=o(i.steps,[a]),i.setChild(n.getName(),n)},t.prototype.renameSync=function(t,e){var n=Wt(t),r=Wt(e);this.renameBase(n,r)},t.prototype.rename=function(t,e,n){var r=Wt(t),i=Wt(e);this.wrapAsync(this.renameBase,[r,i],n)},t.prototype.existsBase=function(t){return!!this.statBase(t)},t.prototype.existsSync=function(t){try{return this.existsBase(Wt(t))}catch(t){return!1}},t.prototype.exists=function(t,e){var n=this,r=Wt(t);if("function"!=typeof e)throw Error(Y);h.default((function(){try{e(n.existsBase(r))}catch(t){e(!1)}}))},t.prototype.accessBase=function(t,e){this.getLinkOrThrow(t,"access")},t.prototype.accessSync=function(t,e){void 0===e&&(e=P);var n=Wt(t);e|=0,this.accessBase(n,e)},t.prototype.access=function(t,e,n){var r,i=P;"function"!=typeof e?(i=0|e,r=rt(n)):r=e;var o=Wt(t);this.wrapAsync(this.accessBase,[o,i],r)},t.prototype.appendFileSync=function(t,e,n){void 0===n&&(n=ut);var r=lt(n);r.flag&&!bt(t)||(r.flag="a"),this.writeFileSync(t,e,r)},t.prototype.appendFile=function(t,e,n,r){var i=ht(n,r),o=i[0],s=i[1];o.flag&&!bt(t)||(o.flag="a"),this.writeFile(t,e,o,s)},t.prototype.readdirBase=function(t,e){var n=Ft(t),r=this.getResolvedLink(n);if(!r)throw q(K,"readdir",t);if(!r.getNode().isDirectory())throw q(X,"scandir",t);if(e.withFileTypes){var i=[];for(var o in r.children){var s=r.getChild(o);s&&i.push(u.default.build(s,e.encoding))}return U||"buffer"===e.encoding||i.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),i}var a=[];for(var _ in r.children)a.push(d.strToEncoding(_,e.encoding));return U||"buffer"===e.encoding||a.sort(),a},t.prototype.readdirSync=function(t,e){var n=Tt(e),r=Wt(t);return this.readdirBase(r,n)},t.prototype.readdir=function(t,e,n){var r=yt(e,n),i=r[0],o=r[1],s=Wt(t);this.wrapAsync(this.readdirBase,[s,i],o)},t.prototype.readlinkBase=function(t,e){var n=this.getLinkOrThrow(t,"readlink").getNode();if(!n.isSymlink())throw q(x,"readlink",t);var r=s+n.symlink.join(s);return d.strToEncoding(r,e)},t.prototype.readlinkSync=function(t,e){var n=st(e),r=Wt(t);return this.readlinkBase(r,n.encoding)},t.prototype.readlink=function(t,e,n){var r=at(e,n),i=r[0],o=r[1],s=Wt(t);this.wrapAsync(this.readlinkBase,[s,i.encoding],o)},t.prototype.fsyncBase=function(t){this.getFileByFdOrThrow(t,"fsync")},t.prototype.fsyncSync=function(t){this.fsyncBase(t)},t.prototype.fsync=function(t,e){this.wrapAsync(this.fsyncBase,[t],e)},t.prototype.fdatasyncBase=function(t){this.getFileByFdOrThrow(t,"fdatasync")},t.prototype.fdatasyncSync=function(t){this.fdatasyncBase(t)},t.prototype.fdatasync=function(t,e){this.wrapAsync(this.fdatasyncBase,[t],e)},t.prototype.ftruncateBase=function(t,e){this.getFileByFdOrThrow(t,"ftruncate").truncate(e)},t.prototype.ftruncateSync=function(t,e){this.ftruncateBase(t,e)},t.prototype.ftruncate=function(t,e,n){var r="number"==typeof e?e:0,i=rt("number"==typeof e?n:e);this.wrapAsync(this.ftruncateBase,[t,r],i)},t.prototype.truncateBase=function(t,e){var n=this.openSync(t,"r+");try{this.ftruncateSync(n,e)}finally{this.closeSync(n)}},t.prototype.truncateSync=function(t,e){if(bt(t))return this.ftruncateSync(t,e);this.truncateBase(t,e)},t.prototype.truncate=function(t,e,n){var r="number"==typeof e?e:0,i=rt("number"==typeof e?n:e);if(bt(t))return this.ftruncate(t,r,i);this.wrapAsync(this.truncateBase,[t,r],i)},t.prototype.futimesBase=function(t,e,n){var r=this.getFileByFdOrThrow(t,"futimes").node;r.atime=new Date(1e3*e),r.mtime=new Date(1e3*n)},t.prototype.futimesSync=function(t,e,n){this.futimesBase(t,Bt(e),Bt(n))},t.prototype.futimes=function(t,e,n,r){this.wrapAsync(this.futimesBase,[t,Bt(e),Bt(n)],r)},t.prototype.utimesBase=function(t,e,n){var r=this.openSync(t,"r+");try{this.futimesBase(r,e,n)}finally{this.closeSync(r)}},t.prototype.utimesSync=function(t,e,n){this.utimesBase(Wt(t),Bt(e),Bt(n))},t.prototype.utimes=function(t,e,n,r){this.wrapAsync(this.utimesBase,[Wt(t),Bt(e),Bt(n)],r)},t.prototype.mkdirBase=function(t,e){var n=Ft(t);if(!n.length)throw q(z,"mkdir",t);var r=this.getLinkParentAsDirOrThrow(t,"mkdir"),i=n[n.length-1];if(r.getChild(i))throw q(j,"mkdir",t);r.createChild(i,this.createNode(!0,e))},t.prototype.mkdirpBase=function(t,e){for(var n=Ft(t),r=this.root,i=0;i<n.length;i++){var o=n[i];if(!r.getNode().isDirectory())throw q(X,"mkdir",r.getPath());var s=r.getChild(o);if(s){if(!s.getNode().isDirectory())throw q(X,"mkdir",s.getPath());r=s}else r=r.createChild(o,this.createNode(!0,e))}},t.prototype.mkdirSync=function(t,e){var n=pt(e),r=Pt(n.mode,511),i=Wt(t);n.recursive?this.mkdirpBase(i,r):this.mkdirBase(i,r)},t.prototype.mkdir=function(t,e,n){var r=pt(e),i=rt("function"==typeof e?e:n),o=Pt(r.mode,511),s=Wt(t);r.recursive?this.wrapAsync(this.mkdirpBase,[s,o],i):this.wrapAsync(this.mkdirBase,[s,o],i)},t.prototype.mkdirpSync=function(t,e){this.mkdirSync(t,{mode:e,recursive:!0})},t.prototype.mkdirp=function(t,e,n){var r="function"==typeof e?void 0:e,i=rt("function"==typeof e?e:n);this.mkdir(t,{mode:r,recursive:!0},i)},t.prototype.mkdtempBase=function(t,e,n){void 0===n&&(n=5);var r=t+this.genRndStr();try{return this.mkdirBase(r,511),d.strToEncoding(r,e)}catch(r){if(r.code===j){if(n>1)return this.mkdtempBase(t,e,n-1);throw Error("Could not create temp dir.")}throw r}},t.prototype.mkdtempSync=function(t,e){var n=st(e).encoding;if(!t||"string"!=typeof t)throw new TypeError("filename prefix is required");return Dt(t),this.mkdtempBase(t,n)},t.prototype.mkdtemp=function(t,e,n){var r=at(e,n),i=r[0].encoding,o=r[1];if(!t||"string"!=typeof t)throw new TypeError("filename prefix is required");Dt(t)&&this.wrapAsync(this.mkdtempBase,[t,i],o)},t.prototype.rmdirBase=function(t,e){var n=dt(e),r=this.getLinkAsDirOrThrow(t,"rmdir");if(r.length&&!n.recursive)throw q($,"rmdir",t);this.deleteLink(r)},t.prototype.rmdirSync=function(t,e){this.rmdirBase(Wt(t),e)},t.prototype.rmdir=function(t,e,n){var r=dt(e),i=rt("function"==typeof e?e:n);this.wrapAsync(this.rmdirBase,[Wt(t),r],i)},t.prototype.fchmodBase=function(t,e){this.getFileByFdOrThrow(t,"fchmod").chmod(e)},t.prototype.fchmodSync=function(t,e){this.fchmodBase(t,Pt(e))},t.prototype.fchmod=function(t,e,n){this.wrapAsync(this.fchmodBase,[t,Pt(e)],n)},t.prototype.chmodBase=function(t,e){var n=this.openSync(t,"r+");try{this.fchmodBase(n,e)}finally{this.closeSync(n)}},t.prototype.chmodSync=function(t,e){var n=Pt(e),r=Wt(t);this.chmodBase(r,n)},t.prototype.chmod=function(t,e,n){var r=Pt(e),i=Wt(t);this.wrapAsync(this.chmodBase,[i,r],n)},t.prototype.lchmodBase=function(t,e){var n=this.openBase(t,O,0,!1);try{this.fchmodBase(n,e)}finally{this.closeSync(n)}},t.prototype.lchmodSync=function(t,e){var n=Pt(e),r=Wt(t);this.lchmodBase(r,n)},t.prototype.lchmod=function(t,e,n){var r=Pt(e),i=Wt(t);this.wrapAsync(this.lchmodBase,[i,r],n)},t.prototype.fchownBase=function(t,e,n){this.getFileByFdOrThrow(t,"fchown").chown(e,n)},t.prototype.fchownSync=function(t,e,n){Ht(e),Ut(n),this.fchownBase(t,e,n)},t.prototype.fchown=function(t,e,n,r){Ht(e),Ut(n),this.wrapAsync(this.fchownBase,[t,e,n],r)},t.prototype.chownBase=function(t,e,n){this.getResolvedLinkOrThrow(t,"chown").getNode().chown(e,n)},t.prototype.chownSync=function(t,e,n){Ht(e),Ut(n),this.chownBase(Wt(t),e,n)},t.prototype.chown=function(t,e,n,r){Ht(e),Ut(n),this.wrapAsync(this.chownBase,[Wt(t),e,n],r)},t.prototype.lchownBase=function(t,e,n){this.getLinkOrThrow(t,"lchown").getNode().chown(e,n)},t.prototype.lchownSync=function(t,e,n){Ht(e),Ut(n),this.lchownBase(Wt(t),e,n)},t.prototype.lchown=function(t,e,n,r){Ht(e),Ut(n),this.wrapAsync(this.lchownBase,[Wt(t),e,n],r)},t.prototype.watchFile=function(t,e,n){var r=Wt(t),i=e,o=n;if("function"==typeof i&&(o=e,i=null),"function"!=typeof o)throw Error('"watchFile()" requires a listener function');var s=5007,a=!0;i&&"object"==typeof i&&("number"==typeof i.interval&&(s=i.interval),"boolean"==typeof i.persistent&&(a=i.persistent));var _=this.statWatchers[r];return _||((_=new this.StatWatcher).start(r,a,s),this.statWatchers[r]=_),_.addListener("change",o),_},t.prototype.unwatchFile=function(t,e){var n=Wt(t),r=this.statWatchers[n];r&&("function"==typeof e?r.removeListener("change",e):r.removeAllListeners("change"),0===r.listenerCount("change")&&(r.stop(),delete this.statWatchers[n]))},t.prototype.createReadStream=function(t,e){return new this.ReadStream(t,e)},t.prototype.createWriteStream=function(t,e){return new this.WriteStream(t,e)},t.prototype.watch=function(t,e,n){var r=Wt(t),i=e;"function"==typeof e&&(n=e,i=null);var o=st(i),s=o.persistent,a=o.recursive,_=o.encoding;void 0===s&&(s=!0),void 0===a&&(a=!1);var c=new this.FSWatcher;return c.start(r,s,a,_),n&&c.addListener("change",n),c},t.fd=2147483647,t}();function Mt(t){t.emit("stop")}e.Volume=kt;var Yt,Kt=function(t){function e(e){var n=t.call(this)||this;return n.onInterval=function(){try{var t=n.vol.statSync(n.filename);n.hasChanged(t)&&(n.emit("change",t,n.prev),n.prev=t)}finally{n.loop()}},n.vol=e,n}return i(e,t),e.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)},e.prototype.hasChanged=function(t){return t.mtimeMs>this.prev.mtimeMs||t.nlink!==this.prev.nlink},e.prototype.start=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=5007),this.filename=Wt(t),this.setTimeout=e?setTimeout:S.default,this.interval=n,this.prev=this.vol.statSync(this.filename),this.loop()},e.prototype.stop=function(){clearTimeout(this.timeoutRef),I.default.nextTick(Mt,this)},e}(A.EventEmitter);function Vt(t,e,n){if(!(this instanceof Vt))return new Vt(t,e,n);if(this._vol=t,void 0===(n=y({},et(n,{}))).highWaterMark&&(n.highWaterMark=65536),E.Readable.call(this,n),this.path=Wt(e),this.fd=void 0===n.fd?null:n.fd,this.flags=void 0===n.flags?"r":n.flags,this.mode=void 0===n.mode?438:n.mode,this.start=n.start,this.end=n.end,this.autoClose=void 0===n.autoClose||n.autoClose,this.pos=void 0,this.bytesRead=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",(function(){this.autoClose&&this.destroy&&this.destroy()}))}function xt(t){this.close()}function jt(t,e,n){if(!(this instanceof jt))return new jt(t,e,n);if(this._vol=t,n=y({},et(n,{})),E.Writable.call(this,n),this.path=Wt(e),this.fd=void 0===n.fd?null:n.fd,this.flags=void 0===n.flags?"w":n.flags,this.mode=void 0===n.mode?438:n.mode,this.start=n.start,this.autoClose=void 0===n.autoClose||!!n.autoClose,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}n.encoding&&this.setDefaultEncoding(n.encoding),"number"!=typeof this.fd&&this.open(),this.once("finish",(function(){this.autoClose&&this.close()}))}e.StatWatcher=Kt,R.inherits(Vt,E.Readable),e.ReadStream=Vt,Vt.prototype.open=function(){var t=this;this._vol.open(this.path,this.flags,this.mode,(function(e,n){if(e)return t.autoClose&&t.destroy&&t.destroy(),void t.emit("error",e);t.fd=n,t.emit("open",n),t.read()}))},Vt.prototype._read=function(t){if("number"!=typeof this.fd)return this.once("open",(function(){this._read(t)}));if(!this.destroyed){var e;(!Yt||Yt.length-Yt.used<128)&&(e=this._readableState.highWaterMark,(Yt=l.bufferAllocUnsafe(e)).used=0);var n=Yt,r=Math.min(Yt.length-Yt.used,t),i=Yt.used;if(void 0!==this.pos&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);var o=this;this._vol.read(this.fd,Yt,Yt.used,r,this.pos,(function(t,e){if(t)o.autoClose&&o.destroy&&o.destroy(),o.emit("error",t);else{var r=null;e>0&&(o.bytesRead+=e,r=n.slice(i,i+e)),o.push(r)}})),void 0!==this.pos&&(this.pos+=r),Yt.used+=r}},Vt.prototype._destroy=function(t,e){this.close((function(n){e(t||n)}))},Vt.prototype.close=function(t){var e=this;if(t&&this.once("close",t),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd?void this.once("open",xt):I.default.nextTick((function(){return e.emit("close")}));this.closed=!0,this._vol.close(this.fd,(function(t){t?e.emit("error",t):e.emit("close")})),this.fd=null},R.inherits(jt,E.Writable),e.WriteStream=jt,jt.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(t,e){if(t)return this.autoClose&&this.destroy&&this.destroy(),void this.emit("error",t);this.fd=e,this.emit("open",e)}.bind(this))},jt.prototype._write=function(t,e,n){if(!(t instanceof l.Buffer))return this.emit("error",new Error("Invalid data"));if("number"!=typeof this.fd)return this.once("open",(function(){this._write(t,e,n)}));var r=this;this._vol.write(this.fd,t,0,t.length,this.pos,(function(t,e){if(t)return r.autoClose&&r.destroy&&r.destroy(),n(t);r.bytesWritten+=e,n()})),void 0!==this.pos&&(this.pos+=t.length)},jt.prototype._writev=function(t,e){if("number"!=typeof this.fd)return this.once("open",(function(){this._writev(t,e)}));for(var n=this,r=t.length,i=new Array(r),o=0,s=0;s<r;s++){var a=t[s].chunk;i[s]=a,o+=a.length}var _=l.Buffer.concat(i);this._vol.write(this.fd,_,0,_.length,this.pos,(function(t,r){if(t)return n.destroy&&n.destroy(),e(t);n.bytesWritten+=r,e()})),void 0!==this.pos&&(this.pos+=o)},jt.prototype._destroy=Vt.prototype._destroy,jt.prototype.close=Vt.prototype.close,jt.prototype.destroySoon=jt.prototype.end;var Xt=function(t){function e(e){var n=t.call(this)||this;return n._filename="",n._filenameEncoded="",n._recursive=!1,n._encoding=d.ENCODING_UTF8,n._onNodeChange=function(){n._emit("change")},n._onParentChild=function(t){t.getName()===n._getName()&&n._emit("rename")},n._emit=function(t){n.emit("change",t,n._filenameEncoded)},n._persist=function(){n._timer=setTimeout(n._persist,1e6)},n._vol=e,n}return i(e,t),e.prototype._getName=function(){return this._steps[this._steps.length-1]},e.prototype.start=function(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===r&&(r=d.ENCODING_UTF8),this._filename=Wt(t),this._steps=Ft(this._filename),this._filenameEncoded=d.strToEncoding(this._filename),this._recursive=n,this._encoding=r;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(t){var i=new Error("watch "+this._filename+" "+t.code);throw i.code=t.code,i.errno=t.code,i}this._link.getNode().on("change",this._onNodeChange),this._link.on("child:add",this._onNodeChange),this._link.on("child:delete",this._onNodeChange);var o=this._link.parent;o&&(o.setMaxListeners(o.getMaxListeners()+1),o.on("child:delete",this._onParentChild)),e&&this._persist()},e.prototype.close=function(){clearTimeout(this._timer),this._link.getNode().removeListener("change",this._onNodeChange);var t=this._link.parent;t&&t.removeListener("child:delete",this._onParentChild)},e}(A.EventEmitter);e.FSWatcher=Xt},6470:t=>{"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function n(t,e){for(var n,r="",i=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)n=t.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var _=r.lastIndexOf("/");if(_!==r.length-1){-1===_?(r="",i=0):i=(r=r.slice(0,_)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+t.slice(o+1,a):r=t.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var r={resolve:function(){for(var t,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s;o>=0?s=arguments[o]:(void 0===t&&(t=process.cwd()),s=t),e(s),0!==s.length&&(r=s+"/"+r,i=47===s.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(e(t),0===t.length)return".";var r=47===t.charCodeAt(0),i=47===t.charCodeAt(t.length-1);return 0!==(t=n(t,!r)).length||r||(t="."),t.length>0&&i&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,n=0;n<arguments.length;++n){var i=arguments[n];e(i),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":r.normalize(t)},relative:function(t,n){if(e(t),e(n),t===n)return"";if((t=r.resolve(t))===(n=r.resolve(n)))return"";for(var i=1;i<t.length&&47===t.charCodeAt(i);++i);for(var o=t.length,s=o-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var _=n.length-a,c=s<_?s:_,f=-1,u=0;u<=c;++u){if(u===c){if(_>c){if(47===n.charCodeAt(a+u))return n.slice(a+u+1);if(0===u)return n.slice(a+u)}else s>c&&(47===t.charCodeAt(i+u)?f=u:0===u&&(f=0));break}var l=t.charCodeAt(i+u);if(l!==n.charCodeAt(a+u))break;47===l&&(f=u)}var h="";for(u=i+f+1;u<=o;++u)u!==o&&47!==t.charCodeAt(u)||(0===h.length?h+="..":h+="/..");return h.length>0?h+n.slice(a+f):(a+=f,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var n=t.charCodeAt(0),r=47===n,i=-1,o=!0,s=t.length-1;s>=1;--s)if(47===(n=t.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":t.slice(0,i)},basename:function(t,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');e(t);var r,i=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var a=n.length-1,_=-1;for(r=t.length-1;r>=0;--r){var c=t.charCodeAt(r);if(47===c){if(!s){i=r+1;break}}else-1===_&&(s=!1,_=r+1),a>=0&&(c===n.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=_))}return i===o?o=_:-1===o&&(o=t.length),t.slice(i,o)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!s){i=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":t.slice(i,o)},extname:function(t){e(t);for(var n=-1,r=0,i=-1,o=!0,s=0,a=t.length-1;a>=0;--a){var _=t.charCodeAt(a);if(47!==_)-1===i&&(o=!1,i=a+1),46===_?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){r=a+1;break}}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":t.slice(n,i)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+"/"+r:r}(0,t)},parse:function(t){e(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return n;var r,i=t.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var s=-1,a=0,_=-1,c=!0,f=t.length-1,u=0;f>=r;--f)if(47!==(i=t.charCodeAt(f)))-1===_&&(c=!1,_=f+1),46===i?-1===s?s=f:1!==u&&(u=1):-1!==s&&(u=-1);else if(!c){a=f+1;break}return-1===s||-1===_||0===u||1===u&&s===_-1&&s===a+1?-1!==_&&(n.base=n.name=0===a&&o?t.slice(1,_):t.slice(a,_)):(0===a&&o?(n.name=t.slice(1,s),n.base=t.slice(1,_)):(n.name=t.slice(a,s),n.base=t.slice(a,_)),n.ext=t.slice(s,_)),a>0?n.dir=t.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r},1353:(t,e,n)=>{t.exports=n(6417).randomBytes},7963:(t,e,n)=>{"use strict";function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var i=n(9509),o=n(1353),s=i.Buffer,a=i.kMaxLength,_=global.crypto||global.msCrypto,c=Math.pow(2,32)-1;function f(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>a||t>e)throw new RangeError("offset out of range")}function u(t,e,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>a)throw new RangeError("buffer too small")}function l(t,e,n,r){if(process.browser){var i=t.buffer,s=new Uint8Array(i,e,n);return _.getRandomValues(s),r?void process.nextTick((function(){r(null,t)})):t}if(!r)return o(n).copy(t,e),t;o(n,(function(n,i){if(n)return r(n);i.copy(t,e),r(null,t)}))}_&&_.getRandomValues||!process.browser?(e.randomFill=function(t,e,n,r){if(!(s.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)r=e,e=0,n=t.length;else if("function"==typeof n)r=n,n=t.length-e;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return f(e,t.length),u(n,e,t.length),l(t,e,n,r)},e.randomFillSync=function(t,e,n){if(void 0===e&&(e=0),!(s.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return f(e,t.length),void 0===n&&(n=t.length-e),u(n,e,t.length),l(t,e,n)}):(e.randomFill=r,e.randomFillSync=r)},9496:(t,e,n)=>{var r=n(6417);"function"==typeof r.randomFill&&"function"==typeof r.randomFillSync?(e.randomFill=r.randomFill,e.randomFillSync=r.randomFillSync):t.exports=n(7963)},9509:(t,e,n)=>{var r=n(4293),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}};